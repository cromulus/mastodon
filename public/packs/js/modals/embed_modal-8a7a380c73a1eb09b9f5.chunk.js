(window.webpackJsonp=window.webpackJsonp||[]).push([[583],{1150:function(e,t,a){"use strict";a.r(t);var s=a(0),i=a(2),o=a.n(i),d=a(7),l=a(21),c=a(43),r=a(18),n=a(35),m=a(6),b=a(24),h=a(4);const p=Object(d.d)({close:{id:"lightbox.close",defaultMessage:"Close"}});class u extends r.a{constructor(){super(...arguments),this.state={loading:!1,oembed:null},this.setIframeRef=e=>{this.iframe=e},this.handleTextareaClick=e=>{e.target.select()}}componentDidMount(){const{id:e}=this.props;this.setState({loading:!0}),Object(m.a)().get(`/api/web/embeds/${e}`).then((e=>{this.setState({loading:!1,oembed:e.data});const t=this.iframe.contentWindow.document;t.open(),t.write(e.data.html),t.close(),t.body.style.margin=0,this.iframe.width=t.body.scrollWidth,this.iframe.height=t.body.scrollHeight})).catch((e=>{this.props.onError(e)}))}render(){const{intl:e,onClose:t}=this.props,{oembed:a}=this.state;return Object(s.a)("div",{className:"modal-root__modal report-modal embed-modal"},void 0,Object(s.a)("div",{className:"report-modal__target"},void 0,Object(s.a)(b.a,{className:"media-modal__close",title:e.formatMessage(p.close),icon:"times",iconComponent:n.a,onClick:t,size:16}),Object(s.a)(l.a,{id:"status.embed",defaultMessage:"Embed"})),Object(s.a)("div",{className:"report-modal__container embed-modal__container",style:{display:"block"}},void 0,Object(s.a)("p",{className:"hint"},void 0,Object(s.a)(l.a,{id:"embed.instructions",defaultMessage:"Embed this status on your website by copying the code below."})),Object(s.a)("input",{type:"text",className:"embed-modal__html",readOnly:!0,value:a&&a.html||"",onClick:this.handleTextareaClick}),Object(s.a)("p",{className:"hint"},void 0,Object(s.a)(l.a,{id:"embed.preview",defaultMessage:"Here is what it will look like:"})),Object(h.jsx)("iframe",{className:"embed-modal__iframe",frameBorder:"0",ref:this.setIframeRef,sandbox:"allow-scripts allow-same-origin",title:"preview"})))}}u.propTypes={id:o.a.string.isRequired,onClose:o.a.func.isRequired,onError:o.a.func.isRequired,intl:o.a.object.isRequired},t.default=Object(c.c)(u)}}]);
//# sourceMappingURL=embed_modal-8a7a380c73a1eb09b9f5.chunk.js.map