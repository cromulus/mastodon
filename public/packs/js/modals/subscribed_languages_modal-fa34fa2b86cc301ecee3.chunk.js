(window.webpackJsonp=window.webpackJsonp||[]).push([[587],{1275:function(e,a,t){"use strict";t.r(a);var s=t(0),n=t(1),l=t(3),c=t.n(l),i=t(8),g=t(22),o=t(50),d=t(4),r=t(17),u=t.n(r),b=t(19),p=t(10),m=t(41),O=t(40),h=t(14),j=t(30),v=t(25),f=t(1240),L=t(6);const _=Object(i.d)({close:{id:"lightbox.close",defaultMessage:"Close"}}),S=Object(m.a)([(e,a)=>e.getIn(["timelines",`account:${a}`,"items"],Object(d.List)()),e=>e.get("statuses")],((e,a)=>new d.Set(e.map((e=>a.get(e))).filter((e=>!e.get("reblog"))).map((e=>e.get("language"))))));class w extends b.a{constructor(){super(...arguments),Object(n.a)(this,"state",{selectedLanguages:this.props.selectedLanguages}),Object(n.a)(this,"handleLanguageToggle",((e,a)=>{const{selectedLanguages:t}=this.state;a?this.setState({selectedLanguages:t.add(e)}):this.setState({selectedLanguages:t.delete(e)})})),Object(n.a)(this,"handleSubmit",(()=>{this.props.onSubmit(this.state.selectedLanguages.toArray()),this.props.onClose()}))}renderItem(e){const a=this.props.languages.find((a=>a[0]===e)),t=this.state.selectedLanguages.includes(e);return a?Object(s.a)(f.a,{name:"languages",value:e,label:a[1],checked:t,onToggle:this.handleLanguageToggle,multiple:!0},e):null}render(){const{acct:e,availableLanguages:a,selectedLanguages:t,intl:n,onClose:l}=this.props;return Object(s.a)("div",{className:"modal-root__modal report-dialog-modal"},void 0,Object(s.a)("div",{className:"report-modal__target"},void 0,Object(s.a)(v.a,{className:"report-modal__close",title:n.formatMessage(_.close),icon:"times",iconComponent:O.a,onClick:l,size:20}),Object(s.a)(g.a,{id:"subscribed_languages.target",defaultMessage:"Change subscribed languages for {target}",values:{target:Object(s.a)("strong",{},void 0,e)}})),Object(s.a)("div",{className:"report-dialog-modal__container"},void 0,Object(s.a)("p",{className:"report-dialog-modal__lead"},void 0,Object(s.a)(g.a,{id:"subscribed_languages.lead",defaultMessage:"Only posts in selected languages will appear on your home and list timelines after the change. Select none to receive posts in all languages."})),Object(s.a)("div",{},void 0,a.union(t).delete(null).map((e=>this.renderItem(e)))),Object(s.a)("div",{className:"flex-spacer"}),Object(s.a)("div",{className:"report-dialog-modal__actions"},void 0,Object(s.a)(j.a,{disabled:Object(d.is)(this.state.selectedLanguages,this.props.selectedLanguages),onClick:this.handleSubmit},void 0,Object(s.a)(g.a,{id:"subscribed_languages.save",defaultMessage:"Save changes"})))))}}Object(n.a)(w,"propTypes",{accountId:c.a.string.isRequired,acct:c.a.string.isRequired,availableLanguages:u.a.setOf(c.a.string),selectedLanguages:u.a.setOf(c.a.string),onClose:c.a.func.isRequired,languages:c.a.arrayOf(c.a.arrayOf(c.a.string)),intl:c.a.object.isRequired,submit:c.a.func.isRequired}),Object(n.a)(w,"defaultProps",{languages:L.m}),a.default=Object(p.connect)(((e,a)=>{let{accountId:t}=a;return{acct:e.getIn(["accounts",t,"acct"]),availableLanguages:S(e,t),selectedLanguages:Object(d.Set)(e.getIn(["relationships",t,"languages"])||Object(d.List)())}}),((e,a)=>{let{accountId:t}=a;return{onSubmit(a){e(Object(h.F)(t,{languages:a}))}}}))(Object(o.c)(w))}}]);
//# sourceMappingURL=subscribed_languages_modal-fa34fa2b86cc301ecee3.chunk.js.map