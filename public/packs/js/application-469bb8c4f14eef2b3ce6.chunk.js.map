{"version":3,"sources":["webpack:///./node_modules/error-stack-parser/error-stack-parser.js","webpack:///./node_modules/stack-generator/stack-generator.js","webpack:///./node_modules/stacktrace-gps/stacktrace-gps.js","webpack:///./node_modules/stacktrace-gps/node_modules/source-map/source-map.js","webpack:///./node_modules/stacktrace-gps/node_modules/source-map/lib/base64.js","webpack:///./node_modules/stacktrace-gps/node_modules/source-map/lib/mapping-list.js","webpack:///./node_modules/stacktrace-gps/node_modules/source-map/lib/source-map-consumer.js","webpack:///./node_modules/stacktrace-gps/node_modules/source-map/lib/binary-search.js","webpack:///./node_modules/stacktrace-gps/node_modules/source-map/lib/quick-sort.js","webpack:///./node_modules/stacktrace-gps/node_modules/source-map/lib/source-node.js","webpack:///./app/javascript/mastodon/components/error_boundary.jsx","webpack:///./app/javascript/mastodon/actions/onboarding.js","webpack:///./app/javascript/mastodon/features/picture_in_picture/components/header.jsx","webpack:///./app/javascript/mastodon/features/picture_in_picture/index.jsx","webpack:///./app/javascript/mastodon/components/logo.tsx","webpack:///./app/javascript/mastodon/features/ui/components/header.jsx","webpack:///./app/javascript/mastodon/features/ui/components/upload_area.jsx","webpack:///./app/javascript/mastodon/features/ui/components/column_loading.tsx","webpack:///./app/javascript/mastodon/components/server_banner.jsx","webpack:///./app/javascript/mastodon/features/ui/components/compose_panel.jsx","webpack:///./app/javascript/mastodon/features/ui/components/drawer_loading.jsx","webpack:///./app/javascript/mastodon/features/account/components/featured_tags.jsx","webpack:///./app/javascript/mastodon/features/account/containers/featured_tags_container.js","webpack:///./app/javascript/mastodon/features/account/navigation.jsx","webpack:///./app/javascript/mastodon/components/navigation_portal.tsx","webpack:///./app/javascript/mastodon/features/ui/components/disabled_account_banner.jsx","webpack:///./app/javascript/mastodon/features/ui/components/follow_requests_column_link.jsx","webpack:///./app/javascript/mastodon/features/ui/components/list_panel.jsx","webpack:///./app/javascript/mastodon/features/ui/components/notifications_counter_icon.js","webpack:///./app/javascript/mastodon/features/ui/components/sign_in_banner.jsx","webpack:///./app/javascript/mastodon/features/ui/components/navigation_panel.jsx","webpack:///./app/javascript/mastodon/features/ui/components/columns_area.jsx","webpack:///./app/javascript/mastodon/features/ui/containers/columns_area_container.js","webpack:///./app/javascript/mastodon/features/ui/util/react_router_helpers.jsx","webpack:///./app/javascript/mastodon/features/ui/index.jsx","webpack:///./app/javascript/mastodon/containers/mastodon.jsx","webpack:///./node_modules/marky/lib/marky.browser.es.js","webpack:///./app/javascript/mastodon/performance.js","webpack:///./app/javascript/mastodon/main.jsx","webpack:///./app/javascript/packs/application.js","webpack:///./node_modules/stacktrace-gps/node_modules/source-map/lib/util.js","webpack:///./node_modules/stacktrace-js/stacktrace.js","webpack:///./node_modules/stackframe/stackframe.js","webpack:///./node_modules/stacktrace-gps/node_modules/source-map/lib/source-map-generator.js","webpack:///./node_modules/stacktrace-gps/node_modules/source-map/lib/base64-vlq.js","webpack:///./node_modules/stacktrace-gps/node_modules/source-map/lib/array-set.js"],"names":["StackFrame","FIREFOX_SAFARI_STACK_REGEXP","CHROME_IE_STACK_REGEXP","SAFARI_NATIVE_CODE_REGEXP","parse","error","stacktrace","this","parseOpera","stack","match","parseV8OrIE","parseFFOrSafari","Error","extractLocation","urlLike","indexOf","parts","exec","replace","undefined","split","filter","line","map","sanitizedLine","location","locationParts","functionName","fileName","lineNumber","columnNumber","source","functionNameRegex","matches","e","message","length","parseOpera9","parseOpera11","parseOpera10","lineRE","lines","result","i","len","push","argsRaw","tokens","pop","functionCall","shift","args","backtrace","opts","maxStackSize","curr","arguments","callee","Array","test","toString","RegExp","$1","caller","SourceMap","_xdr","url","Promise","resolve","reject","req","XMLHttpRequest","open","onerror","onreadystatechange","readyState","status","substr","responseText","send","_atob","b64str","window","atob","_parseJson","string","JSON","_findFunctionName","syntaxes","code","maxLines","Math","min","commentPos","index","m","_ensureSupportedEnvironment","Object","defineProperty","create","_ensureStackFrameIsLegit","stackframe","TypeError","_findSourceMappingURL","lastSourceMappingUrl","matchSourceMappingUrl","sourceMappingUrlRegExp","_extractLocationInfoFromSourceMapSource","sourceMapConsumer","sourceCache","loc","originalPositionFor","column","mappedSource","sourceContentFor","name","StackTraceGPS","sourceMapConsumerCache","ajax","_get","isDataUrl","offline","supportedEncodingRegexp","sourceMapStart","encodedSource","xhrPromise","method","then","bind","_getSourceMapConsumer","sourceMappingURL","defaultSourceRoot","sourceMapConsumerPromise","sourceMapSource","sourceRoot","SourceMapConsumer","catch","pinpoint","getMappedLocation","mappedStackFrame","resolveMappedStackFrame","findFunctionName","guessedFunctionName","substring","lastIndexOf","exports","SourceMapGenerator","SourceNode","intToCharMap","encode","number","decode","charCode","util","MappingList","_array","_sorted","_last","generatedLine","generatedColumn","prototype","unsortedForEach","aCallback","aThisArg","forEach","add","aMapping","mappingA","mappingB","lineA","lineB","columnA","columnB","compareByGeneratedPositionsInflated","toArray","sort","binarySearch","ArraySet","base64VLQ","quickSort","aSourceMap","sourceMap","sections","IndexedSourceMapConsumer","BasicSourceMapConsumer","version","getArg","sources","names","sourcesContent","mappings","file","_version","String","normalize","isAbsolute","relative","_names","fromArray","_sources","_mappings","Mapping","originalLine","originalColumn","lastOffset","_sections","s","offset","offsetLine","offsetColumn","generatedOffset","consumer","fromSourceMap","__generatedMappings","get","_parseMappings","__originalMappings","_charIsMappingSeparator","aStr","c","charAt","aSourceRoot","GENERATED_ORDER","ORIGINAL_ORDER","GREATEST_LOWER_BOUND","LEAST_UPPER_BOUND","eachMapping","aContext","aOrder","context","_generatedMappings","_originalMappings","mapping","at","join","allGeneratedPositionsFor","aArgs","needle","has","_findMapping","compareByOriginalPositions","lastColumn","smc","_sourceRoot","_generateSourcesContent","_file","generatedMappings","slice","destGeneratedMappings","destOriginalMappings","srcMapping","destMapping","str","segment","end","value","previousGeneratedColumn","previousOriginalLine","previousOriginalColumn","previousSource","previousName","cachedSegments","temp","originalMappings","rest","compareByGeneratedPositionsDeflated","aNeedle","aMappings","aLineName","aColumnName","aComparator","aBias","search","computeColumnSpans","nextMapping","lastGeneratedColumn","Infinity","hasContentsOfAllSources","size","some","sc","aSource","nullOnMissing","urlParse","fileUriAbsPath","scheme","path","generatedPositionFor","constructor","j","sectionIndex","section","cmp","bias","every","content","generatedPosition","sectionMappings","adjustedMapping","recursiveSearch","aLow","aHigh","aHaystack","aCompare","mid","floor","swap","ary","x","y","doQuickSort","comparator","p","r","low","high","round","random","pivot","q","REGEX_NEWLINE","isSourceNode","aLine","aColumn","aChunks","aName","children","sourceContents","fromStringWithSourceMap","aGeneratedCode","aSourceMapConsumer","aRelativePath","node","remainingLines","shiftNextLine","lastGeneratedLine","lastMapping","nextLine","addMappingWithCode","sourceFile","setSourceContent","aChunk","isArray","chunk","prepend","unshift","walk","aFn","aSep","newChildren","replaceRight","aPattern","aReplacement","lastChild","aSourceFile","aSourceContent","toSetString","walkSourceContents","keys","fromSetString","toStringWithSourceMap","generated","sourceMappingActive","lastOriginalSource","lastOriginalLine","lastOriginalColumn","lastOriginalName","original","addMapping","idx","charCodeAt","sourceContent","ErrorBoundary","PureComponent","_defineProperty","hasError","errorMessage","stackTrace","mappedStackTrace","componentStack","state","textarea","document","createElement","contents","textContent","style","position","body","appendChild","select","execCommand","removeChild","setState","copied","setTimeout","componentDidCatch","info","StackTrace","fromError","stackframes","sf","render","props","likelyBrowserAddonIssue","includes","_jsx","className","FormattedMessage","id","defaultMessage","href","source_url","rel","target","onClick","handleCopyStackTrace","Helmet","INTRODUCTION_VERSION","messages","defineMessages","close","Header","ImmutablePureComponent","account","statusId","onClose","intl","Link","to","Avatar","DisplayName","IconButton","icon","iconComponent","CloseIcon","title","formatMessage","accountId","PropTypes","isRequired","ImmutablePropTypes","record","func","object","connect","mapStateToProps","_ref","getIn","injectIntl","PictureInPicture","Component","dispatch","removePictureInPicture","type","src","currentTime","player","Video","volume","muted","autoPlay","inline","alwaysVisible","Audio","poster","backgroundColor","foregroundColor","accentColor","handleClose","Footer","WordmarkLogo","viewBox","role","xlinkHref","SymbolLogo","logo","alt","Account","me","componentDidMount","dispatchServer","signedIn","identity","openClosedRegistrationsModal","signupUrl","_jsxs","_Fragment","pathname","Icon","SearchIcon","sso_redirect","signupButton","registrationsOpen","withRouter","openModal","modalType","fetchServer","UploadArea","keyCode","active","preventDefault","stopPropagation","addEventListener","handleKeyUp","componentWillUnmount","removeEventListener","Motion","defaultStyle","backgroundOpacity","backgroundScale","spring","stiffness","damping","visibility","opacity","transform","ColumnLoading","otherProps","_jsx2","Column","ColumnHeader","aboutActiveUsers","ServerBanner","server","isLoading","values","domain","mastodon","ServerHeroImage","blurhash","Skeleton","width","minimal","ShortNumber","ComposePanel","changeComposing","mountCompose","unmountCompose","onFocus","SearchContainer","openInRoute","NavigationContainer","onBlur","ComposeFormContainer","singleColumn","LinkFooter","DrawerLoading","lastStatusAt","empty","FeaturedTags","featuredTags","isEmpty","dangerouslySetInnerHTML","__html","take","featuredTag","Hashtag","uses","withGraph","description","date","formatDate","month","day","list","tagged","getAccount","makeGetAccount","ImmutableList","AccountNavigation","params","acct","normalizeForLookup","DefaultNavigation","showTrends","Trends","NavigationPortal","Switch","Route","exact","component","logoutMessage","logoutConfirm","DisabledAccountBanner","onLogout","disabledAcct","movedToAcct","disabledAccountLink","disabledAccount","movedToAccount","handleLogOutClick","disabledAccountId","movedToAccountId","mapDispatchToProps","modalProps","confirm","closeWhenConfirm","onConfirm","logOut","text","FollowRequestsColumnLink","fetchFollowRequests","count","ColumnLink","transparent","IconWithBadge","PersonAddIcon","getOrderedLists","createSelector","lists","toList","item","a","b","localeCompare","ListPanel","fetchLists","ListAltIcon","strict","NotificationsIcon","SignInBanner","useAppDispatch","useCallback","useAppSelector","home","notifications","explore","firehose","direct","favourites","bookmarks","preferences","followsAndFollowers","about","advancedInterface","openedInClassicInterface","NavigationPanel","startsWith","banner","transientSingleColumn","class","HomeIcon","NotificationsCounterIcon","trendsEnabled","TagIcon","timelinePreview","isActive","isFirehoseActive","PublicIcon","AlternateEmailIcon","BookmarksIcon","StarIcon","SettingsIcon","MoreHorizIcon","componentMap","Compose","HomeTimeline","Notifications","PublicTimeline","CommunityTimeline","HashtagTimeline","DirectTimeline","FavouritedStatuses","BookmarkedStatuses","ListTimeline","Directory","TabsBarPortal","setTabsBarElement","useColumnsContext","setRef","element","ref","ColumnsArea","matchMedia","renderComposePanel","mediaQuery","_interruptScrollAnimation","columnId","multiColumn","BundleColumnError","errorType","handleWheel","supportsPassiveEvents","passive","handleLayoutChange","addListener","isRtlLayout","getElementsByTagName","classList","contains","UNSAFE_componentWillUpdate","nextProps","componentDidUpdate","prevProps","removeListener","handleChildrenContentChange","modifier","scrollRight","scrollWidth","innerWidth","columns","isModalOpen","toJS","other","BundleContainer","fetchComponent","loading","renderLoading","renderError","SpecificComponent","Children","child","cloneElement","bool","forwardRef","WrappedSwitch","useLocation","decklessLocation","WrappedRoute","_ref2","componentParams","getDerivedStateFromError","frame","err","console","renderComponent","beforeUnload","keyMap","help","new","forceNew","toggleComposeSpoilers","focusColumn","reply","favourite","boost","mention","openProfile","moveDown","moveUp","back","goToHome","goToNotifications","goToLocal","goToFederated","goToDirect","goToStart","goToFavourites","goToPinned","goToProfile","goToBlocked","goToMuted","goToRequests","toggleHidden","toggleSensitive","openMedia","SwitchingColumnsArea","UNSAFE_componentWillMount","toggle","pathName","redirect","Redirect","from","singleUserMode","owner","initialState","accounts","username","trendsAsLanding","ColumnsContextProvider","ColumnsAreaContainer","GettingStarted","KeyboardShortcuts","About","PrivacyPolicy","Firehose","feedType","PinnedStatuses","Onboarding","Explore","AccountTimeline","withReplies","Followers","Following","AccountGallery","Status","Reblogs","Favourites","FollowRequests","Blocks","DomainBlocks","FollowedTags","Mutes","Lists","UI","draggingOver","isComposing","hasComposingText","hasMediaAttachments","synchronouslySubmitMarkers","returnValue","focusApp","submitMarkers","immediate","unfocusApp","dragTargets","dataTransfer","types","canUploadMore","dataTransferIsText","dropEffect","files","uploadCompose","el","data","history","warn","_debounce","clearHeight","trailing","layout","layoutFromWindow","cancel","changeLayout","querySelector","focus","handleHotkeyNew","resetCompose","changeComposeSpoilerness","key","container","scrollTop","offsetTop","scrollIntoView","_history$location","fromMastodon","goBack","hotkeys","handleWindowFocus","handleWindowBlur","handleBeforeUnload","handleResize","handleDragEnter","handleDragOver","handleDrop","handleDragLeave","handleDragEnd","navigator","serviceWorker","handleServiceWorkerPostMessage","fetchMarkers","expandHomeTimeline","expandNotifications","fetchServerTranslationLanguages","__mousetrap__","stopCallback","tagName","dropdownMenuIsOpen","handlers","handleHotkeyToggleHelp","handleHotkeySearch","handleHotkeyForceNew","handleHotkeyToggleComposeSpoilers","handleHotkeyFocusColumn","handleHotkeyBack","handleHotkeyGoToHome","handleHotkeyGoToNotifications","handleHotkeyGoToLocal","handleHotkeyGoToFederated","handleHotkeyGoToDirect","handleHotkeyGoToStart","handleHotkeyGoToFavourites","handleHotkeyGoToPinned","handleHotkeyGoToProfile","handleHotkeyGoToBlocked","handleHotkeyGoToMuted","handleHotkeyGoToRequests","HotKeys","setHotkeysRef","attach","focused","classNames","pointerEvents","NotificationsContainer","LoadingBarContainer","ModalContainer","closeUploadModal","trim","dropdownMenu","openId","firstLaunch","isProduction","siteTitle","hydrateAction","hydrateStore","store","meta","fetchCustomEmojis","Mastodon","disabled_account_id","accessToken","access_token","permissions","getChildContext","disconnect","connectUserStream","shouldUpdateScroll","prevRouterProps","_location$state","_location$state2","_prevRouterProps$loca","mastodonModalKey","IntlProvider","ReduxProvider","Router","ScrollContext","defaultTitle","titleTemplate","shape","mark","stop","perf","performance","now","Date","throwIfEmpty","measure","getEntriesByName","getEntriesByType","clearMarks","clearMeasures","entries","marks","startTime","endTime","entry","duration","entryType","arr","splice","insertSorted","isDevelopment","setResourceTimingBufferSize","main","marky","ready","async","mountNode","getElementById","getAttribute","createRoot","setupBrowserNotifications","Workbox","wb","registration","register","Notification","permission","registerPushNotifications","start","loadPolyfills","loadLocale","aDefaultValue","urlRegexp","dataUrlRegexp","aUrl","auth","host","port","urlGenerate","aParsedUrl","aPath","part","up","aRoot","aPathUrl","aRootUrl","joined","level","supportsNullProto","isProtoString","strcmp","aStr1","aStr2","onlyCompareOriginal","onlyCompareGenerated","ErrorStackParser","StackGenerator","_options","_generateError","_merge","first","second","obj","prop","hasOwnProperty","call","_isShapedLikeParsableError","_filtered","generateArtificially","getSync","gps","all","resolveOriginal","stackFrames","instrument","fn","callback","errback","thisArg","__stacktraceOriginalFn","instrumented","apply","deinstrument","report","errorMsg","requestOptions","setRequestHeader","headers","header","reportPayload","stringify","_isNumber","n","isNaN","parseFloat","isFinite","_capitalize","toUpperCase","_getter","booleanProps","numericProps","stringProps","arrayProps","objectProps","concat","getArgs","setArgs","v","getEvalOrigin","evalOrigin","setEvalOrigin","getFileName","getLineNumber","getColumnNumber","getFunctionName","getIsEval","fromString","argsStartIndex","argsEndIndex","locationString","Boolean","Number","k","_skipValidation","_sourcesContents","generator","newMapping","_validateMapping","applySourceMap","aSourceMapPath","newSources","newNames","aGenerated","aOriginal","_serializeMappings","next","nameIdx","sourceIdx","previousGeneratedLine","aSources","toJSON","base64","aValue","digit","encoded","vlq","toVLQSigned","VLQ_BASE","aIndex","aOutParam","continuation","shifted","strLen","_set","aArray","aAllowDuplicates","set","getOwnPropertyNames","sStr","isDuplicate","aIdx"],"mappings":"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","file":"js/application-469bb8c4f14eef2b3ce6.chunk.js","sourcesContent":["(function(root, factory) {\n    'use strict';\n    // Universal Module Definition (UMD) to support AMD, CommonJS/Node.js, Rhino, and browsers.\n\n    /* istanbul ignore next */\n    if (typeof define === 'function' && define.amd) {\n        define('error-stack-parser', ['stackframe'], factory);\n    } else if (typeof exports === 'object') {\n        module.exports = factory(require('stackframe'));\n    } else {\n        root.ErrorStackParser = factory(root.StackFrame);\n    }\n}(this, function ErrorStackParser(StackFrame) {\n    'use strict';\n\n    var FIREFOX_SAFARI_STACK_REGEXP = /(^|@)\\S+:\\d+/;\n    var CHROME_IE_STACK_REGEXP = /^\\s*at .*(\\S+:\\d+|\\(native\\))/m;\n    var SAFARI_NATIVE_CODE_REGEXP = /^(eval@)?(\\[native code])?$/;\n\n    return {\n        /**\n         * Given an Error object, extract the most information from it.\n         *\n         * @param {Error} error object\n         * @return {Array} of StackFrames\n         */\n        parse: function ErrorStackParser$$parse(error) {\n            if (typeof error.stacktrace !== 'undefined' || typeof error['opera#sourceloc'] !== 'undefined') {\n                return this.parseOpera(error);\n            } else if (error.stack && error.stack.match(CHROME_IE_STACK_REGEXP)) {\n                return this.parseV8OrIE(error);\n            } else if (error.stack) {\n                return this.parseFFOrSafari(error);\n            } else {\n                throw new Error('Cannot parse given Error object');\n            }\n        },\n\n        // Separate line and column numbers from a string of the form: (URI:Line:Column)\n        extractLocation: function ErrorStackParser$$extractLocation(urlLike) {\n            // Fail-fast but return locations like \"(native)\"\n            if (urlLike.indexOf(':') === -1) {\n                return [urlLike];\n            }\n\n            var regExp = /(.+?)(?::(\\d+))?(?::(\\d+))?$/;\n            var parts = regExp.exec(urlLike.replace(/[()]/g, ''));\n            return [parts[1], parts[2] || undefined, parts[3] || undefined];\n        },\n\n        parseV8OrIE: function ErrorStackParser$$parseV8OrIE(error) {\n            var filtered = error.stack.split('\\n').filter(function(line) {\n                return !!line.match(CHROME_IE_STACK_REGEXP);\n            }, this);\n\n            return filtered.map(function(line) {\n                if (line.indexOf('(eval ') > -1) {\n                    // Throw away eval information until we implement stacktrace.js/stackframe#8\n                    line = line.replace(/eval code/g, 'eval').replace(/(\\(eval at [^()]*)|(,.*$)/g, '');\n                }\n                var sanitizedLine = line.replace(/^\\s+/, '').replace(/\\(eval code/g, '(').replace(/^.*?\\s+/, '');\n\n                // capture and preseve the parenthesized location \"(/foo/my bar.js:12:87)\" in\n                // case it has spaces in it, as the string is split on \\s+ later on\n                var location = sanitizedLine.match(/ (\\(.+\\)$)/);\n\n                // remove the parenthesized location from the line, if it was matched\n                sanitizedLine = location ? sanitizedLine.replace(location[0], '') : sanitizedLine;\n\n                // if a location was matched, pass it to extractLocation() otherwise pass all sanitizedLine\n                // because this line doesn't have function name\n                var locationParts = this.extractLocation(location ? location[1] : sanitizedLine);\n                var functionName = location && sanitizedLine || undefined;\n                var fileName = ['eval', '<anonymous>'].indexOf(locationParts[0]) > -1 ? undefined : locationParts[0];\n\n                return new StackFrame({\n                    functionName: functionName,\n                    fileName: fileName,\n                    lineNumber: locationParts[1],\n                    columnNumber: locationParts[2],\n                    source: line\n                });\n            }, this);\n        },\n\n        parseFFOrSafari: function ErrorStackParser$$parseFFOrSafari(error) {\n            var filtered = error.stack.split('\\n').filter(function(line) {\n                return !line.match(SAFARI_NATIVE_CODE_REGEXP);\n            }, this);\n\n            return filtered.map(function(line) {\n                // Throw away eval information until we implement stacktrace.js/stackframe#8\n                if (line.indexOf(' > eval') > -1) {\n                    line = line.replace(/ line (\\d+)(?: > eval line \\d+)* > eval:\\d+:\\d+/g, ':$1');\n                }\n\n                if (line.indexOf('@') === -1 && line.indexOf(':') === -1) {\n                    // Safari eval frames only have function names and nothing else\n                    return new StackFrame({\n                        functionName: line\n                    });\n                } else {\n                    var functionNameRegex = /((.*\".+\"[^@]*)?[^@]*)(?:@)/;\n                    var matches = line.match(functionNameRegex);\n                    var functionName = matches && matches[1] ? matches[1] : undefined;\n                    var locationParts = this.extractLocation(line.replace(functionNameRegex, ''));\n\n                    return new StackFrame({\n                        functionName: functionName,\n                        fileName: locationParts[0],\n                        lineNumber: locationParts[1],\n                        columnNumber: locationParts[2],\n                        source: line\n                    });\n                }\n            }, this);\n        },\n\n        parseOpera: function ErrorStackParser$$parseOpera(e) {\n            if (!e.stacktrace || (e.message.indexOf('\\n') > -1 &&\n                e.message.split('\\n').length > e.stacktrace.split('\\n').length)) {\n                return this.parseOpera9(e);\n            } else if (!e.stack) {\n                return this.parseOpera10(e);\n            } else {\n                return this.parseOpera11(e);\n            }\n        },\n\n        parseOpera9: function ErrorStackParser$$parseOpera9(e) {\n            var lineRE = /Line (\\d+).*script (?:in )?(\\S+)/i;\n            var lines = e.message.split('\\n');\n            var result = [];\n\n            for (var i = 2, len = lines.length; i < len; i += 2) {\n                var match = lineRE.exec(lines[i]);\n                if (match) {\n                    result.push(new StackFrame({\n                        fileName: match[2],\n                        lineNumber: match[1],\n                        source: lines[i]\n                    }));\n                }\n            }\n\n            return result;\n        },\n\n        parseOpera10: function ErrorStackParser$$parseOpera10(e) {\n            var lineRE = /Line (\\d+).*script (?:in )?(\\S+)(?:: In function (\\S+))?$/i;\n            var lines = e.stacktrace.split('\\n');\n            var result = [];\n\n            for (var i = 0, len = lines.length; i < len; i += 2) {\n                var match = lineRE.exec(lines[i]);\n                if (match) {\n                    result.push(\n                        new StackFrame({\n                            functionName: match[3] || undefined,\n                            fileName: match[2],\n                            lineNumber: match[1],\n                            source: lines[i]\n                        })\n                    );\n                }\n            }\n\n            return result;\n        },\n\n        // Opera 10.65+ Error.stack very similar to FF/Safari\n        parseOpera11: function ErrorStackParser$$parseOpera11(error) {\n            var filtered = error.stack.split('\\n').filter(function(line) {\n                return !!line.match(FIREFOX_SAFARI_STACK_REGEXP) && !line.match(/^Error created at/);\n            }, this);\n\n            return filtered.map(function(line) {\n                var tokens = line.split('@');\n                var locationParts = this.extractLocation(tokens.pop());\n                var functionCall = (tokens.shift() || '');\n                var functionName = functionCall\n                    .replace(/<anonymous function(: (\\w+))?>/, '$2')\n                    .replace(/\\([^)]*\\)/g, '') || undefined;\n                var argsRaw;\n                if (functionCall.match(/\\(([^)]*)\\)/)) {\n                    argsRaw = functionCall.replace(/^[^(]+\\(([^)]*)\\)$/, '$1');\n                }\n                var args = (argsRaw === undefined || argsRaw === '[arguments not available]') ?\n                    undefined : argsRaw.split(',');\n\n                return new StackFrame({\n                    functionName: functionName,\n                    args: args,\n                    fileName: locationParts[0],\n                    lineNumber: locationParts[1],\n                    columnNumber: locationParts[2],\n                    source: line\n                });\n            }, this);\n        }\n    };\n}));\n","(function(root, factory) {\n    'use strict';\n    // Universal Module Definition (UMD) to support AMD, CommonJS/Node.js, Rhino, and browsers.\n\n    /* istanbul ignore next */\n    if (typeof define === 'function' && define.amd) {\n        define('stack-generator', ['stackframe'], factory);\n    } else if (typeof exports === 'object') {\n        module.exports = factory(require('stackframe'));\n    } else {\n        root.StackGenerator = factory(root.StackFrame);\n    }\n}(this, function(StackFrame) {\n    return {\n        backtrace: function StackGenerator$$backtrace(opts) {\n            var stack = [];\n            var maxStackSize = 10;\n\n            if (typeof opts === 'object' && typeof opts.maxStackSize === 'number') {\n                maxStackSize = opts.maxStackSize;\n            }\n\n            var curr = arguments.callee;\n            while (curr && stack.length < maxStackSize && curr['arguments']) {\n                // Allow V8 optimizations\n                var args = new Array(curr['arguments'].length);\n                for (var i = 0; i < args.length; ++i) {\n                    args[i] = curr['arguments'][i];\n                }\n                if (/function(?:\\s+([\\w$]+))+\\s*\\(/.test(curr.toString())) {\n                    stack.push(new StackFrame({functionName: RegExp.$1 || undefined, args: args}));\n                } else {\n                    stack.push(new StackFrame({args: args}));\n                }\n\n                try {\n                    curr = curr.caller;\n                } catch (e) {\n                    break;\n                }\n            }\n            return stack;\n        }\n    };\n}));\n","(function(root, factory) {\n    'use strict';\n    // Universal Module Definition (UMD) to support AMD, CommonJS/Node.js, Rhino, and browsers.\n\n    /* istanbul ignore next */\n    if (typeof define === 'function' && define.amd) {\n        define('stacktrace-gps', ['source-map', 'stackframe'], factory);\n    } else if (typeof exports === 'object') {\n        module.exports = factory(require('source-map/lib/source-map-consumer'), require('stackframe'));\n    } else {\n        root.StackTraceGPS = factory(root.SourceMap || root.sourceMap, root.StackFrame);\n    }\n}(this, function(SourceMap, StackFrame) {\n    'use strict';\n\n    /**\n     * Make a X-Domain request to url and callback.\n     *\n     * @param {String} url\n     * @returns {Promise} with response text if fulfilled\n     */\n    function _xdr(url) {\n        return new Promise(function(resolve, reject) {\n            var req = new XMLHttpRequest();\n            req.open('get', url);\n            req.onerror = reject;\n            req.onreadystatechange = function onreadystatechange() {\n                if (req.readyState === 4) {\n                    if ((req.status >= 200 && req.status < 300) ||\n                        (url.substr(0, 7) === 'file://' && req.responseText)) {\n                        resolve(req.responseText);\n                    } else {\n                        reject(new Error('HTTP status: ' + req.status + ' retrieving ' + url));\n                    }\n                }\n            };\n            req.send();\n        });\n\n    }\n\n    /**\n     * Convert a Base64-encoded string into its original representation.\n     * Used for inline sourcemaps.\n     *\n     * @param {String} b64str Base-64 encoded string\n     * @returns {String} original representation of the base64-encoded string.\n     */\n    function _atob(b64str) {\n        if (typeof window !== 'undefined' && window.atob) {\n            return window.atob(b64str);\n        } else {\n            throw new Error('You must supply a polyfill for window.atob in this environment');\n        }\n    }\n\n    function _parseJson(string) {\n        if (typeof JSON !== 'undefined' && JSON.parse) {\n            return JSON.parse(string);\n        } else {\n            throw new Error('You must supply a polyfill for JSON.parse in this environment');\n        }\n    }\n\n    function _findFunctionName(source, lineNumber/*, columnNumber*/) {\n        var syntaxes = [\n            // {name} = function ({args}) TODO args capture\n            /['\"]?([$_A-Za-z][$_A-Za-z0-9]*)['\"]?\\s*[:=]\\s*function\\b/,\n            // function {name}({args}) m[1]=name m[2]=args\n            /function\\s+([^('\"`]*?)\\s*\\(([^)]*)\\)/,\n            // {name} = eval()\n            /['\"]?([$_A-Za-z][$_A-Za-z0-9]*)['\"]?\\s*[:=]\\s*(?:eval|new Function)\\b/,\n            // fn_name() {\n            /\\b(?!(?:if|for|switch|while|with|catch)\\b)(?:(?:static)\\s+)?(\\S+)\\s*\\(.*?\\)\\s*\\{/,\n            // {name} = () => {\n            /['\"]?([$_A-Za-z][$_A-Za-z0-9]*)['\"]?\\s*[:=]\\s*\\(.*?\\)\\s*=>/\n        ];\n        var lines = source.split('\\n');\n\n        // Walk backwards in the source lines until we find the line which matches one of the patterns above\n        var code = '';\n        var maxLines = Math.min(lineNumber, 20);\n        for (var i = 0; i < maxLines; ++i) {\n            // lineNo is 1-based, source[] is 0-based\n            var line = lines[lineNumber - i - 1];\n            var commentPos = line.indexOf('//');\n            if (commentPos >= 0) {\n                line = line.substr(0, commentPos);\n            }\n\n            if (line) {\n                code = line + code;\n                var len = syntaxes.length;\n                for (var index = 0; index < len; index++) {\n                    var m = syntaxes[index].exec(code);\n                    if (m && m[1]) {\n                        return m[1];\n                    }\n                }\n            }\n        }\n        return undefined;\n    }\n\n    function _ensureSupportedEnvironment() {\n        if (typeof Object.defineProperty !== 'function' || typeof Object.create !== 'function') {\n            throw new Error('Unable to consume source maps in older browsers');\n        }\n    }\n\n    function _ensureStackFrameIsLegit(stackframe) {\n        if (typeof stackframe !== 'object') {\n            throw new TypeError('Given StackFrame is not an object');\n        } else if (typeof stackframe.fileName !== 'string') {\n            throw new TypeError('Given file name is not a String');\n        } else if (typeof stackframe.lineNumber !== 'number' ||\n            stackframe.lineNumber % 1 !== 0 ||\n            stackframe.lineNumber < 1) {\n            throw new TypeError('Given line number must be a positive integer');\n        } else if (typeof stackframe.columnNumber !== 'number' ||\n            stackframe.columnNumber % 1 !== 0 ||\n            stackframe.columnNumber < 0) {\n            throw new TypeError('Given column number must be a non-negative integer');\n        }\n        return true;\n    }\n\n    function _findSourceMappingURL(source) {\n        var sourceMappingUrlRegExp = /\\/\\/[#@] ?sourceMappingURL=([^\\s'\"]+)\\s*$/mg;\n        var lastSourceMappingUrl;\n        var matchSourceMappingUrl;\n        // eslint-disable-next-line no-cond-assign\n        while (matchSourceMappingUrl = sourceMappingUrlRegExp.exec(source)) {\n            lastSourceMappingUrl = matchSourceMappingUrl[1];\n        }\n        if (lastSourceMappingUrl) {\n            return lastSourceMappingUrl;\n        } else {\n            throw new Error('sourceMappingURL not found');\n        }\n    }\n\n    function _extractLocationInfoFromSourceMapSource(stackframe, sourceMapConsumer, sourceCache) {\n        return new Promise(function(resolve, reject) {\n            var loc = sourceMapConsumer.originalPositionFor({\n                line: stackframe.lineNumber,\n                column: stackframe.columnNumber\n            });\n\n            if (loc.source) {\n                // cache mapped sources\n                var mappedSource = sourceMapConsumer.sourceContentFor(loc.source);\n                if (mappedSource) {\n                    sourceCache[loc.source] = mappedSource;\n                }\n\n                resolve(\n                    // given stackframe and source location, update stackframe\n                    new StackFrame({\n                        functionName: loc.name || stackframe.functionName,\n                        args: stackframe.args,\n                        fileName: loc.source,\n                        lineNumber: loc.line,\n                        columnNumber: loc.column\n                    }));\n            } else {\n                reject(new Error('Could not get original source for given stackframe and source map'));\n            }\n        });\n    }\n\n    /**\n     * @constructor\n     * @param {Object} opts\n     *      opts.sourceCache = {url: \"Source String\"} => preload source cache\n     *      opts.sourceMapConsumerCache = {/path/file.js.map: SourceMapConsumer}\n     *      opts.offline = True to prevent network requests.\n     *              Best effort without sources or source maps.\n     *      opts.ajax = Promise returning function to make X-Domain requests\n     */\n    return function StackTraceGPS(opts) {\n        if (!(this instanceof StackTraceGPS)) {\n            return new StackTraceGPS(opts);\n        }\n        opts = opts || {};\n\n        this.sourceCache = opts.sourceCache || {};\n        this.sourceMapConsumerCache = opts.sourceMapConsumerCache || {};\n\n        this.ajax = opts.ajax || _xdr;\n\n        this._atob = opts.atob || _atob;\n\n        this._get = function _get(location) {\n            return new Promise(function(resolve, reject) {\n                var isDataUrl = location.substr(0, 5) === 'data:';\n                if (this.sourceCache[location]) {\n                    resolve(this.sourceCache[location]);\n                } else if (opts.offline && !isDataUrl) {\n                    reject(new Error('Cannot make network requests in offline mode'));\n                } else {\n                    if (isDataUrl) {\n                        // data URLs can have parameters.\n                        // see http://tools.ietf.org/html/rfc2397\n                        var supportedEncodingRegexp =\n                            /^data:application\\/json;([\\w=:\"-]+;)*base64,/;\n                        var match = location.match(supportedEncodingRegexp);\n                        if (match) {\n                            var sourceMapStart = match[0].length;\n                            var encodedSource = location.substr(sourceMapStart);\n                            var source = this._atob(encodedSource);\n                            this.sourceCache[location] = source;\n                            resolve(source);\n                        } else {\n                            reject(new Error('The encoding of the inline sourcemap is not supported'));\n                        }\n                    } else {\n                        var xhrPromise = this.ajax(location, {method: 'get'});\n                        // Cache the Promise to prevent duplicate in-flight requests\n                        this.sourceCache[location] = xhrPromise;\n                        xhrPromise.then(resolve, reject);\n                    }\n                }\n            }.bind(this));\n        };\n\n        /**\n         * Creating SourceMapConsumers is expensive, so this wraps the creation of a\n         * SourceMapConsumer in a per-instance cache.\n         *\n         * @param {String} sourceMappingURL = URL to fetch source map from\n         * @param {String} defaultSourceRoot = Default source root for source map if undefined\n         * @returns {Promise} that resolves a SourceMapConsumer\n         */\n        this._getSourceMapConsumer = function _getSourceMapConsumer(sourceMappingURL, defaultSourceRoot) {\n            return new Promise(function(resolve) {\n                if (this.sourceMapConsumerCache[sourceMappingURL]) {\n                    resolve(this.sourceMapConsumerCache[sourceMappingURL]);\n                } else {\n                    var sourceMapConsumerPromise = new Promise(function(resolve, reject) {\n                        return this._get(sourceMappingURL).then(function(sourceMapSource) {\n                            if (typeof sourceMapSource === 'string') {\n                                sourceMapSource = _parseJson(sourceMapSource.replace(/^\\)\\]\\}'/, ''));\n                            }\n                            if (typeof sourceMapSource.sourceRoot === 'undefined') {\n                                sourceMapSource.sourceRoot = defaultSourceRoot;\n                            }\n\n                            resolve(new SourceMap.SourceMapConsumer(sourceMapSource));\n                        }).catch(reject);\n                    }.bind(this));\n                    this.sourceMapConsumerCache[sourceMappingURL] = sourceMapConsumerPromise;\n                    resolve(sourceMapConsumerPromise);\n                }\n            }.bind(this));\n        };\n\n        /**\n         * Given a StackFrame, enhance function name and use source maps for a\n         * better StackFrame.\n         *\n         * @param {StackFrame} stackframe object\n         * @returns {Promise} that resolves with with source-mapped StackFrame\n         */\n        this.pinpoint = function StackTraceGPS$$pinpoint(stackframe) {\n            return new Promise(function(resolve, reject) {\n                this.getMappedLocation(stackframe).then(function(mappedStackFrame) {\n                    function resolveMappedStackFrame() {\n                        resolve(mappedStackFrame);\n                    }\n\n                    this.findFunctionName(mappedStackFrame)\n                        .then(resolve, resolveMappedStackFrame)\n                        // eslint-disable-next-line no-unexpected-multiline\n                        ['catch'](resolveMappedStackFrame);\n                }.bind(this), reject);\n            }.bind(this));\n        };\n\n        /**\n         * Given a StackFrame, guess function name from location information.\n         *\n         * @param {StackFrame} stackframe\n         * @returns {Promise} that resolves with enhanced StackFrame.\n         */\n        this.findFunctionName = function StackTraceGPS$$findFunctionName(stackframe) {\n            return new Promise(function(resolve, reject) {\n                _ensureStackFrameIsLegit(stackframe);\n                this._get(stackframe.fileName).then(function getSourceCallback(source) {\n                    var lineNumber = stackframe.lineNumber;\n                    var columnNumber = stackframe.columnNumber;\n                    var guessedFunctionName = _findFunctionName(source, lineNumber, columnNumber);\n                    // Only replace functionName if we found something\n                    if (guessedFunctionName) {\n                        resolve(new StackFrame({\n                            functionName: guessedFunctionName,\n                            args: stackframe.args,\n                            fileName: stackframe.fileName,\n                            lineNumber: lineNumber,\n                            columnNumber: columnNumber\n                        }));\n                    } else {\n                        resolve(stackframe);\n                    }\n                }, reject)['catch'](reject);\n            }.bind(this));\n        };\n\n        /**\n         * Given a StackFrame, seek source-mapped location and return new enhanced StackFrame.\n         *\n         * @param {StackFrame} stackframe\n         * @returns {Promise} that resolves with enhanced StackFrame.\n         */\n        this.getMappedLocation = function StackTraceGPS$$getMappedLocation(stackframe) {\n            return new Promise(function(resolve, reject) {\n                _ensureSupportedEnvironment();\n                _ensureStackFrameIsLegit(stackframe);\n\n                var sourceCache = this.sourceCache;\n                var fileName = stackframe.fileName;\n                this._get(fileName).then(function(source) {\n                    var sourceMappingURL = _findSourceMappingURL(source);\n                    var isDataUrl = sourceMappingURL.substr(0, 5) === 'data:';\n                    var defaultSourceRoot = fileName.substring(0, fileName.lastIndexOf('/') + 1);\n\n                    if (sourceMappingURL[0] !== '/' && !isDataUrl && !(/^https?:\\/\\/|^\\/\\//i).test(sourceMappingURL)) {\n                        sourceMappingURL = defaultSourceRoot + sourceMappingURL;\n                    }\n\n                    return this._getSourceMapConsumer(sourceMappingURL, defaultSourceRoot)\n                        .then(function(sourceMapConsumer) {\n                            return _extractLocationInfoFromSourceMapSource(stackframe, sourceMapConsumer, sourceCache)\n                                .then(resolve)['catch'](function() {\n                                    resolve(stackframe);\n                                });\n                        });\n                }.bind(this), reject)['catch'](reject);\n            }.bind(this));\n        };\n    };\n}));\n","/*\n * Copyright 2009-2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE.txt or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\nexports.SourceMapGenerator = require('./lib/source-map-generator').SourceMapGenerator;\nexports.SourceMapConsumer = require('./lib/source-map-consumer').SourceMapConsumer;\nexports.SourceNode = require('./lib/source-node').SourceNode;\n","/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nvar intToCharMap = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'.split('');\n\n/**\n * Encode an integer in the range of 0 to 63 to a single base 64 digit.\n */\nexports.encode = function (number) {\n  if (0 <= number && number < intToCharMap.length) {\n    return intToCharMap[number];\n  }\n  throw new TypeError(\"Must be between 0 and 63: \" + number);\n};\n\n/**\n * Decode a single base 64 character code digit to an integer. Returns -1 on\n * failure.\n */\nexports.decode = function (charCode) {\n  var bigA = 65;     // 'A'\n  var bigZ = 90;     // 'Z'\n\n  var littleA = 97;  // 'a'\n  var littleZ = 122; // 'z'\n\n  var zero = 48;     // '0'\n  var nine = 57;     // '9'\n\n  var plus = 43;     // '+'\n  var slash = 47;    // '/'\n\n  var littleOffset = 26;\n  var numberOffset = 52;\n\n  // 0 - 25: ABCDEFGHIJKLMNOPQRSTUVWXYZ\n  if (bigA <= charCode && charCode <= bigZ) {\n    return (charCode - bigA);\n  }\n\n  // 26 - 51: abcdefghijklmnopqrstuvwxyz\n  if (littleA <= charCode && charCode <= littleZ) {\n    return (charCode - littleA + littleOffset);\n  }\n\n  // 52 - 61: 0123456789\n  if (zero <= charCode && charCode <= nine) {\n    return (charCode - zero + numberOffset);\n  }\n\n  // 62: +\n  if (charCode == plus) {\n    return 62;\n  }\n\n  // 63: /\n  if (charCode == slash) {\n    return 63;\n  }\n\n  // Invalid base64 digit.\n  return -1;\n};\n","/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2014 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nvar util = require('./util');\n\n/**\n * Determine whether mappingB is after mappingA with respect to generated\n * position.\n */\nfunction generatedPositionAfter(mappingA, mappingB) {\n  // Optimized for most common case\n  var lineA = mappingA.generatedLine;\n  var lineB = mappingB.generatedLine;\n  var columnA = mappingA.generatedColumn;\n  var columnB = mappingB.generatedColumn;\n  return lineB > lineA || lineB == lineA && columnB >= columnA ||\n         util.compareByGeneratedPositionsInflated(mappingA, mappingB) <= 0;\n}\n\n/**\n * A data structure to provide a sorted view of accumulated mappings in a\n * performance conscious manner. It trades a neglibable overhead in general\n * case for a large speedup in case of mappings being added in order.\n */\nfunction MappingList() {\n  this._array = [];\n  this._sorted = true;\n  // Serves as infimum\n  this._last = {generatedLine: -1, generatedColumn: 0};\n}\n\n/**\n * Iterate through internal items. This method takes the same arguments that\n * `Array.prototype.forEach` takes.\n *\n * NOTE: The order of the mappings is NOT guaranteed.\n */\nMappingList.prototype.unsortedForEach =\n  function MappingList_forEach(aCallback, aThisArg) {\n    this._array.forEach(aCallback, aThisArg);\n  };\n\n/**\n * Add the given source mapping.\n *\n * @param Object aMapping\n */\nMappingList.prototype.add = function MappingList_add(aMapping) {\n  if (generatedPositionAfter(this._last, aMapping)) {\n    this._last = aMapping;\n    this._array.push(aMapping);\n  } else {\n    this._sorted = false;\n    this._array.push(aMapping);\n  }\n};\n\n/**\n * Returns the flat, sorted array of mappings. The mappings are sorted by\n * generated position.\n *\n * WARNING: This method returns internal data without copying, for\n * performance. The return value must NOT be mutated, and should be treated as\n * an immutable borrow. If you want to take ownership, you must make your own\n * copy.\n */\nMappingList.prototype.toArray = function MappingList_toArray() {\n  if (!this._sorted) {\n    this._array.sort(util.compareByGeneratedPositionsInflated);\n    this._sorted = true;\n  }\n  return this._array;\n};\n\nexports.MappingList = MappingList;\n","/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nvar util = require('./util');\nvar binarySearch = require('./binary-search');\nvar ArraySet = require('./array-set').ArraySet;\nvar base64VLQ = require('./base64-vlq');\nvar quickSort = require('./quick-sort').quickSort;\n\nfunction SourceMapConsumer(aSourceMap) {\n  var sourceMap = aSourceMap;\n  if (typeof aSourceMap === 'string') {\n    sourceMap = JSON.parse(aSourceMap.replace(/^\\)\\]\\}'/, ''));\n  }\n\n  return sourceMap.sections != null\n    ? new IndexedSourceMapConsumer(sourceMap)\n    : new BasicSourceMapConsumer(sourceMap);\n}\n\nSourceMapConsumer.fromSourceMap = function(aSourceMap) {\n  return BasicSourceMapConsumer.fromSourceMap(aSourceMap);\n}\n\n/**\n * The version of the source mapping spec that we are consuming.\n */\nSourceMapConsumer.prototype._version = 3;\n\n// `__generatedMappings` and `__originalMappings` are arrays that hold the\n// parsed mapping coordinates from the source map's \"mappings\" attribute. They\n// are lazily instantiated, accessed via the `_generatedMappings` and\n// `_originalMappings` getters respectively, and we only parse the mappings\n// and create these arrays once queried for a source location. We jump through\n// these hoops because there can be many thousands of mappings, and parsing\n// them is expensive, so we only want to do it if we must.\n//\n// Each object in the arrays is of the form:\n//\n//     {\n//       generatedLine: The line number in the generated code,\n//       generatedColumn: The column number in the generated code,\n//       source: The path to the original source file that generated this\n//               chunk of code,\n//       originalLine: The line number in the original source that\n//                     corresponds to this chunk of generated code,\n//       originalColumn: The column number in the original source that\n//                       corresponds to this chunk of generated code,\n//       name: The name of the original symbol which generated this chunk of\n//             code.\n//     }\n//\n// All properties except for `generatedLine` and `generatedColumn` can be\n// `null`.\n//\n// `_generatedMappings` is ordered by the generated positions.\n//\n// `_originalMappings` is ordered by the original positions.\n\nSourceMapConsumer.prototype.__generatedMappings = null;\nObject.defineProperty(SourceMapConsumer.prototype, '_generatedMappings', {\n  get: function () {\n    if (!this.__generatedMappings) {\n      this._parseMappings(this._mappings, this.sourceRoot);\n    }\n\n    return this.__generatedMappings;\n  }\n});\n\nSourceMapConsumer.prototype.__originalMappings = null;\nObject.defineProperty(SourceMapConsumer.prototype, '_originalMappings', {\n  get: function () {\n    if (!this.__originalMappings) {\n      this._parseMappings(this._mappings, this.sourceRoot);\n    }\n\n    return this.__originalMappings;\n  }\n});\n\nSourceMapConsumer.prototype._charIsMappingSeparator =\n  function SourceMapConsumer_charIsMappingSeparator(aStr, index) {\n    var c = aStr.charAt(index);\n    return c === \";\" || c === \",\";\n  };\n\n/**\n * Parse the mappings in a string in to a data structure which we can easily\n * query (the ordered arrays in the `this.__generatedMappings` and\n * `this.__originalMappings` properties).\n */\nSourceMapConsumer.prototype._parseMappings =\n  function SourceMapConsumer_parseMappings(aStr, aSourceRoot) {\n    throw new Error(\"Subclasses must implement _parseMappings\");\n  };\n\nSourceMapConsumer.GENERATED_ORDER = 1;\nSourceMapConsumer.ORIGINAL_ORDER = 2;\n\nSourceMapConsumer.GREATEST_LOWER_BOUND = 1;\nSourceMapConsumer.LEAST_UPPER_BOUND = 2;\n\n/**\n * Iterate over each mapping between an original source/line/column and a\n * generated line/column in this source map.\n *\n * @param Function aCallback\n *        The function that is called with each mapping.\n * @param Object aContext\n *        Optional. If specified, this object will be the value of `this` every\n *        time that `aCallback` is called.\n * @param aOrder\n *        Either `SourceMapConsumer.GENERATED_ORDER` or\n *        `SourceMapConsumer.ORIGINAL_ORDER`. Specifies whether you want to\n *        iterate over the mappings sorted by the generated file's line/column\n *        order or the original's source/line/column order, respectively. Defaults to\n *        `SourceMapConsumer.GENERATED_ORDER`.\n */\nSourceMapConsumer.prototype.eachMapping =\n  function SourceMapConsumer_eachMapping(aCallback, aContext, aOrder) {\n    var context = aContext || null;\n    var order = aOrder || SourceMapConsumer.GENERATED_ORDER;\n\n    var mappings;\n    switch (order) {\n    case SourceMapConsumer.GENERATED_ORDER:\n      mappings = this._generatedMappings;\n      break;\n    case SourceMapConsumer.ORIGINAL_ORDER:\n      mappings = this._originalMappings;\n      break;\n    default:\n      throw new Error(\"Unknown order of iteration.\");\n    }\n\n    var sourceRoot = this.sourceRoot;\n    mappings.map(function (mapping) {\n      var source = mapping.source === null ? null : this._sources.at(mapping.source);\n      if (source != null && sourceRoot != null) {\n        source = util.join(sourceRoot, source);\n      }\n      return {\n        source: source,\n        generatedLine: mapping.generatedLine,\n        generatedColumn: mapping.generatedColumn,\n        originalLine: mapping.originalLine,\n        originalColumn: mapping.originalColumn,\n        name: mapping.name === null ? null : this._names.at(mapping.name)\n      };\n    }, this).forEach(aCallback, context);\n  };\n\n/**\n * Returns all generated line and column information for the original source,\n * line, and column provided. If no column is provided, returns all mappings\n * corresponding to a either the line we are searching for or the next\n * closest line that has any mappings. Otherwise, returns all mappings\n * corresponding to the given line and either the column we are searching for\n * or the next closest column that has any offsets.\n *\n * The only argument is an object with the following properties:\n *\n *   - source: The filename of the original source.\n *   - line: The line number in the original source.\n *   - column: Optional. the column number in the original source.\n *\n * and an array of objects is returned, each with the following properties:\n *\n *   - line: The line number in the generated source, or null.\n *   - column: The column number in the generated source, or null.\n */\nSourceMapConsumer.prototype.allGeneratedPositionsFor =\n  function SourceMapConsumer_allGeneratedPositionsFor(aArgs) {\n    var line = util.getArg(aArgs, 'line');\n\n    // When there is no exact match, BasicSourceMapConsumer.prototype._findMapping\n    // returns the index of the closest mapping less than the needle. By\n    // setting needle.originalColumn to 0, we thus find the last mapping for\n    // the given line, provided such a mapping exists.\n    var needle = {\n      source: util.getArg(aArgs, 'source'),\n      originalLine: line,\n      originalColumn: util.getArg(aArgs, 'column', 0)\n    };\n\n    if (this.sourceRoot != null) {\n      needle.source = util.relative(this.sourceRoot, needle.source);\n    }\n    if (!this._sources.has(needle.source)) {\n      return [];\n    }\n    needle.source = this._sources.indexOf(needle.source);\n\n    var mappings = [];\n\n    var index = this._findMapping(needle,\n                                  this._originalMappings,\n                                  \"originalLine\",\n                                  \"originalColumn\",\n                                  util.compareByOriginalPositions,\n                                  binarySearch.LEAST_UPPER_BOUND);\n    if (index >= 0) {\n      var mapping = this._originalMappings[index];\n\n      if (aArgs.column === undefined) {\n        var originalLine = mapping.originalLine;\n\n        // Iterate until either we run out of mappings, or we run into\n        // a mapping for a different line than the one we found. Since\n        // mappings are sorted, this is guaranteed to find all mappings for\n        // the line we found.\n        while (mapping && mapping.originalLine === originalLine) {\n          mappings.push({\n            line: util.getArg(mapping, 'generatedLine', null),\n            column: util.getArg(mapping, 'generatedColumn', null),\n            lastColumn: util.getArg(mapping, 'lastGeneratedColumn', null)\n          });\n\n          mapping = this._originalMappings[++index];\n        }\n      } else {\n        var originalColumn = mapping.originalColumn;\n\n        // Iterate until either we run out of mappings, or we run into\n        // a mapping for a different line than the one we were searching for.\n        // Since mappings are sorted, this is guaranteed to find all mappings for\n        // the line we are searching for.\n        while (mapping &&\n               mapping.originalLine === line &&\n               mapping.originalColumn == originalColumn) {\n          mappings.push({\n            line: util.getArg(mapping, 'generatedLine', null),\n            column: util.getArg(mapping, 'generatedColumn', null),\n            lastColumn: util.getArg(mapping, 'lastGeneratedColumn', null)\n          });\n\n          mapping = this._originalMappings[++index];\n        }\n      }\n    }\n\n    return mappings;\n  };\n\nexports.SourceMapConsumer = SourceMapConsumer;\n\n/**\n * A BasicSourceMapConsumer instance represents a parsed source map which we can\n * query for information about the original file positions by giving it a file\n * position in the generated source.\n *\n * The only parameter is the raw source map (either as a JSON string, or\n * already parsed to an object). According to the spec, source maps have the\n * following attributes:\n *\n *   - version: Which version of the source map spec this map is following.\n *   - sources: An array of URLs to the original source files.\n *   - names: An array of identifiers which can be referrenced by individual mappings.\n *   - sourceRoot: Optional. The URL root from which all sources are relative.\n *   - sourcesContent: Optional. An array of contents of the original source files.\n *   - mappings: A string of base64 VLQs which contain the actual mappings.\n *   - file: Optional. The generated file this source map is associated with.\n *\n * Here is an example source map, taken from the source map spec[0]:\n *\n *     {\n *       version : 3,\n *       file: \"out.js\",\n *       sourceRoot : \"\",\n *       sources: [\"foo.js\", \"bar.js\"],\n *       names: [\"src\", \"maps\", \"are\", \"fun\"],\n *       mappings: \"AA,AB;;ABCDE;\"\n *     }\n *\n * [0]: https://docs.google.com/document/d/1U1RGAehQwRypUTovF1KRlpiOFze0b-_2gc6fAH0KY0k/edit?pli=1#\n */\nfunction BasicSourceMapConsumer(aSourceMap) {\n  var sourceMap = aSourceMap;\n  if (typeof aSourceMap === 'string') {\n    sourceMap = JSON.parse(aSourceMap.replace(/^\\)\\]\\}'/, ''));\n  }\n\n  var version = util.getArg(sourceMap, 'version');\n  var sources = util.getArg(sourceMap, 'sources');\n  // Sass 3.3 leaves out the 'names' array, so we deviate from the spec (which\n  // requires the array) to play nice here.\n  var names = util.getArg(sourceMap, 'names', []);\n  var sourceRoot = util.getArg(sourceMap, 'sourceRoot', null);\n  var sourcesContent = util.getArg(sourceMap, 'sourcesContent', null);\n  var mappings = util.getArg(sourceMap, 'mappings');\n  var file = util.getArg(sourceMap, 'file', null);\n\n  // Once again, Sass deviates from the spec and supplies the version as a\n  // string rather than a number, so we use loose equality checking here.\n  if (version != this._version) {\n    throw new Error('Unsupported version: ' + version);\n  }\n\n  sources = sources\n    .map(String)\n    // Some source maps produce relative source paths like \"./foo.js\" instead of\n    // \"foo.js\".  Normalize these first so that future comparisons will succeed.\n    // See bugzil.la/1090768.\n    .map(util.normalize)\n    // Always ensure that absolute sources are internally stored relative to\n    // the source root, if the source root is absolute. Not doing this would\n    // be particularly problematic when the source root is a prefix of the\n    // source (valid, but why??). See github issue #199 and bugzil.la/1188982.\n    .map(function (source) {\n      return sourceRoot && util.isAbsolute(sourceRoot) && util.isAbsolute(source)\n        ? util.relative(sourceRoot, source)\n        : source;\n    });\n\n  // Pass `true` below to allow duplicate names and sources. While source maps\n  // are intended to be compressed and deduplicated, the TypeScript compiler\n  // sometimes generates source maps with duplicates in them. See Github issue\n  // #72 and bugzil.la/889492.\n  this._names = ArraySet.fromArray(names.map(String), true);\n  this._sources = ArraySet.fromArray(sources, true);\n\n  this.sourceRoot = sourceRoot;\n  this.sourcesContent = sourcesContent;\n  this._mappings = mappings;\n  this.file = file;\n}\n\nBasicSourceMapConsumer.prototype = Object.create(SourceMapConsumer.prototype);\nBasicSourceMapConsumer.prototype.consumer = SourceMapConsumer;\n\n/**\n * Create a BasicSourceMapConsumer from a SourceMapGenerator.\n *\n * @param SourceMapGenerator aSourceMap\n *        The source map that will be consumed.\n * @returns BasicSourceMapConsumer\n */\nBasicSourceMapConsumer.fromSourceMap =\n  function SourceMapConsumer_fromSourceMap(aSourceMap) {\n    var smc = Object.create(BasicSourceMapConsumer.prototype);\n\n    var names = smc._names = ArraySet.fromArray(aSourceMap._names.toArray(), true);\n    var sources = smc._sources = ArraySet.fromArray(aSourceMap._sources.toArray(), true);\n    smc.sourceRoot = aSourceMap._sourceRoot;\n    smc.sourcesContent = aSourceMap._generateSourcesContent(smc._sources.toArray(),\n                                                            smc.sourceRoot);\n    smc.file = aSourceMap._file;\n\n    // Because we are modifying the entries (by converting string sources and\n    // names to indices into the sources and names ArraySets), we have to make\n    // a copy of the entry or else bad things happen. Shared mutable state\n    // strikes again! See github issue #191.\n\n    var generatedMappings = aSourceMap._mappings.toArray().slice();\n    var destGeneratedMappings = smc.__generatedMappings = [];\n    var destOriginalMappings = smc.__originalMappings = [];\n\n    for (var i = 0, length = generatedMappings.length; i < length; i++) {\n      var srcMapping = generatedMappings[i];\n      var destMapping = new Mapping;\n      destMapping.generatedLine = srcMapping.generatedLine;\n      destMapping.generatedColumn = srcMapping.generatedColumn;\n\n      if (srcMapping.source) {\n        destMapping.source = sources.indexOf(srcMapping.source);\n        destMapping.originalLine = srcMapping.originalLine;\n        destMapping.originalColumn = srcMapping.originalColumn;\n\n        if (srcMapping.name) {\n          destMapping.name = names.indexOf(srcMapping.name);\n        }\n\n        destOriginalMappings.push(destMapping);\n      }\n\n      destGeneratedMappings.push(destMapping);\n    }\n\n    quickSort(smc.__originalMappings, util.compareByOriginalPositions);\n\n    return smc;\n  };\n\n/**\n * The version of the source mapping spec that we are consuming.\n */\nBasicSourceMapConsumer.prototype._version = 3;\n\n/**\n * The list of original sources.\n */\nObject.defineProperty(BasicSourceMapConsumer.prototype, 'sources', {\n  get: function () {\n    return this._sources.toArray().map(function (s) {\n      return this.sourceRoot != null ? util.join(this.sourceRoot, s) : s;\n    }, this);\n  }\n});\n\n/**\n * Provide the JIT with a nice shape / hidden class.\n */\nfunction Mapping() {\n  this.generatedLine = 0;\n  this.generatedColumn = 0;\n  this.source = null;\n  this.originalLine = null;\n  this.originalColumn = null;\n  this.name = null;\n}\n\n/**\n * Parse the mappings in a string in to a data structure which we can easily\n * query (the ordered arrays in the `this.__generatedMappings` and\n * `this.__originalMappings` properties).\n */\nBasicSourceMapConsumer.prototype._parseMappings =\n  function SourceMapConsumer_parseMappings(aStr, aSourceRoot) {\n    var generatedLine = 1;\n    var previousGeneratedColumn = 0;\n    var previousOriginalLine = 0;\n    var previousOriginalColumn = 0;\n    var previousSource = 0;\n    var previousName = 0;\n    var length = aStr.length;\n    var index = 0;\n    var cachedSegments = {};\n    var temp = {};\n    var originalMappings = [];\n    var generatedMappings = [];\n    var mapping, str, segment, end, value;\n\n    while (index < length) {\n      if (aStr.charAt(index) === ';') {\n        generatedLine++;\n        index++;\n        previousGeneratedColumn = 0;\n      }\n      else if (aStr.charAt(index) === ',') {\n        index++;\n      }\n      else {\n        mapping = new Mapping();\n        mapping.generatedLine = generatedLine;\n\n        // Because each offset is encoded relative to the previous one,\n        // many segments often have the same encoding. We can exploit this\n        // fact by caching the parsed variable length fields of each segment,\n        // allowing us to avoid a second parse if we encounter the same\n        // segment again.\n        for (end = index; end < length; end++) {\n          if (this._charIsMappingSeparator(aStr, end)) {\n            break;\n          }\n        }\n        str = aStr.slice(index, end);\n\n        segment = cachedSegments[str];\n        if (segment) {\n          index += str.length;\n        } else {\n          segment = [];\n          while (index < end) {\n            base64VLQ.decode(aStr, index, temp);\n            value = temp.value;\n            index = temp.rest;\n            segment.push(value);\n          }\n\n          if (segment.length === 2) {\n            throw new Error('Found a source, but no line and column');\n          }\n\n          if (segment.length === 3) {\n            throw new Error('Found a source and line, but no column');\n          }\n\n          cachedSegments[str] = segment;\n        }\n\n        // Generated column.\n        mapping.generatedColumn = previousGeneratedColumn + segment[0];\n        previousGeneratedColumn = mapping.generatedColumn;\n\n        if (segment.length > 1) {\n          // Original source.\n          mapping.source = previousSource + segment[1];\n          previousSource += segment[1];\n\n          // Original line.\n          mapping.originalLine = previousOriginalLine + segment[2];\n          previousOriginalLine = mapping.originalLine;\n          // Lines are stored 0-based\n          mapping.originalLine += 1;\n\n          // Original column.\n          mapping.originalColumn = previousOriginalColumn + segment[3];\n          previousOriginalColumn = mapping.originalColumn;\n\n          if (segment.length > 4) {\n            // Original name.\n            mapping.name = previousName + segment[4];\n            previousName += segment[4];\n          }\n        }\n\n        generatedMappings.push(mapping);\n        if (typeof mapping.originalLine === 'number') {\n          originalMappings.push(mapping);\n        }\n      }\n    }\n\n    quickSort(generatedMappings, util.compareByGeneratedPositionsDeflated);\n    this.__generatedMappings = generatedMappings;\n\n    quickSort(originalMappings, util.compareByOriginalPositions);\n    this.__originalMappings = originalMappings;\n  };\n\n/**\n * Find the mapping that best matches the hypothetical \"needle\" mapping that\n * we are searching for in the given \"haystack\" of mappings.\n */\nBasicSourceMapConsumer.prototype._findMapping =\n  function SourceMapConsumer_findMapping(aNeedle, aMappings, aLineName,\n                                         aColumnName, aComparator, aBias) {\n    // To return the position we are searching for, we must first find the\n    // mapping for the given position and then return the opposite position it\n    // points to. Because the mappings are sorted, we can use binary search to\n    // find the best mapping.\n\n    if (aNeedle[aLineName] <= 0) {\n      throw new TypeError('Line must be greater than or equal to 1, got '\n                          + aNeedle[aLineName]);\n    }\n    if (aNeedle[aColumnName] < 0) {\n      throw new TypeError('Column must be greater than or equal to 0, got '\n                          + aNeedle[aColumnName]);\n    }\n\n    return binarySearch.search(aNeedle, aMappings, aComparator, aBias);\n  };\n\n/**\n * Compute the last column for each generated mapping. The last column is\n * inclusive.\n */\nBasicSourceMapConsumer.prototype.computeColumnSpans =\n  function SourceMapConsumer_computeColumnSpans() {\n    for (var index = 0; index < this._generatedMappings.length; ++index) {\n      var mapping = this._generatedMappings[index];\n\n      // Mappings do not contain a field for the last generated columnt. We\n      // can come up with an optimistic estimate, however, by assuming that\n      // mappings are contiguous (i.e. given two consecutive mappings, the\n      // first mapping ends where the second one starts).\n      if (index + 1 < this._generatedMappings.length) {\n        var nextMapping = this._generatedMappings[index + 1];\n\n        if (mapping.generatedLine === nextMapping.generatedLine) {\n          mapping.lastGeneratedColumn = nextMapping.generatedColumn - 1;\n          continue;\n        }\n      }\n\n      // The last mapping for each line spans the entire line.\n      mapping.lastGeneratedColumn = Infinity;\n    }\n  };\n\n/**\n * Returns the original source, line, and column information for the generated\n * source's line and column positions provided. The only argument is an object\n * with the following properties:\n *\n *   - line: The line number in the generated source.\n *   - column: The column number in the generated source.\n *   - bias: Either 'SourceMapConsumer.GREATEST_LOWER_BOUND' or\n *     'SourceMapConsumer.LEAST_UPPER_BOUND'. Specifies whether to return the\n *     closest element that is smaller than or greater than the one we are\n *     searching for, respectively, if the exact element cannot be found.\n *     Defaults to 'SourceMapConsumer.GREATEST_LOWER_BOUND'.\n *\n * and an object is returned with the following properties:\n *\n *   - source: The original source file, or null.\n *   - line: The line number in the original source, or null.\n *   - column: The column number in the original source, or null.\n *   - name: The original identifier, or null.\n */\nBasicSourceMapConsumer.prototype.originalPositionFor =\n  function SourceMapConsumer_originalPositionFor(aArgs) {\n    var needle = {\n      generatedLine: util.getArg(aArgs, 'line'),\n      generatedColumn: util.getArg(aArgs, 'column')\n    };\n\n    var index = this._findMapping(\n      needle,\n      this._generatedMappings,\n      \"generatedLine\",\n      \"generatedColumn\",\n      util.compareByGeneratedPositionsDeflated,\n      util.getArg(aArgs, 'bias', SourceMapConsumer.GREATEST_LOWER_BOUND)\n    );\n\n    if (index >= 0) {\n      var mapping = this._generatedMappings[index];\n\n      if (mapping.generatedLine === needle.generatedLine) {\n        var source = util.getArg(mapping, 'source', null);\n        if (source !== null) {\n          source = this._sources.at(source);\n          if (this.sourceRoot != null) {\n            source = util.join(this.sourceRoot, source);\n          }\n        }\n        var name = util.getArg(mapping, 'name', null);\n        if (name !== null) {\n          name = this._names.at(name);\n        }\n        return {\n          source: source,\n          line: util.getArg(mapping, 'originalLine', null),\n          column: util.getArg(mapping, 'originalColumn', null),\n          name: name\n        };\n      }\n    }\n\n    return {\n      source: null,\n      line: null,\n      column: null,\n      name: null\n    };\n  };\n\n/**\n * Return true if we have the source content for every source in the source\n * map, false otherwise.\n */\nBasicSourceMapConsumer.prototype.hasContentsOfAllSources =\n  function BasicSourceMapConsumer_hasContentsOfAllSources() {\n    if (!this.sourcesContent) {\n      return false;\n    }\n    return this.sourcesContent.length >= this._sources.size() &&\n      !this.sourcesContent.some(function (sc) { return sc == null; });\n  };\n\n/**\n * Returns the original source content. The only argument is the url of the\n * original source file. Returns null if no original source content is\n * available.\n */\nBasicSourceMapConsumer.prototype.sourceContentFor =\n  function SourceMapConsumer_sourceContentFor(aSource, nullOnMissing) {\n    if (!this.sourcesContent) {\n      return null;\n    }\n\n    if (this.sourceRoot != null) {\n      aSource = util.relative(this.sourceRoot, aSource);\n    }\n\n    if (this._sources.has(aSource)) {\n      return this.sourcesContent[this._sources.indexOf(aSource)];\n    }\n\n    var url;\n    if (this.sourceRoot != null\n        && (url = util.urlParse(this.sourceRoot))) {\n      // XXX: file:// URIs and absolute paths lead to unexpected behavior for\n      // many users. We can help them out when they expect file:// URIs to\n      // behave like it would if they were running a local HTTP server. See\n      // https://bugzilla.mozilla.org/show_bug.cgi?id=885597.\n      var fileUriAbsPath = aSource.replace(/^file:\\/\\//, \"\");\n      if (url.scheme == \"file\"\n          && this._sources.has(fileUriAbsPath)) {\n        return this.sourcesContent[this._sources.indexOf(fileUriAbsPath)]\n      }\n\n      if ((!url.path || url.path == \"/\")\n          && this._sources.has(\"/\" + aSource)) {\n        return this.sourcesContent[this._sources.indexOf(\"/\" + aSource)];\n      }\n    }\n\n    // This function is used recursively from\n    // IndexedSourceMapConsumer.prototype.sourceContentFor. In that case, we\n    // don't want to throw if we can't find the source - we just want to\n    // return null, so we provide a flag to exit gracefully.\n    if (nullOnMissing) {\n      return null;\n    }\n    else {\n      throw new Error('\"' + aSource + '\" is not in the SourceMap.');\n    }\n  };\n\n/**\n * Returns the generated line and column information for the original source,\n * line, and column positions provided. The only argument is an object with\n * the following properties:\n *\n *   - source: The filename of the original source.\n *   - line: The line number in the original source.\n *   - column: The column number in the original source.\n *   - bias: Either 'SourceMapConsumer.GREATEST_LOWER_BOUND' or\n *     'SourceMapConsumer.LEAST_UPPER_BOUND'. Specifies whether to return the\n *     closest element that is smaller than or greater than the one we are\n *     searching for, respectively, if the exact element cannot be found.\n *     Defaults to 'SourceMapConsumer.GREATEST_LOWER_BOUND'.\n *\n * and an object is returned with the following properties:\n *\n *   - line: The line number in the generated source, or null.\n *   - column: The column number in the generated source, or null.\n */\nBasicSourceMapConsumer.prototype.generatedPositionFor =\n  function SourceMapConsumer_generatedPositionFor(aArgs) {\n    var source = util.getArg(aArgs, 'source');\n    if (this.sourceRoot != null) {\n      source = util.relative(this.sourceRoot, source);\n    }\n    if (!this._sources.has(source)) {\n      return {\n        line: null,\n        column: null,\n        lastColumn: null\n      };\n    }\n    source = this._sources.indexOf(source);\n\n    var needle = {\n      source: source,\n      originalLine: util.getArg(aArgs, 'line'),\n      originalColumn: util.getArg(aArgs, 'column')\n    };\n\n    var index = this._findMapping(\n      needle,\n      this._originalMappings,\n      \"originalLine\",\n      \"originalColumn\",\n      util.compareByOriginalPositions,\n      util.getArg(aArgs, 'bias', SourceMapConsumer.GREATEST_LOWER_BOUND)\n    );\n\n    if (index >= 0) {\n      var mapping = this._originalMappings[index];\n\n      if (mapping.source === needle.source) {\n        return {\n          line: util.getArg(mapping, 'generatedLine', null),\n          column: util.getArg(mapping, 'generatedColumn', null),\n          lastColumn: util.getArg(mapping, 'lastGeneratedColumn', null)\n        };\n      }\n    }\n\n    return {\n      line: null,\n      column: null,\n      lastColumn: null\n    };\n  };\n\nexports.BasicSourceMapConsumer = BasicSourceMapConsumer;\n\n/**\n * An IndexedSourceMapConsumer instance represents a parsed source map which\n * we can query for information. It differs from BasicSourceMapConsumer in\n * that it takes \"indexed\" source maps (i.e. ones with a \"sections\" field) as\n * input.\n *\n * The only parameter is a raw source map (either as a JSON string, or already\n * parsed to an object). According to the spec for indexed source maps, they\n * have the following attributes:\n *\n *   - version: Which version of the source map spec this map is following.\n *   - file: Optional. The generated file this source map is associated with.\n *   - sections: A list of section definitions.\n *\n * Each value under the \"sections\" field has two fields:\n *   - offset: The offset into the original specified at which this section\n *       begins to apply, defined as an object with a \"line\" and \"column\"\n *       field.\n *   - map: A source map definition. This source map could also be indexed,\n *       but doesn't have to be.\n *\n * Instead of the \"map\" field, it's also possible to have a \"url\" field\n * specifying a URL to retrieve a source map from, but that's currently\n * unsupported.\n *\n * Here's an example source map, taken from the source map spec[0], but\n * modified to omit a section which uses the \"url\" field.\n *\n *  {\n *    version : 3,\n *    file: \"app.js\",\n *    sections: [{\n *      offset: {line:100, column:10},\n *      map: {\n *        version : 3,\n *        file: \"section.js\",\n *        sources: [\"foo.js\", \"bar.js\"],\n *        names: [\"src\", \"maps\", \"are\", \"fun\"],\n *        mappings: \"AAAA,E;;ABCDE;\"\n *      }\n *    }],\n *  }\n *\n * [0]: https://docs.google.com/document/d/1U1RGAehQwRypUTovF1KRlpiOFze0b-_2gc6fAH0KY0k/edit#heading=h.535es3xeprgt\n */\nfunction IndexedSourceMapConsumer(aSourceMap) {\n  var sourceMap = aSourceMap;\n  if (typeof aSourceMap === 'string') {\n    sourceMap = JSON.parse(aSourceMap.replace(/^\\)\\]\\}'/, ''));\n  }\n\n  var version = util.getArg(sourceMap, 'version');\n  var sections = util.getArg(sourceMap, 'sections');\n\n  if (version != this._version) {\n    throw new Error('Unsupported version: ' + version);\n  }\n\n  this._sources = new ArraySet();\n  this._names = new ArraySet();\n\n  var lastOffset = {\n    line: -1,\n    column: 0\n  };\n  this._sections = sections.map(function (s) {\n    if (s.url) {\n      // The url field will require support for asynchronicity.\n      // See https://github.com/mozilla/source-map/issues/16\n      throw new Error('Support for url field in sections not implemented.');\n    }\n    var offset = util.getArg(s, 'offset');\n    var offsetLine = util.getArg(offset, 'line');\n    var offsetColumn = util.getArg(offset, 'column');\n\n    if (offsetLine < lastOffset.line ||\n        (offsetLine === lastOffset.line && offsetColumn < lastOffset.column)) {\n      throw new Error('Section offsets must be ordered and non-overlapping.');\n    }\n    lastOffset = offset;\n\n    return {\n      generatedOffset: {\n        // The offset fields are 0-based, but we use 1-based indices when\n        // encoding/decoding from VLQ.\n        generatedLine: offsetLine + 1,\n        generatedColumn: offsetColumn + 1\n      },\n      consumer: new SourceMapConsumer(util.getArg(s, 'map'))\n    }\n  });\n}\n\nIndexedSourceMapConsumer.prototype = Object.create(SourceMapConsumer.prototype);\nIndexedSourceMapConsumer.prototype.constructor = SourceMapConsumer;\n\n/**\n * The version of the source mapping spec that we are consuming.\n */\nIndexedSourceMapConsumer.prototype._version = 3;\n\n/**\n * The list of original sources.\n */\nObject.defineProperty(IndexedSourceMapConsumer.prototype, 'sources', {\n  get: function () {\n    var sources = [];\n    for (var i = 0; i < this._sections.length; i++) {\n      for (var j = 0; j < this._sections[i].consumer.sources.length; j++) {\n        sources.push(this._sections[i].consumer.sources[j]);\n      }\n    }\n    return sources;\n  }\n});\n\n/**\n * Returns the original source, line, and column information for the generated\n * source's line and column positions provided. The only argument is an object\n * with the following properties:\n *\n *   - line: The line number in the generated source.\n *   - column: The column number in the generated source.\n *\n * and an object is returned with the following properties:\n *\n *   - source: The original source file, or null.\n *   - line: The line number in the original source, or null.\n *   - column: The column number in the original source, or null.\n *   - name: The original identifier, or null.\n */\nIndexedSourceMapConsumer.prototype.originalPositionFor =\n  function IndexedSourceMapConsumer_originalPositionFor(aArgs) {\n    var needle = {\n      generatedLine: util.getArg(aArgs, 'line'),\n      generatedColumn: util.getArg(aArgs, 'column')\n    };\n\n    // Find the section containing the generated position we're trying to map\n    // to an original position.\n    var sectionIndex = binarySearch.search(needle, this._sections,\n      function(needle, section) {\n        var cmp = needle.generatedLine - section.generatedOffset.generatedLine;\n        if (cmp) {\n          return cmp;\n        }\n\n        return (needle.generatedColumn -\n                section.generatedOffset.generatedColumn);\n      });\n    var section = this._sections[sectionIndex];\n\n    if (!section) {\n      return {\n        source: null,\n        line: null,\n        column: null,\n        name: null\n      };\n    }\n\n    return section.consumer.originalPositionFor({\n      line: needle.generatedLine -\n        (section.generatedOffset.generatedLine - 1),\n      column: needle.generatedColumn -\n        (section.generatedOffset.generatedLine === needle.generatedLine\n         ? section.generatedOffset.generatedColumn - 1\n         : 0),\n      bias: aArgs.bias\n    });\n  };\n\n/**\n * Return true if we have the source content for every source in the source\n * map, false otherwise.\n */\nIndexedSourceMapConsumer.prototype.hasContentsOfAllSources =\n  function IndexedSourceMapConsumer_hasContentsOfAllSources() {\n    return this._sections.every(function (s) {\n      return s.consumer.hasContentsOfAllSources();\n    });\n  };\n\n/**\n * Returns the original source content. The only argument is the url of the\n * original source file. Returns null if no original source content is\n * available.\n */\nIndexedSourceMapConsumer.prototype.sourceContentFor =\n  function IndexedSourceMapConsumer_sourceContentFor(aSource, nullOnMissing) {\n    for (var i = 0; i < this._sections.length; i++) {\n      var section = this._sections[i];\n\n      var content = section.consumer.sourceContentFor(aSource, true);\n      if (content) {\n        return content;\n      }\n    }\n    if (nullOnMissing) {\n      return null;\n    }\n    else {\n      throw new Error('\"' + aSource + '\" is not in the SourceMap.');\n    }\n  };\n\n/**\n * Returns the generated line and column information for the original source,\n * line, and column positions provided. The only argument is an object with\n * the following properties:\n *\n *   - source: The filename of the original source.\n *   - line: The line number in the original source.\n *   - column: The column number in the original source.\n *\n * and an object is returned with the following properties:\n *\n *   - line: The line number in the generated source, or null.\n *   - column: The column number in the generated source, or null.\n */\nIndexedSourceMapConsumer.prototype.generatedPositionFor =\n  function IndexedSourceMapConsumer_generatedPositionFor(aArgs) {\n    for (var i = 0; i < this._sections.length; i++) {\n      var section = this._sections[i];\n\n      // Only consider this section if the requested source is in the list of\n      // sources of the consumer.\n      if (section.consumer.sources.indexOf(util.getArg(aArgs, 'source')) === -1) {\n        continue;\n      }\n      var generatedPosition = section.consumer.generatedPositionFor(aArgs);\n      if (generatedPosition) {\n        var ret = {\n          line: generatedPosition.line +\n            (section.generatedOffset.generatedLine - 1),\n          column: generatedPosition.column +\n            (section.generatedOffset.generatedLine === generatedPosition.line\n             ? section.generatedOffset.generatedColumn - 1\n             : 0)\n        };\n        return ret;\n      }\n    }\n\n    return {\n      line: null,\n      column: null\n    };\n  };\n\n/**\n * Parse the mappings in a string in to a data structure which we can easily\n * query (the ordered arrays in the `this.__generatedMappings` and\n * `this.__originalMappings` properties).\n */\nIndexedSourceMapConsumer.prototype._parseMappings =\n  function IndexedSourceMapConsumer_parseMappings(aStr, aSourceRoot) {\n    this.__generatedMappings = [];\n    this.__originalMappings = [];\n    for (var i = 0; i < this._sections.length; i++) {\n      var section = this._sections[i];\n      var sectionMappings = section.consumer._generatedMappings;\n      for (var j = 0; j < sectionMappings.length; j++) {\n        var mapping = sectionMappings[j];\n\n        var source = section.consumer._sources.at(mapping.source);\n        if (section.consumer.sourceRoot !== null) {\n          source = util.join(section.consumer.sourceRoot, source);\n        }\n        this._sources.add(source);\n        source = this._sources.indexOf(source);\n\n        var name = section.consumer._names.at(mapping.name);\n        this._names.add(name);\n        name = this._names.indexOf(name);\n\n        // The mappings coming from the consumer for the section have\n        // generated positions relative to the start of the section, so we\n        // need to offset them to be relative to the start of the concatenated\n        // generated file.\n        var adjustedMapping = {\n          source: source,\n          generatedLine: mapping.generatedLine +\n            (section.generatedOffset.generatedLine - 1),\n          generatedColumn: mapping.generatedColumn +\n            (section.generatedOffset.generatedLine === mapping.generatedLine\n            ? section.generatedOffset.generatedColumn - 1\n            : 0),\n          originalLine: mapping.originalLine,\n          originalColumn: mapping.originalColumn,\n          name: name\n        };\n\n        this.__generatedMappings.push(adjustedMapping);\n        if (typeof adjustedMapping.originalLine === 'number') {\n          this.__originalMappings.push(adjustedMapping);\n        }\n      }\n    }\n\n    quickSort(this.__generatedMappings, util.compareByGeneratedPositionsDeflated);\n    quickSort(this.__originalMappings, util.compareByOriginalPositions);\n  };\n\nexports.IndexedSourceMapConsumer = IndexedSourceMapConsumer;\n","/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nexports.GREATEST_LOWER_BOUND = 1;\nexports.LEAST_UPPER_BOUND = 2;\n\n/**\n * Recursive implementation of binary search.\n *\n * @param aLow Indices here and lower do not contain the needle.\n * @param aHigh Indices here and higher do not contain the needle.\n * @param aNeedle The element being searched for.\n * @param aHaystack The non-empty array being searched.\n * @param aCompare Function which takes two elements and returns -1, 0, or 1.\n * @param aBias Either 'binarySearch.GREATEST_LOWER_BOUND' or\n *     'binarySearch.LEAST_UPPER_BOUND'. Specifies whether to return the\n *     closest element that is smaller than or greater than the one we are\n *     searching for, respectively, if the exact element cannot be found.\n */\nfunction recursiveSearch(aLow, aHigh, aNeedle, aHaystack, aCompare, aBias) {\n  // This function terminates when one of the following is true:\n  //\n  //   1. We find the exact element we are looking for.\n  //\n  //   2. We did not find the exact element, but we can return the index of\n  //      the next-closest element.\n  //\n  //   3. We did not find the exact element, and there is no next-closest\n  //      element than the one we are searching for, so we return -1.\n  var mid = Math.floor((aHigh - aLow) / 2) + aLow;\n  var cmp = aCompare(aNeedle, aHaystack[mid], true);\n  if (cmp === 0) {\n    // Found the element we are looking for.\n    return mid;\n  }\n  else if (cmp > 0) {\n    // Our needle is greater than aHaystack[mid].\n    if (aHigh - mid > 1) {\n      // The element is in the upper half.\n      return recursiveSearch(mid, aHigh, aNeedle, aHaystack, aCompare, aBias);\n    }\n\n    // The exact needle element was not found in this haystack. Determine if\n    // we are in termination case (3) or (2) and return the appropriate thing.\n    if (aBias == exports.LEAST_UPPER_BOUND) {\n      return aHigh < aHaystack.length ? aHigh : -1;\n    } else {\n      return mid;\n    }\n  }\n  else {\n    // Our needle is less than aHaystack[mid].\n    if (mid - aLow > 1) {\n      // The element is in the lower half.\n      return recursiveSearch(aLow, mid, aNeedle, aHaystack, aCompare, aBias);\n    }\n\n    // we are in termination case (3) or (2) and return the appropriate thing.\n    if (aBias == exports.LEAST_UPPER_BOUND) {\n      return mid;\n    } else {\n      return aLow < 0 ? -1 : aLow;\n    }\n  }\n}\n\n/**\n * This is an implementation of binary search which will always try and return\n * the index of the closest element if there is no exact hit. This is because\n * mappings between original and generated line/col pairs are single points,\n * and there is an implicit region between each of them, so a miss just means\n * that you aren't on the very start of a region.\n *\n * @param aNeedle The element you are looking for.\n * @param aHaystack The array that is being searched.\n * @param aCompare A function which takes the needle and an element in the\n *     array and returns -1, 0, or 1 depending on whether the needle is less\n *     than, equal to, or greater than the element, respectively.\n * @param aBias Either 'binarySearch.GREATEST_LOWER_BOUND' or\n *     'binarySearch.LEAST_UPPER_BOUND'. Specifies whether to return the\n *     closest element that is smaller than or greater than the one we are\n *     searching for, respectively, if the exact element cannot be found.\n *     Defaults to 'binarySearch.GREATEST_LOWER_BOUND'.\n */\nexports.search = function search(aNeedle, aHaystack, aCompare, aBias) {\n  if (aHaystack.length === 0) {\n    return -1;\n  }\n\n  var index = recursiveSearch(-1, aHaystack.length, aNeedle, aHaystack,\n                              aCompare, aBias || exports.GREATEST_LOWER_BOUND);\n  if (index < 0) {\n    return -1;\n  }\n\n  // We have found either the exact element, or the next-closest element than\n  // the one we are searching for. However, there may be more than one such\n  // element. Make sure we always return the smallest of these.\n  while (index - 1 >= 0) {\n    if (aCompare(aHaystack[index], aHaystack[index - 1], true) !== 0) {\n      break;\n    }\n    --index;\n  }\n\n  return index;\n};\n","/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\n// It turns out that some (most?) JavaScript engines don't self-host\n// `Array.prototype.sort`. This makes sense because C++ will likely remain\n// faster than JS when doing raw CPU-intensive sorting. However, when using a\n// custom comparator function, calling back and forth between the VM's C++ and\n// JIT'd JS is rather slow *and* loses JIT type information, resulting in\n// worse generated code for the comparator function than would be optimal. In\n// fact, when sorting with a comparator, these costs outweigh the benefits of\n// sorting in C++. By using our own JS-implemented Quick Sort (below), we get\n// a ~3500ms mean speed-up in `bench/bench.html`.\n\n/**\n * Swap the elements indexed by `x` and `y` in the array `ary`.\n *\n * @param {Array} ary\n *        The array.\n * @param {Number} x\n *        The index of the first item.\n * @param {Number} y\n *        The index of the second item.\n */\nfunction swap(ary, x, y) {\n  var temp = ary[x];\n  ary[x] = ary[y];\n  ary[y] = temp;\n}\n\n/**\n * Returns a random integer within the range `low .. high` inclusive.\n *\n * @param {Number} low\n *        The lower bound on the range.\n * @param {Number} high\n *        The upper bound on the range.\n */\nfunction randomIntInRange(low, high) {\n  return Math.round(low + (Math.random() * (high - low)));\n}\n\n/**\n * The Quick Sort algorithm.\n *\n * @param {Array} ary\n *        An array to sort.\n * @param {function} comparator\n *        Function to use to compare two items.\n * @param {Number} p\n *        Start index of the array\n * @param {Number} r\n *        End index of the array\n */\nfunction doQuickSort(ary, comparator, p, r) {\n  // If our lower bound is less than our upper bound, we (1) partition the\n  // array into two pieces and (2) recurse on each half. If it is not, this is\n  // the empty array and our base case.\n\n  if (p < r) {\n    // (1) Partitioning.\n    //\n    // The partitioning chooses a pivot between `p` and `r` and moves all\n    // elements that are less than or equal to the pivot to the before it, and\n    // all the elements that are greater than it after it. The effect is that\n    // once partition is done, the pivot is in the exact place it will be when\n    // the array is put in sorted order, and it will not need to be moved\n    // again. This runs in O(n) time.\n\n    // Always choose a random pivot so that an input array which is reverse\n    // sorted does not cause O(n^2) running time.\n    var pivotIndex = randomIntInRange(p, r);\n    var i = p - 1;\n\n    swap(ary, pivotIndex, r);\n    var pivot = ary[r];\n\n    // Immediately after `j` is incremented in this loop, the following hold\n    // true:\n    //\n    //   * Every element in `ary[p .. i]` is less than or equal to the pivot.\n    //\n    //   * Every element in `ary[i+1 .. j-1]` is greater than the pivot.\n    for (var j = p; j < r; j++) {\n      if (comparator(ary[j], pivot) <= 0) {\n        i += 1;\n        swap(ary, i, j);\n      }\n    }\n\n    swap(ary, i + 1, j);\n    var q = i + 1;\n\n    // (2) Recurse on each half.\n\n    doQuickSort(ary, comparator, p, q - 1);\n    doQuickSort(ary, comparator, q + 1, r);\n  }\n}\n\n/**\n * Sort the given array in-place with the given comparator function.\n *\n * @param {Array} ary\n *        An array to sort.\n * @param {function} comparator\n *        Function to use to compare two items.\n */\nexports.quickSort = function (ary, comparator) {\n  doQuickSort(ary, comparator, 0, ary.length - 1);\n};\n","/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nvar SourceMapGenerator = require('./source-map-generator').SourceMapGenerator;\nvar util = require('./util');\n\n// Matches a Windows-style `\\r\\n` newline or a `\\n` newline used by all other\n// operating systems these days (capturing the result).\nvar REGEX_NEWLINE = /(\\r?\\n)/;\n\n// Newline character code for charCodeAt() comparisons\nvar NEWLINE_CODE = 10;\n\n// Private symbol for identifying `SourceNode`s when multiple versions of\n// the source-map library are loaded. This MUST NOT CHANGE across\n// versions!\nvar isSourceNode = \"$$$isSourceNode$$$\";\n\n/**\n * SourceNodes provide a way to abstract over interpolating/concatenating\n * snippets of generated JavaScript source code while maintaining the line and\n * column information associated with the original source code.\n *\n * @param aLine The original line number.\n * @param aColumn The original column number.\n * @param aSource The original source's filename.\n * @param aChunks Optional. An array of strings which are snippets of\n *        generated JS, or other SourceNodes.\n * @param aName The original identifier.\n */\nfunction SourceNode(aLine, aColumn, aSource, aChunks, aName) {\n  this.children = [];\n  this.sourceContents = {};\n  this.line = aLine == null ? null : aLine;\n  this.column = aColumn == null ? null : aColumn;\n  this.source = aSource == null ? null : aSource;\n  this.name = aName == null ? null : aName;\n  this[isSourceNode] = true;\n  if (aChunks != null) this.add(aChunks);\n}\n\n/**\n * Creates a SourceNode from generated code and a SourceMapConsumer.\n *\n * @param aGeneratedCode The generated code\n * @param aSourceMapConsumer The SourceMap for the generated code\n * @param aRelativePath Optional. The path that relative sources in the\n *        SourceMapConsumer should be relative to.\n */\nSourceNode.fromStringWithSourceMap =\n  function SourceNode_fromStringWithSourceMap(aGeneratedCode, aSourceMapConsumer, aRelativePath) {\n    // The SourceNode we want to fill with the generated code\n    // and the SourceMap\n    var node = new SourceNode();\n\n    // All even indices of this array are one line of the generated code,\n    // while all odd indices are the newlines between two adjacent lines\n    // (since `REGEX_NEWLINE` captures its match).\n    // Processed fragments are removed from this array, by calling `shiftNextLine`.\n    var remainingLines = aGeneratedCode.split(REGEX_NEWLINE);\n    var shiftNextLine = function() {\n      var lineContents = remainingLines.shift();\n      // The last line of a file might not have a newline.\n      var newLine = remainingLines.shift() || \"\";\n      return lineContents + newLine;\n    };\n\n    // We need to remember the position of \"remainingLines\"\n    var lastGeneratedLine = 1, lastGeneratedColumn = 0;\n\n    // The generate SourceNodes we need a code range.\n    // To extract it current and last mapping is used.\n    // Here we store the last mapping.\n    var lastMapping = null;\n\n    aSourceMapConsumer.eachMapping(function (mapping) {\n      if (lastMapping !== null) {\n        // We add the code from \"lastMapping\" to \"mapping\":\n        // First check if there is a new line in between.\n        if (lastGeneratedLine < mapping.generatedLine) {\n          // Associate first line with \"lastMapping\"\n          addMappingWithCode(lastMapping, shiftNextLine());\n          lastGeneratedLine++;\n          lastGeneratedColumn = 0;\n          // The remaining code is added without mapping\n        } else {\n          // There is no new line in between.\n          // Associate the code between \"lastGeneratedColumn\" and\n          // \"mapping.generatedColumn\" with \"lastMapping\"\n          var nextLine = remainingLines[0];\n          var code = nextLine.substr(0, mapping.generatedColumn -\n                                        lastGeneratedColumn);\n          remainingLines[0] = nextLine.substr(mapping.generatedColumn -\n                                              lastGeneratedColumn);\n          lastGeneratedColumn = mapping.generatedColumn;\n          addMappingWithCode(lastMapping, code);\n          // No more remaining code, continue\n          lastMapping = mapping;\n          return;\n        }\n      }\n      // We add the generated code until the first mapping\n      // to the SourceNode without any mapping.\n      // Each line is added as separate string.\n      while (lastGeneratedLine < mapping.generatedLine) {\n        node.add(shiftNextLine());\n        lastGeneratedLine++;\n      }\n      if (lastGeneratedColumn < mapping.generatedColumn) {\n        var nextLine = remainingLines[0];\n        node.add(nextLine.substr(0, mapping.generatedColumn));\n        remainingLines[0] = nextLine.substr(mapping.generatedColumn);\n        lastGeneratedColumn = mapping.generatedColumn;\n      }\n      lastMapping = mapping;\n    }, this);\n    // We have processed all mappings.\n    if (remainingLines.length > 0) {\n      if (lastMapping) {\n        // Associate the remaining code in the current line with \"lastMapping\"\n        addMappingWithCode(lastMapping, shiftNextLine());\n      }\n      // and add the remaining lines without any mapping\n      node.add(remainingLines.join(\"\"));\n    }\n\n    // Copy sourcesContent into SourceNode\n    aSourceMapConsumer.sources.forEach(function (sourceFile) {\n      var content = aSourceMapConsumer.sourceContentFor(sourceFile);\n      if (content != null) {\n        if (aRelativePath != null) {\n          sourceFile = util.join(aRelativePath, sourceFile);\n        }\n        node.setSourceContent(sourceFile, content);\n      }\n    });\n\n    return node;\n\n    function addMappingWithCode(mapping, code) {\n      if (mapping === null || mapping.source === undefined) {\n        node.add(code);\n      } else {\n        var source = aRelativePath\n          ? util.join(aRelativePath, mapping.source)\n          : mapping.source;\n        node.add(new SourceNode(mapping.originalLine,\n                                mapping.originalColumn,\n                                source,\n                                code,\n                                mapping.name));\n      }\n    }\n  };\n\n/**\n * Add a chunk of generated JS to this source node.\n *\n * @param aChunk A string snippet of generated JS code, another instance of\n *        SourceNode, or an array where each member is one of those things.\n */\nSourceNode.prototype.add = function SourceNode_add(aChunk) {\n  if (Array.isArray(aChunk)) {\n    aChunk.forEach(function (chunk) {\n      this.add(chunk);\n    }, this);\n  }\n  else if (aChunk[isSourceNode] || typeof aChunk === \"string\") {\n    if (aChunk) {\n      this.children.push(aChunk);\n    }\n  }\n  else {\n    throw new TypeError(\n      \"Expected a SourceNode, string, or an array of SourceNodes and strings. Got \" + aChunk\n    );\n  }\n  return this;\n};\n\n/**\n * Add a chunk of generated JS to the beginning of this source node.\n *\n * @param aChunk A string snippet of generated JS code, another instance of\n *        SourceNode, or an array where each member is one of those things.\n */\nSourceNode.prototype.prepend = function SourceNode_prepend(aChunk) {\n  if (Array.isArray(aChunk)) {\n    for (var i = aChunk.length-1; i >= 0; i--) {\n      this.prepend(aChunk[i]);\n    }\n  }\n  else if (aChunk[isSourceNode] || typeof aChunk === \"string\") {\n    this.children.unshift(aChunk);\n  }\n  else {\n    throw new TypeError(\n      \"Expected a SourceNode, string, or an array of SourceNodes and strings. Got \" + aChunk\n    );\n  }\n  return this;\n};\n\n/**\n * Walk over the tree of JS snippets in this node and its children. The\n * walking function is called once for each snippet of JS and is passed that\n * snippet and the its original associated source's line/column location.\n *\n * @param aFn The traversal function.\n */\nSourceNode.prototype.walk = function SourceNode_walk(aFn) {\n  var chunk;\n  for (var i = 0, len = this.children.length; i < len; i++) {\n    chunk = this.children[i];\n    if (chunk[isSourceNode]) {\n      chunk.walk(aFn);\n    }\n    else {\n      if (chunk !== '') {\n        aFn(chunk, { source: this.source,\n                     line: this.line,\n                     column: this.column,\n                     name: this.name });\n      }\n    }\n  }\n};\n\n/**\n * Like `String.prototype.join` except for SourceNodes. Inserts `aStr` between\n * each of `this.children`.\n *\n * @param aSep The separator.\n */\nSourceNode.prototype.join = function SourceNode_join(aSep) {\n  var newChildren;\n  var i;\n  var len = this.children.length;\n  if (len > 0) {\n    newChildren = [];\n    for (i = 0; i < len-1; i++) {\n      newChildren.push(this.children[i]);\n      newChildren.push(aSep);\n    }\n    newChildren.push(this.children[i]);\n    this.children = newChildren;\n  }\n  return this;\n};\n\n/**\n * Call String.prototype.replace on the very right-most source snippet. Useful\n * for trimming whitespace from the end of a source node, etc.\n *\n * @param aPattern The pattern to replace.\n * @param aReplacement The thing to replace the pattern with.\n */\nSourceNode.prototype.replaceRight = function SourceNode_replaceRight(aPattern, aReplacement) {\n  var lastChild = this.children[this.children.length - 1];\n  if (lastChild[isSourceNode]) {\n    lastChild.replaceRight(aPattern, aReplacement);\n  }\n  else if (typeof lastChild === 'string') {\n    this.children[this.children.length - 1] = lastChild.replace(aPattern, aReplacement);\n  }\n  else {\n    this.children.push(''.replace(aPattern, aReplacement));\n  }\n  return this;\n};\n\n/**\n * Set the source content for a source file. This will be added to the SourceMapGenerator\n * in the sourcesContent field.\n *\n * @param aSourceFile The filename of the source file\n * @param aSourceContent The content of the source file\n */\nSourceNode.prototype.setSourceContent =\n  function SourceNode_setSourceContent(aSourceFile, aSourceContent) {\n    this.sourceContents[util.toSetString(aSourceFile)] = aSourceContent;\n  };\n\n/**\n * Walk over the tree of SourceNodes. The walking function is called for each\n * source file content and is passed the filename and source content.\n *\n * @param aFn The traversal function.\n */\nSourceNode.prototype.walkSourceContents =\n  function SourceNode_walkSourceContents(aFn) {\n    for (var i = 0, len = this.children.length; i < len; i++) {\n      if (this.children[i][isSourceNode]) {\n        this.children[i].walkSourceContents(aFn);\n      }\n    }\n\n    var sources = Object.keys(this.sourceContents);\n    for (var i = 0, len = sources.length; i < len; i++) {\n      aFn(util.fromSetString(sources[i]), this.sourceContents[sources[i]]);\n    }\n  };\n\n/**\n * Return the string representation of this source node. Walks over the tree\n * and concatenates all the various snippets together to one string.\n */\nSourceNode.prototype.toString = function SourceNode_toString() {\n  var str = \"\";\n  this.walk(function (chunk) {\n    str += chunk;\n  });\n  return str;\n};\n\n/**\n * Returns the string representation of this source node along with a source\n * map.\n */\nSourceNode.prototype.toStringWithSourceMap = function SourceNode_toStringWithSourceMap(aArgs) {\n  var generated = {\n    code: \"\",\n    line: 1,\n    column: 0\n  };\n  var map = new SourceMapGenerator(aArgs);\n  var sourceMappingActive = false;\n  var lastOriginalSource = null;\n  var lastOriginalLine = null;\n  var lastOriginalColumn = null;\n  var lastOriginalName = null;\n  this.walk(function (chunk, original) {\n    generated.code += chunk;\n    if (original.source !== null\n        && original.line !== null\n        && original.column !== null) {\n      if(lastOriginalSource !== original.source\n         || lastOriginalLine !== original.line\n         || lastOriginalColumn !== original.column\n         || lastOriginalName !== original.name) {\n        map.addMapping({\n          source: original.source,\n          original: {\n            line: original.line,\n            column: original.column\n          },\n          generated: {\n            line: generated.line,\n            column: generated.column\n          },\n          name: original.name\n        });\n      }\n      lastOriginalSource = original.source;\n      lastOriginalLine = original.line;\n      lastOriginalColumn = original.column;\n      lastOriginalName = original.name;\n      sourceMappingActive = true;\n    } else if (sourceMappingActive) {\n      map.addMapping({\n        generated: {\n          line: generated.line,\n          column: generated.column\n        }\n      });\n      lastOriginalSource = null;\n      sourceMappingActive = false;\n    }\n    for (var idx = 0, length = chunk.length; idx < length; idx++) {\n      if (chunk.charCodeAt(idx) === NEWLINE_CODE) {\n        generated.line++;\n        generated.column = 0;\n        // Mappings end at eol\n        if (idx + 1 === length) {\n          lastOriginalSource = null;\n          sourceMappingActive = false;\n        } else if (sourceMappingActive) {\n          map.addMapping({\n            source: original.source,\n            original: {\n              line: original.line,\n              column: original.column\n            },\n            generated: {\n              line: generated.line,\n              column: generated.column\n            },\n            name: original.name\n          });\n        }\n      } else {\n        generated.column++;\n      }\n    }\n  });\n  this.walkSourceContents(function (sourceFile, sourceContent) {\n    map.setSourceContent(sourceFile, sourceContent);\n  });\n\n  return { code: generated.code, map: map };\n};\n\nexports.SourceNode = SourceNode;\n","import PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport { FormattedMessage } from 'react-intl';\n\nimport { Helmet } from 'react-helmet';\n\nimport StackTrace from 'stacktrace-js';\n\nimport { version, source_url } from 'mastodon/initial_state';\n\nexport default class ErrorBoundary extends PureComponent {\n\n  static propTypes = {\n    children: PropTypes.node,\n  };\n\n  state = {\n    hasError: false,\n    errorMessage: undefined,\n    stackTrace: undefined,\n    mappedStackTrace: undefined,\n    componentStack: undefined,\n  };\n\n  componentDidCatch (error, info) {\n    this.setState({\n      hasError: true,\n      errorMessage: error.toString(),\n      stackTrace: error.stack,\n      componentStack: info && info.componentStack,\n      mappedStackTrace: undefined,\n    });\n\n    StackTrace.fromError(error).then((stackframes) => {\n      this.setState({\n        mappedStackTrace: stackframes.map((sf) => sf.toString()).join('\\n'),\n      });\n    }).catch(() => {\n      this.setState({\n        mappedStackTrace: undefined,\n      });\n    });\n  }\n\n  handleCopyStackTrace = () => {\n    const { errorMessage, stackTrace, mappedStackTrace } = this.state;\n    const textarea = document.createElement('textarea');\n\n    let contents = [errorMessage, stackTrace];\n    if (mappedStackTrace) {\n      contents.push(mappedStackTrace);\n    }\n\n    textarea.textContent    = contents.join('\\n\\n\\n');\n    textarea.style.position = 'fixed';\n\n    document.body.appendChild(textarea);\n\n    try {\n      textarea.select();\n      document.execCommand('copy');\n    } catch (e) {\n\n    } finally {\n      document.body.removeChild(textarea);\n    }\n\n    this.setState({ copied: true });\n    setTimeout(() => this.setState({ copied: false }), 700);\n  };\n\n  render() {\n    const { hasError, copied, errorMessage } = this.state;\n\n    if (!hasError) {\n      return this.props.children;\n    }\n\n    const likelyBrowserAddonIssue = errorMessage && errorMessage.includes('NotFoundError');\n\n    return (\n      <div className='error-boundary'>\n        <div>\n          <p className='error-boundary__error'>\n            { likelyBrowserAddonIssue ? (\n              <FormattedMessage id='error.unexpected_crash.explanation_addons' defaultMessage='This page could not be displayed correctly. This error is likely caused by a browser add-on or automatic translation tools.' />\n            ) : (\n              <FormattedMessage id='error.unexpected_crash.explanation' defaultMessage='Due to a bug in our code or a browser compatibility issue, this page could not be displayed correctly.' />\n            )}\n          </p>\n\n          <p>\n            { likelyBrowserAddonIssue ? (\n              <FormattedMessage id='error.unexpected_crash.next_steps_addons' defaultMessage='Try disabling them and refreshing the page. If that does not help, you may still be able to use Mastodon through a different browser or native app.' />\n            ) : (\n              <FormattedMessage id='error.unexpected_crash.next_steps' defaultMessage='Try refreshing the page. If that does not help, you may still be able to use Mastodon through a different browser or native app.' />\n            )}\n          </p>\n\n          <p className='error-boundary__footer'>Mastodon v{version}  <a href={source_url} rel='noopener noreferrer' target='_blank'><FormattedMessage id='errors.unexpected_crash.report_issue' defaultMessage='Report issue' /></a>  <button onClick={this.handleCopyStackTrace} className={copied ? 'copied' : ''}><FormattedMessage id='errors.unexpected_crash.copy_stacktrace' defaultMessage='Copy stacktrace to clipboard' /></button></p>\n        </div>\n\n        <Helmet>\n          <meta name='robots' content='noindex' />\n        </Helmet>\n      </div>\n    );\n  }\n\n}\n","import { changeSetting, saveSettings } from './settings';\n\nexport const INTRODUCTION_VERSION = 20181216044202;\n\nexport const closeOnboarding = () => dispatch => {\n  dispatch(changeSetting(['introductionVersion'], INTRODUCTION_VERSION));\n  dispatch(saveSettings());\n};\n","import PropTypes from 'prop-types';\n\nimport { defineMessages, injectIntl } from 'react-intl';\n\nimport { Link } from 'react-router-dom';\n\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport ImmutablePureComponent from 'react-immutable-pure-component';\nimport { connect } from 'react-redux';\n\nimport { ReactComponent as CloseIcon } from '@material-symbols/svg-600/outlined/close.svg';\n\nimport { Avatar } from 'mastodon/components/avatar';\nimport { DisplayName } from 'mastodon/components/display_name';\nimport { IconButton } from 'mastodon/components/icon_button';\n\nconst messages = defineMessages({\n  close: { id: 'lightbox.close', defaultMessage: 'Close' },\n});\n\nconst mapStateToProps = (state, { accountId }) => ({\n  account: state.getIn(['accounts', accountId]),\n});\n\nclass Header extends ImmutablePureComponent {\n\n  static propTypes = {\n    accountId: PropTypes.string.isRequired,\n    statusId: PropTypes.string.isRequired,\n    account: ImmutablePropTypes.record.isRequired,\n    onClose: PropTypes.func.isRequired,\n    intl: PropTypes.object.isRequired,\n  };\n\n  render () {\n    const { account, statusId, onClose, intl } = this.props;\n\n    return (\n      <div className='picture-in-picture__header'>\n        <Link to={`/@${account.get('acct')}/${statusId}`} className='picture-in-picture__header__account'>\n          <Avatar account={account} size={36} />\n          <DisplayName account={account} />\n        </Link>\n\n        <IconButton icon='times' iconComponent={CloseIcon} onClick={onClose} title={intl.formatMessage(messages.close)} />\n      </div>\n    );\n  }\n\n}\n\nexport default connect(mapStateToProps)(injectIntl(Header));\n","import PropTypes from 'prop-types';\nimport { Component } from 'react';\n\nimport { connect } from 'react-redux';\n\nimport { removePictureInPicture } from 'mastodon/actions/picture_in_picture';\nimport Audio from 'mastodon/features/audio';\nimport Video from 'mastodon/features/video';\n\nimport Footer from './components/footer';\nimport Header from './components/header';\n\nconst mapStateToProps = state => ({\n  ...state.get('picture_in_picture'),\n});\n\nclass PictureInPicture extends Component {\n\n  static propTypes = {\n    statusId: PropTypes.string,\n    accountId: PropTypes.string,\n    type: PropTypes.string,\n    src: PropTypes.string,\n    muted: PropTypes.bool,\n    volume: PropTypes.number,\n    currentTime: PropTypes.number,\n    poster: PropTypes.string,\n    backgroundColor: PropTypes.string,\n    foregroundColor: PropTypes.string,\n    accentColor: PropTypes.string,\n    dispatch: PropTypes.func.isRequired,\n  };\n\n  handleClose = () => {\n    const { dispatch } = this.props;\n    dispatch(removePictureInPicture());\n  };\n\n  render () {\n    const { type, src, currentTime, accountId, statusId } = this.props;\n\n    if (!currentTime) {\n      return null;\n    }\n\n    let player;\n\n    if (type === 'video') {\n      player = (\n        <Video\n          src={src}\n          currentTime={this.props.currentTime}\n          volume={this.props.volume}\n          muted={this.props.muted}\n          autoPlay\n          inline\n          alwaysVisible\n        />\n      );\n    } else if (type === 'audio') {\n      player = (\n        <Audio\n          src={src}\n          currentTime={this.props.currentTime}\n          volume={this.props.volume}\n          muted={this.props.muted}\n          poster={this.props.poster}\n          backgroundColor={this.props.backgroundColor}\n          foregroundColor={this.props.foregroundColor}\n          accentColor={this.props.accentColor}\n          autoPlay\n        />\n      );\n    }\n\n    return (\n      <div className='picture-in-picture'>\n        <Header accountId={accountId} statusId={statusId} onClose={this.handleClose} />\n\n        {player}\n\n        <Footer statusId={statusId} />\n      </div>\n    );\n  }\n\n}\n\nexport default connect(mapStateToProps)(PictureInPicture);\n","import logo from 'mastodon/../images/logo.svg';\n\nexport const WordmarkLogo: React.FC = () => (\n  <svg viewBox='0 0 261 66' className='logo logo--wordmark' role='img'>\n    <title>Mastodon</title>\n    <use xlinkHref='#logo-symbol-wordmark' />\n  </svg>\n);\n\nexport const SymbolLogo: React.FC = () => (\n  <img src={logo} alt='Mastodon' className='logo logo--icon' />\n);\n","import PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport { FormattedMessage, defineMessages, injectIntl } from 'react-intl';\n\nimport { Link, withRouter } from 'react-router-dom';\n\nimport { connect } from 'react-redux';\n\nimport { ReactComponent as SearchIcon } from '@material-symbols/svg-600/outlined/search.svg';\n\nimport { openModal } from 'mastodon/actions/modal';\nimport { fetchServer } from 'mastodon/actions/server';\nimport { Avatar } from 'mastodon/components/avatar';\nimport { Icon } from 'mastodon/components/icon';\nimport { WordmarkLogo, SymbolLogo } from 'mastodon/components/logo';\nimport { registrationsOpen, me, sso_redirect } from 'mastodon/initial_state';\n\nconst Account = connect(state => ({\n  account: state.getIn(['accounts', me]),\n}))(({ account }) => (\n  <Link to={`/@${account.get('acct')}`} title={account.get('acct')}>\n    <Avatar account={account} size={35} />\n  </Link>\n));\n\nconst messages = defineMessages({\n  search: { id: 'navigation_bar.search', defaultMessage: 'Search' },\n});\n\nconst mapStateToProps = (state) => ({\n  signupUrl: state.getIn(['server', 'server', 'registrations', 'url'], null) || '/auth/sign_up',\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  openClosedRegistrationsModal() {\n    dispatch(openModal({ modalType: 'CLOSED_REGISTRATIONS' }));\n  },\n  dispatchServer() {\n    dispatch(fetchServer());\n  }\n});\n\nclass Header extends PureComponent {\n\n  static contextTypes = {\n    identity: PropTypes.object,\n  };\n\n  static propTypes = {\n    openClosedRegistrationsModal: PropTypes.func,\n    location: PropTypes.object,\n    signupUrl: PropTypes.string.isRequired,\n    dispatchServer: PropTypes.func,\n    intl: PropTypes.object.isRequired,\n  };\n\n  componentDidMount () {\n    const { dispatchServer } = this.props;\n    dispatchServer();\n  }\n\n  render () {\n    const { signedIn } = this.context.identity;\n    const { location, openClosedRegistrationsModal, signupUrl, intl } = this.props;\n\n    let content;\n\n    if (signedIn) {\n      content = (\n        <>\n          {location.pathname !== '/search' && <Link to='/search' className='button button-secondary' aria-label={intl.formatMessage(messages.search)}><Icon id='search' icon={SearchIcon} /></Link>}\n          {location.pathname !== '/publish' && <Link to='/publish' className='button button-secondary'><FormattedMessage id='compose_form.publish_form' defaultMessage='New post' /></Link>}\n          <Account />\n        </>\n      );\n    } else {\n\n      if (sso_redirect) {\n        content = (\n          <a href={sso_redirect} data-method='post' className='button button--block button-tertiary'><FormattedMessage id='sign_in_banner.sso_redirect' defaultMessage='Login or Register' /></a>\n        );\n      } else {\n        let signupButton;\n\n        if (registrationsOpen) {\n          signupButton = (\n            <a href={signupUrl} className='button'>\n              <FormattedMessage id='sign_in_banner.create_account' defaultMessage='Create account' />\n            </a>\n          );\n        } else {\n          signupButton = (\n            <button className='button' onClick={openClosedRegistrationsModal}>\n              <FormattedMessage id='sign_in_banner.create_account' defaultMessage='Create account' />\n            </button>\n          );\n        }\n\n        content = (\n          <>\n            {signupButton}\n            <a href='/auth/sign_in' className='button button-tertiary'><FormattedMessage id='sign_in_banner.sign_in' defaultMessage='Login' /></a>\n          </>\n        );\n      }\n    }\n\n    return (\n      <div className='ui__header'>\n        <Link to='/' className='ui__header__logo'>\n          <WordmarkLogo />\n          <SymbolLogo />\n        </Link>\n\n        <div className='ui__header__links'>\n          {content}\n        </div>\n      </div>\n    );\n  }\n\n}\n\nexport default injectIntl(withRouter(connect(mapStateToProps, mapDispatchToProps)(Header)));\n","import PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport { FormattedMessage } from 'react-intl';\n\nimport spring from 'react-motion/lib/spring';\n\nimport Motion from '../util/optional_motion';\n\nexport default class UploadArea extends PureComponent {\n\n  static propTypes = {\n    active: PropTypes.bool,\n    onClose: PropTypes.func,\n  };\n\n  handleKeyUp = (e) => {\n    const keyCode = e.keyCode;\n    if (this.props.active) {\n      switch(keyCode) {\n      case 27:\n        e.preventDefault();\n        e.stopPropagation();\n        this.props.onClose();\n        break;\n      }\n    }\n  };\n\n  componentDidMount () {\n    window.addEventListener('keyup', this.handleKeyUp, false);\n  }\n\n  componentWillUnmount () {\n    window.removeEventListener('keyup', this.handleKeyUp);\n  }\n\n  render () {\n    const { active } = this.props;\n\n    return (\n      <Motion defaultStyle={{ backgroundOpacity: 0, backgroundScale: 0.95 }} style={{ backgroundOpacity: spring(active ? 1 : 0, { stiffness: 150, damping: 15 }), backgroundScale: spring(active ? 1 : 0.95, { stiffness: 200, damping: 3 }) }}>\n        {({ backgroundOpacity, backgroundScale }) => (\n          <div className='upload-area' style={{ visibility: active ? 'visible' : 'hidden', opacity: backgroundOpacity }}>\n            <div className='upload-area__drop'>\n              <div className='upload-area__background' style={{ transform: `scale(${backgroundScale})` }} />\n              <div className='upload-area__content'><FormattedMessage id='upload_area.title' defaultMessage='Drag & drop to upload' /></div>\n            </div>\n          </div>\n        )}\n      </Motion>\n    );\n  }\n\n}\n","import Column from '../../../components/column';\nimport ColumnHeader from '../../../components/column_header';\n\ninterface Props {\n  multiColumn?: boolean;\n}\n\nexport const ColumnLoading: React.FC<Props> = (otherProps) => (\n  <Column>\n    <ColumnHeader {...otherProps} />\n    <div className='scrollable' />\n  </Column>\n);\n","import PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport { FormattedMessage, defineMessages, injectIntl } from 'react-intl';\n\nimport { Link } from 'react-router-dom';\n\nimport { connect } from 'react-redux';\n\nimport { fetchServer } from 'mastodon/actions/server';\nimport { ServerHeroImage } from 'mastodon/components/server_hero_image';\nimport { ShortNumber } from 'mastodon/components/short_number';\nimport { Skeleton } from 'mastodon/components/skeleton';\nimport Account from 'mastodon/containers/account_container';\nimport { domain } from 'mastodon/initial_state';\n\nconst messages = defineMessages({\n  aboutActiveUsers: { id: 'server_banner.about_active_users', defaultMessage: 'People using this server during the last 30 days (Monthly Active Users)' },\n});\n\nconst mapStateToProps = state => ({\n  server: state.getIn(['server', 'server']),\n});\n\nclass ServerBanner extends PureComponent {\n\n  static propTypes = {\n    server: PropTypes.object,\n    dispatch: PropTypes.func,\n    intl: PropTypes.object,\n  };\n\n  componentDidMount () {\n    const { dispatch } = this.props;\n    dispatch(fetchServer());\n  }\n\n  render () {\n    const { server, intl } = this.props;\n    const isLoading = server.get('isLoading');\n\n    return (\n      <div className='server-banner'>\n        <div className='server-banner__introduction'>\n          <FormattedMessage id='server_banner.introduction' defaultMessage='{domain} is part of the decentralized social network powered by {mastodon}.' values={{ domain: <strong>{domain}</strong>, mastodon: <a href='https://joinmastodon.org' target='_blank'>Mastodon</a> }} />\n        </div>\n\n        <ServerHeroImage blurhash={server.getIn(['thumbnail', 'blurhash'])} src={server.getIn(['thumbnail', 'url'])} className='server-banner__hero' />\n\n        <div className='server-banner__description'>\n          {isLoading ? (\n            <>\n              <Skeleton width='100%' />\n              <br />\n              <Skeleton width='100%' />\n              <br />\n              <Skeleton width='70%' />\n            </>\n          ) : server.get('description')}\n        </div>\n\n        <div className='server-banner__meta'>\n          <div className='server-banner__meta__column'>\n            <h4><FormattedMessage id='server_banner.administered_by' defaultMessage='Administered by:' /></h4>\n\n            <Account id={server.getIn(['contact', 'account', 'id'])} size={36} minimal />\n          </div>\n\n          <div className='server-banner__meta__column'>\n            <h4><FormattedMessage id='server_banner.server_stats' defaultMessage='Server stats:' /></h4>\n\n            {isLoading ? (\n              <>\n                <strong className='server-banner__number'><Skeleton width='10ch' /></strong>\n                <br />\n                <span className='server-banner__number-label'><Skeleton width='5ch' /></span>\n              </>\n            ) : (\n              <>\n                <strong className='server-banner__number'><ShortNumber value={server.getIn(['usage', 'users', 'active_month'])} /></strong>\n                <br />\n                <span className='server-banner__number-label' title={intl.formatMessage(messages.aboutActiveUsers)}><FormattedMessage id='server_banner.active_users' defaultMessage='active users' /></span>\n              </>\n            )}\n          </div>\n        </div>\n\n        <hr className='spacer' />\n\n        <Link className='button button--block button-secondary' to='/about'><FormattedMessage id='server_banner.learn_more' defaultMessage='Learn more' /></Link>\n      </div>\n    );\n  }\n\n}\n\nexport default connect(mapStateToProps)(injectIntl(ServerBanner));\n","import PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport { connect } from 'react-redux';\n\nimport { changeComposing, mountCompose, unmountCompose } from 'mastodon/actions/compose';\nimport ServerBanner from 'mastodon/components/server_banner';\nimport ComposeFormContainer from 'mastodon/features/compose/containers/compose_form_container';\nimport NavigationContainer from 'mastodon/features/compose/containers/navigation_container';\nimport SearchContainer from 'mastodon/features/compose/containers/search_container';\n\nimport LinkFooter from './link_footer';\n\nclass ComposePanel extends PureComponent {\n\n  static contextTypes = {\n    identity: PropTypes.object.isRequired,\n  };\n\n  static propTypes = {\n    dispatch: PropTypes.func.isRequired,\n  };\n\n  onFocus = () => {\n    const { dispatch } = this.props;\n    dispatch(changeComposing(true));\n  };\n\n  onBlur = () => {\n    const { dispatch } = this.props;\n    dispatch(changeComposing(false));\n  };\n\n  componentDidMount () {\n    const { dispatch } = this.props;\n    dispatch(mountCompose());\n  }\n\n  componentWillUnmount () {\n    const { dispatch } = this.props;\n    dispatch(unmountCompose());\n  }\n\n  render() {\n    const { signedIn } = this.context.identity;\n\n    return (\n      <div className='compose-panel' onFocus={this.onFocus}>\n        <SearchContainer openInRoute />\n\n        {!signedIn && (\n          <>\n            <ServerBanner />\n            <div className='flex-spacer' />\n          </>\n        )}\n\n        {signedIn && (\n          <>\n            <NavigationContainer onClose={this.onBlur} />\n            <ComposeFormContainer singleColumn />\n          </>\n        )}\n\n        <LinkFooter />\n      </div>\n    );\n  }\n\n}\n\nexport default connect()(ComposePanel);\n","const DrawerLoading = () => (\n  <div className='drawer'>\n    <div className='drawer__pager'>\n      <div className='drawer__inner' />\n    </div>\n  </div>\n);\n\nexport default DrawerLoading;\n","import PropTypes from 'prop-types';\n\nimport { defineMessages, injectIntl, FormattedMessage } from 'react-intl';\n\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport ImmutablePureComponent from 'react-immutable-pure-component';\n\nimport Hashtag from 'mastodon/components/hashtag';\n\nconst messages = defineMessages({\n  lastStatusAt: { id: 'account.featured_tags.last_status_at', defaultMessage: 'Last post on {date}' },\n  empty: { id: 'account.featured_tags.last_status_never', defaultMessage: 'No posts' },\n});\n\nclass FeaturedTags extends ImmutablePureComponent {\n\n  static propTypes = {\n    account: ImmutablePropTypes.record,\n    featuredTags: ImmutablePropTypes.list,\n    tagged: PropTypes.string,\n    intl: PropTypes.object.isRequired,\n  };\n\n  render () {\n    const { account, featuredTags, intl } = this.props;\n\n    if (!account || account.get('suspended') || featuredTags.isEmpty()) {\n      return null;\n    }\n\n    return (\n      <div className='getting-started__trends'>\n        <h4><FormattedMessage id='account.featured_tags.title' defaultMessage=\"{name}'s featured hashtags\" values={{ name: <bdi dangerouslySetInnerHTML={{ __html: account.get('display_name_html') }} /> }} /></h4>\n\n        {featuredTags.take(3).map(featuredTag => (\n          <Hashtag\n            key={featuredTag.get('name')}\n            name={featuredTag.get('name')}\n            to={`/@${account.get('acct')}/tagged/${featuredTag.get('name')}`}\n            uses={featuredTag.get('statuses_count') * 1}\n            withGraph={false}\n            description={((featuredTag.get('statuses_count') * 1) > 0) ? intl.formatMessage(messages.lastStatusAt, { date: intl.formatDate(featuredTag.get('last_status_at'), { month: 'short', day: '2-digit' }) }) : intl.formatMessage(messages.empty)}\n          />\n        ))}\n      </div>\n    );\n  }\n\n}\n\nexport default injectIntl(FeaturedTags);\n","import { List as ImmutableList } from 'immutable';\nimport { connect } from 'react-redux';\n\nimport { makeGetAccount } from 'mastodon/selectors';\n\nimport FeaturedTags from '../components/featured_tags';\n\nconst mapStateToProps = () => {\n  const getAccount = makeGetAccount();\n\n  return (state, { accountId }) => ({\n    account: getAccount(state, accountId),\n    featuredTags: state.getIn(['user_lists', 'featured_tags', accountId, 'items'], ImmutableList()),\n  });\n};\n\nexport default connect(mapStateToProps)(FeaturedTags);\n","import PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport { connect } from 'react-redux';\n\nimport FeaturedTags from 'mastodon/features/account/containers/featured_tags_container';\nimport { normalizeForLookup } from 'mastodon/reducers/accounts_map';\n\nconst mapStateToProps = (state, { match: { params: { acct } } }) => {\n  const accountId = state.getIn(['accounts_map', normalizeForLookup(acct)]);\n\n  if (!accountId) {\n    return {\n      isLoading: true,\n    };\n  }\n\n  return {\n    accountId,\n    isLoading: false,\n  };\n};\n\nclass AccountNavigation extends PureComponent {\n\n  static propTypes = {\n    match: PropTypes.shape({\n      params: PropTypes.shape({\n        acct: PropTypes.string,\n        tagged: PropTypes.string,\n      }).isRequired,\n    }).isRequired,\n\n    accountId: PropTypes.string,\n    isLoading: PropTypes.bool,\n  };\n\n  render () {\n    const { accountId, isLoading, match: { params: { tagged } } } = this.props;\n\n    if (isLoading) {\n      return null;\n    }\n\n    return (\n      <>\n        <div className='flex-spacer' />\n        <FeaturedTags accountId={accountId} tagged={tagged} />\n      </>\n    );\n  }\n\n}\n\nexport default connect(mapStateToProps)(AccountNavigation);\n","import { Switch, Route } from 'react-router-dom';\n\nimport AccountNavigation from 'mastodon/features/account/navigation';\nimport Trends from 'mastodon/features/getting_started/containers/trends_container';\nimport { showTrends } from 'mastodon/initial_state';\n\nconst DefaultNavigation: React.FC = () =>\n  showTrends ? (\n    <>\n      <div className='flex-spacer' />\n      <Trends />\n    </>\n  ) : null;\n\nexport const NavigationPortal: React.FC = () => (\n  <Switch>\n    <Route path='/@:acct' exact component={AccountNavigation} />\n    <Route path='/@:acct/tagged/:tagged?' exact component={AccountNavigation} />\n    <Route path='/@:acct/with_replies' exact component={AccountNavigation} />\n    <Route path='/@:acct/followers' exact component={AccountNavigation} />\n    <Route path='/@:acct/following' exact component={AccountNavigation} />\n    <Route path='/@:acct/media' exact component={AccountNavigation} />\n    <Route component={DefaultNavigation} />\n  </Switch>\n);\n","import PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport { FormattedMessage, defineMessages, injectIntl } from 'react-intl';\n\nimport { Link } from 'react-router-dom';\n\nimport { connect } from 'react-redux';\n\nimport { openModal } from 'mastodon/actions/modal';\nimport { disabledAccountId, movedToAccountId, domain } from 'mastodon/initial_state';\nimport { logOut } from 'mastodon/utils/log_out';\n\nconst messages = defineMessages({\n  logoutMessage: { id: 'confirmations.logout.message', defaultMessage: 'Are you sure you want to log out?' },\n  logoutConfirm: { id: 'confirmations.logout.confirm', defaultMessage: 'Log out' },\n});\n\nconst mapStateToProps = (state) => ({\n  disabledAcct: state.getIn(['accounts', disabledAccountId, 'acct']),\n  movedToAcct: movedToAccountId ? state.getIn(['accounts', movedToAccountId, 'acct']) : undefined,\n});\n\nconst mapDispatchToProps = (dispatch, { intl }) => ({\n  onLogout () {\n    dispatch(openModal({\n      modalType: 'CONFIRM',\n      modalProps: {\n        message: intl.formatMessage(messages.logoutMessage),\n        confirm: intl.formatMessage(messages.logoutConfirm),\n        closeWhenConfirm: false,\n        onConfirm: () => logOut(),\n      },\n    }));\n  },\n});\n\nclass DisabledAccountBanner extends PureComponent {\n\n  static propTypes = {\n    disabledAcct: PropTypes.string.isRequired,\n    movedToAcct: PropTypes.string,\n    onLogout: PropTypes.func.isRequired,\n    intl: PropTypes.object.isRequired,\n  };\n\n  handleLogOutClick = e => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    this.props.onLogout();\n\n    return false;\n  };\n\n  render () {\n    const { disabledAcct, movedToAcct } = this.props;\n\n    const disabledAccountLink = (\n      <Link to={`/@${disabledAcct}`}>\n        {disabledAcct}@{domain}\n      </Link>\n    );\n\n    return (\n      <div className='sign-in-banner'>\n        <p>\n          {movedToAcct ? (\n            <FormattedMessage\n              id='moved_to_account_banner.text'\n              defaultMessage='Your account {disabledAccount} is currently disabled because you moved to {movedToAccount}.'\n              values={{\n                disabledAccount: disabledAccountLink,\n                movedToAccount: <Link to={`/@${movedToAcct}`}>{movedToAcct.includes('@') ? movedToAcct : `${movedToAcct}@${domain}`}</Link>,\n              }}\n            />\n          ) : (\n            <FormattedMessage\n              id='disabled_account_banner.text'\n              defaultMessage='Your account {disabledAccount} is currently disabled.'\n              values={{\n                disabledAccount: disabledAccountLink,\n              }}\n            />\n          )}\n        </p>\n        <a href='/auth/edit' className='button button--block'>\n          <FormattedMessage id='disabled_account_banner.account_settings' defaultMessage='Account settings' />\n        </a>\n        <button type='button' className='button button--block button-tertiary' onClick={this.handleLogOutClick}>\n          <FormattedMessage id='confirmations.logout.confirm' defaultMessage='Log out' />\n        </button>\n      </div>\n    );\n  }\n\n}\n\nexport default injectIntl(connect(mapStateToProps, mapDispatchToProps)(DisabledAccountBanner));\n","import PropTypes from 'prop-types';\nimport { Component } from 'react';\n\nimport { injectIntl, defineMessages } from 'react-intl';\n\nimport { List as ImmutableList } from 'immutable';\nimport { connect } from 'react-redux';\n\nimport { ReactComponent as PersonAddIcon } from '@material-symbols/svg-600/outlined/person_add.svg';\n\nimport { fetchFollowRequests } from 'mastodon/actions/accounts';\nimport { IconWithBadge } from 'mastodon/components/icon_with_badge';\nimport ColumnLink from 'mastodon/features/ui/components/column_link';\n\nconst messages = defineMessages({\n  text: { id: 'navigation_bar.follow_requests', defaultMessage: 'Follow requests' },\n});\n\nconst mapStateToProps = state => ({\n  count: state.getIn(['user_lists', 'follow_requests', 'items'], ImmutableList()).size,\n});\n\nclass FollowRequestsColumnLink extends Component {\n\n  static propTypes = {\n    dispatch: PropTypes.func.isRequired,\n    count: PropTypes.number.isRequired,\n    intl: PropTypes.object.isRequired,\n  };\n\n  componentDidMount () {\n    const { dispatch } = this.props;\n\n    dispatch(fetchFollowRequests());\n  }\n\n  render () {\n    const { count, intl } = this.props;\n\n    if (count === 0) {\n      return null;\n    }\n\n    return (\n      <ColumnLink\n        transparent\n        to='/follow_requests'\n        icon={<IconWithBadge className='column-link__icon' id='user-plus' icon={PersonAddIcon} count={count} />}\n        text={intl.formatMessage(messages.text)}\n      />\n    );\n  }\n\n}\n\nexport default injectIntl(connect(mapStateToProps)(FollowRequestsColumnLink));\n","import PropTypes from 'prop-types';\n\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport ImmutablePureComponent from 'react-immutable-pure-component';\nimport { connect } from 'react-redux';\nimport { createSelector } from 'reselect';\n\nimport { ReactComponent as ListAltIcon } from '@material-symbols/svg-600/outlined/list_alt.svg';\n\nimport { fetchLists } from 'mastodon/actions/lists';\n\nimport ColumnLink from './column_link';\n\nconst getOrderedLists = createSelector([state => state.get('lists')], lists => {\n  if (!lists) {\n    return lists;\n  }\n\n  return lists.toList().filter(item => !!item).sort((a, b) => a.get('title').localeCompare(b.get('title'))).take(4);\n});\n\nconst mapStateToProps = state => ({\n  lists: getOrderedLists(state),\n});\n\nclass ListPanel extends ImmutablePureComponent {\n\n  static propTypes = {\n    dispatch: PropTypes.func.isRequired,\n    lists: ImmutablePropTypes.list,\n  };\n\n  componentDidMount () {\n    const { dispatch } = this.props;\n    dispatch(fetchLists());\n  }\n\n  render () {\n    const { lists } = this.props;\n\n    if (!lists || lists.isEmpty()) {\n      return null;\n    }\n\n    return (\n      <div className='list-panel'>\n        <hr />\n\n        {lists.map(list => (\n          <ColumnLink icon='list-ul' iconComponent={ListAltIcon} key={list.get('id')} strict text={list.get('title')} to={`/lists/${list.get('id')}`} transparent />\n        ))}\n      </div>\n    );\n  }\n\n}\n\nexport default connect(mapStateToProps)(ListPanel);\n","import { connect } from 'react-redux';\n\nimport { ReactComponent as NotificationsIcon } from '@material-symbols/svg-600/outlined/notifications-fill.svg';\n\nimport { IconWithBadge } from 'mastodon/components/icon_with_badge';\n\n\nconst mapStateToProps = state => ({\n  count: state.getIn(['notifications', 'unread']),\n  id: 'bell',\n  icon: NotificationsIcon,\n});\n\nexport default connect(mapStateToProps)(IconWithBadge);\n","import { useCallback } from 'react';\n\nimport { FormattedMessage } from 'react-intl';\n\n\nimport { openModal } from 'mastodon/actions/modal';\nimport { registrationsOpen, sso_redirect } from 'mastodon/initial_state';\nimport { useAppDispatch, useAppSelector } from 'mastodon/store';\n\nconst SignInBanner = () => {\n  const dispatch = useAppDispatch();\n\n  const openClosedRegistrationsModal = useCallback(\n    () => dispatch(openModal({ modalType: 'CLOSED_REGISTRATIONS' })),\n    [dispatch],\n  );\n\n  let signupButton;\n\n  const signupUrl = useAppSelector((state) => state.getIn(['server', 'server', 'registrations', 'url'], null) || '/auth/sign_up');\n\n  if (sso_redirect) {\n    return (\n      <div className='sign-in-banner'>\n        <p><FormattedMessage id='sign_in_banner.text' defaultMessage='Login to follow profiles or hashtags, favorite, share and reply to posts. You can also interact from your account on a different server.' /></p>\n        <a href={sso_redirect} data-method='post' className='button button--block button-tertiary'><FormattedMessage id='sign_in_banner.sso_redirect' defaultMessage='Login or Register' /></a>\n      </div>\n    );\n  }\n\n  if (registrationsOpen) {\n    signupButton = (\n      <a href={signupUrl} className='button button--block'>\n        <FormattedMessage id='sign_in_banner.create_account' defaultMessage='Create account' />\n      </a>\n    );\n  } else {\n    signupButton = (\n      <button className='button button--block' onClick={openClosedRegistrationsModal}>\n        <FormattedMessage id='sign_in_banner.create_account' defaultMessage='Create account' />\n      </button>\n    );\n  }\n\n  return (\n    <div className='sign-in-banner'>\n      <p><FormattedMessage id='sign_in_banner.text' defaultMessage='Login to follow profiles or hashtags, favorite, share and reply to posts. You can also interact from your account on a different server.' /></p>\n      {signupButton}\n      <a href='/auth/sign_in' className='button button--block button-tertiary'><FormattedMessage id='sign_in_banner.sign_in' defaultMessage='Login' /></a>\n    </div>\n  );\n};\n\nexport default SignInBanner;\n","import PropTypes from 'prop-types';\nimport { Component } from 'react';\n\nimport { defineMessages, injectIntl } from 'react-intl';\n\nimport { Link } from 'react-router-dom';\n\nimport { ReactComponent as AlternateEmailIcon } from '@material-symbols/svg-600/outlined/alternate_email.svg';\nimport { ReactComponent as BookmarksIcon } from '@material-symbols/svg-600/outlined/bookmarks-fill.svg';\nimport { ReactComponent as HomeIcon } from '@material-symbols/svg-600/outlined/home-fill.svg';\nimport { ReactComponent as ListAltIcon } from '@material-symbols/svg-600/outlined/list_alt.svg';\nimport { ReactComponent as MoreHorizIcon } from '@material-symbols/svg-600/outlined/more_horiz.svg';\nimport { ReactComponent as PublicIcon } from '@material-symbols/svg-600/outlined/public.svg';\nimport { ReactComponent as SearchIcon } from '@material-symbols/svg-600/outlined/search.svg';\nimport { ReactComponent as SettingsIcon } from '@material-symbols/svg-600/outlined/settings-fill.svg';\nimport { ReactComponent as StarIcon } from '@material-symbols/svg-600/outlined/star-fill.svg';\nimport { ReactComponent as TagIcon } from '@material-symbols/svg-600/outlined/tag.svg';\n\nimport { WordmarkLogo } from 'mastodon/components/logo';\nimport { NavigationPortal } from 'mastodon/components/navigation_portal';\nimport { timelinePreview, trendsEnabled } from 'mastodon/initial_state';\nimport { transientSingleColumn } from 'mastodon/is_mobile';\n\nimport ColumnLink from './column_link';\nimport DisabledAccountBanner from './disabled_account_banner';\nimport FollowRequestsColumnLink from './follow_requests_column_link';\nimport ListPanel from './list_panel';\nimport NotificationsCounterIcon from './notifications_counter_icon';\nimport SignInBanner from './sign_in_banner';\n\nconst messages = defineMessages({\n  home: { id: 'tabs_bar.home', defaultMessage: 'Home' },\n  notifications: { id: 'tabs_bar.notifications', defaultMessage: 'Notifications' },\n  explore: { id: 'explore.title', defaultMessage: 'Explore' },\n  firehose: { id: 'column.firehose', defaultMessage: 'Live feeds' },\n  direct: { id: 'navigation_bar.direct', defaultMessage: 'Private mentions' },\n  favourites: { id: 'navigation_bar.favourites', defaultMessage: 'Favorites' },\n  bookmarks: { id: 'navigation_bar.bookmarks', defaultMessage: 'Bookmarks' },\n  lists: { id: 'navigation_bar.lists', defaultMessage: 'Lists' },\n  preferences: { id: 'navigation_bar.preferences', defaultMessage: 'Preferences' },\n  followsAndFollowers: { id: 'navigation_bar.follows_and_followers', defaultMessage: 'Follows and followers' },\n  about: { id: 'navigation_bar.about', defaultMessage: 'About' },\n  search: { id: 'navigation_bar.search', defaultMessage: 'Search' },\n  advancedInterface: { id: 'navigation_bar.advanced_interface', defaultMessage: 'Open in advanced web interface' },\n  openedInClassicInterface: { id: 'navigation_bar.opened_in_classic_interface', defaultMessage: 'Posts, accounts, and other specific pages are opened by default in the classic web interface.' },\n});\n\nclass NavigationPanel extends Component {\n\n  static contextTypes = {\n    identity: PropTypes.object.isRequired,\n  };\n\n  static propTypes = {\n    intl: PropTypes.object.isRequired,\n  };\n\n  isFirehoseActive = (match, location) => {\n    return match || location.pathname.startsWith('/public');\n  };\n\n  render () {\n    const { intl } = this.props;\n    const { signedIn, disabledAccountId } = this.context.identity;\n\n    let banner = undefined;\n\n    if(transientSingleColumn)\n      banner = (<div className='switch-to-advanced'>\n        {intl.formatMessage(messages.openedInClassicInterface)}\n        {\" \"}\n        <a href={`/deck${location.pathname}`} className='switch-to-advanced__toggle'>\n          {intl.formatMessage(messages.advancedInterface)}\n        </a>\n      </div>);\n\n    return (\n      <div className='navigation-panel'>\n        <div className='navigation-panel__logo'>\n          <Link to='/' className='column-link column-link--logo'><WordmarkLogo /></Link>\n          {!banner && <hr />}\n        </div>\n\n        {banner &&\n          <div class='navigation-panel__banner'>\n            {banner}\n          </div>\n        }\n\n        {signedIn && (\n          <>\n            <ColumnLink transparent to='/home' icon='home' iconComponent={HomeIcon} text={intl.formatMessage(messages.home)} />\n            <ColumnLink transparent to='/notifications' icon={<NotificationsCounterIcon className='column-link__icon' />} text={intl.formatMessage(messages.notifications)} />\n            <FollowRequestsColumnLink />\n          </>\n        )}\n\n        {trendsEnabled ? (\n          <ColumnLink transparent to='/explore' icon='hashtag' iconComponent={TagIcon} text={intl.formatMessage(messages.explore)} />\n        ) : (\n          <ColumnLink transparent to='/search' icon='search' iconComponent={SearchIcon} text={intl.formatMessage(messages.search)} />\n        )}\n\n        {(signedIn || timelinePreview) && (\n          <ColumnLink transparent to='/public/local' isActive={this.isFirehoseActive} icon='globe' iconComponent={PublicIcon} text={intl.formatMessage(messages.firehose)} />\n        )}\n\n        {!signedIn && (\n          <div className='navigation-panel__sign-in-banner'>\n            <hr />\n            { disabledAccountId ? <DisabledAccountBanner /> : <SignInBanner /> }\n          </div>\n        )}\n\n        {signedIn && (\n          <>\n            <ColumnLink transparent to='/conversations' icon='at' iconComponent={AlternateEmailIcon} text={intl.formatMessage(messages.direct)} />\n            <ColumnLink transparent to='/bookmarks' icon='bookmarks' iconComponent={BookmarksIcon} text={intl.formatMessage(messages.bookmarks)} />\n            <ColumnLink transparent to='/favourites' icon='star' iconComponent={StarIcon} text={intl.formatMessage(messages.favourites)} />\n            <ColumnLink transparent to='/lists' icon='list-ul' iconComponent={ListAltIcon} text={intl.formatMessage(messages.lists)} />\n\n            <ListPanel />\n\n            <hr />\n\n            <ColumnLink transparent href='/settings/preferences' icon='cog' iconComponent={SettingsIcon} text={intl.formatMessage(messages.preferences)} />\n          </>\n        )}\n\n        <div className='navigation-panel__legal'>\n          <hr />\n          <ColumnLink transparent to='/about' icon='ellipsis-h' iconComponent={MoreHorizIcon} text={intl.formatMessage(messages.about)} />\n        </div>\n\n        <NavigationPortal />\n      </div>\n    );\n  }\n\n}\n\nexport default injectIntl(NavigationPanel);\n","import PropTypes from 'prop-types';\nimport { Children, cloneElement, useCallback } from 'react';\n\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport ImmutablePureComponent from 'react-immutable-pure-component';\n\nimport { supportsPassiveEvents } from 'detect-passive-events';\n\nimport { scrollRight } from '../../../scroll';\nimport BundleContainer from '../containers/bundle_container';\nimport {\n  Compose,\n  Notifications,\n  HomeTimeline,\n  CommunityTimeline,\n  PublicTimeline,\n  HashtagTimeline,\n  DirectTimeline,\n  FavouritedStatuses,\n  BookmarkedStatuses,\n  ListTimeline,\n  Directory,\n} from '../util/async-components';\nimport { useColumnsContext } from '../util/columns_context';\n\nimport BundleColumnError from './bundle_column_error';\nimport { ColumnLoading } from './column_loading';\nimport ComposePanel from './compose_panel';\nimport DrawerLoading from './drawer_loading';\nimport NavigationPanel from './navigation_panel';\n\nconst componentMap = {\n  'COMPOSE': Compose,\n  'HOME': HomeTimeline,\n  'NOTIFICATIONS': Notifications,\n  'PUBLIC': PublicTimeline,\n  'REMOTE': PublicTimeline,\n  'COMMUNITY': CommunityTimeline,\n  'HASHTAG': HashtagTimeline,\n  'DIRECT': DirectTimeline,\n  'FAVOURITES': FavouritedStatuses,\n  'BOOKMARKS': BookmarkedStatuses,\n  'LIST': ListTimeline,\n  'DIRECTORY': Directory,\n};\n\nconst TabsBarPortal = () => {\n  const {setTabsBarElement} = useColumnsContext();\n\n  const setRef = useCallback((element) => {\n    if(element)\n      setTabsBarElement(element);\n  }, [setTabsBarElement]);\n\n  return <div id='tabs-bar__portal' ref={setRef} />;\n};\n\nexport default class ColumnsArea extends ImmutablePureComponent {\n  static propTypes = {\n    columns: ImmutablePropTypes.list.isRequired,\n    isModalOpen: PropTypes.bool.isRequired,\n    singleColumn: PropTypes.bool,\n    children: PropTypes.node,\n  };\n\n  // Corresponds to (max-width: $no-gap-breakpoint + 285px - 1px) in SCSS\n  mediaQuery = 'matchMedia' in window && window.matchMedia('(max-width: 1174px)');\n\n  state = {\n    renderComposePanel: !(this.mediaQuery && this.mediaQuery.matches),\n  };\n\n  componentDidMount() {\n    if (!this.props.singleColumn) {\n      this.node.addEventListener('wheel', this.handleWheel, supportsPassiveEvents ? { passive: true } : false);\n    }\n\n    if (this.mediaQuery) {\n      if (this.mediaQuery.addEventListener) {\n        this.mediaQuery.addEventListener('change', this.handleLayoutChange);\n      } else {\n        this.mediaQuery.addListener(this.handleLayoutChange);\n      }\n      this.setState({ renderComposePanel: !this.mediaQuery.matches });\n    }\n\n    this.isRtlLayout = document.getElementsByTagName('body')[0].classList.contains('rtl');\n  }\n\n  UNSAFE_componentWillUpdate(nextProps) {\n    if (this.props.singleColumn !== nextProps.singleColumn && nextProps.singleColumn) {\n      this.node.removeEventListener('wheel', this.handleWheel);\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.singleColumn !== prevProps.singleColumn && !this.props.singleColumn) {\n      this.node.addEventListener('wheel', this.handleWheel, supportsPassiveEvents ? { passive: true } : false);\n    }\n  }\n\n  componentWillUnmount () {\n    if (!this.props.singleColumn) {\n      this.node.removeEventListener('wheel', this.handleWheel);\n    }\n\n    if (this.mediaQuery) {\n      if (this.mediaQuery.removeEventListener) {\n        this.mediaQuery.removeEventListener('change', this.handleLayoutChange);\n      } else {\n        this.mediaQuery.removeListener(this.handleLayoutChange);\n      }\n    }\n  }\n\n  handleChildrenContentChange() {\n    if (!this.props.singleColumn) {\n      const modifier = this.isRtlLayout ? -1 : 1;\n      this._interruptScrollAnimation = scrollRight(this.node, (this.node.scrollWidth - window.innerWidth) * modifier);\n    }\n  }\n\n  handleLayoutChange = (e) => {\n    this.setState({ renderComposePanel: !e.matches });\n  };\n\n  handleWheel = () => {\n    if (typeof this._interruptScrollAnimation !== 'function') {\n      return;\n    }\n\n    this._interruptScrollAnimation();\n  };\n\n  setRef = (node) => {\n    this.node = node;\n  };\n\n  renderLoading = columnId => () => {\n    return columnId === 'COMPOSE' ? <DrawerLoading /> : <ColumnLoading multiColumn />;\n  };\n\n  renderError = (props) => {\n    return <BundleColumnError multiColumn errorType='network' {...props} />;\n  };\n\n  render () {\n    const { columns, children, singleColumn, isModalOpen } = this.props;\n    const { renderComposePanel } = this.state;\n\n    if (singleColumn) {\n      return (\n        <div className='columns-area__panels'>\n          <div className='columns-area__panels__pane columns-area__panels__pane--compositional'>\n            <div className='columns-area__panels__pane__inner'>\n              {renderComposePanel && <ComposePanel />}\n            </div>\n          </div>\n\n          <div className='columns-area__panels__main'>\n            <div className='tabs-bar__wrapper'><TabsBarPortal /></div>\n            <div className='columns-area columns-area--mobile'>{children}</div>\n          </div>\n\n          <div className='columns-area__panels__pane columns-area__panels__pane--start columns-area__panels__pane--navigational'>\n            <div className='columns-area__panels__pane__inner'>\n              <NavigationPanel />\n            </div>\n          </div>\n        </div>\n      );\n    }\n\n    return (\n      <div className={`columns-area ${ isModalOpen ? 'unscrollable' : '' }`} ref={this.setRef}>\n        {columns.map(column => {\n          const params = column.get('params', null) === null ? null : column.get('params').toJS();\n          const other  = params && params.other ? params.other : {};\n\n          return (\n            <BundleContainer key={column.get('uuid')} fetchComponent={componentMap[column.get('id')]} loading={this.renderLoading(column.get('id'))} error={this.renderError}>\n              {SpecificComponent => <SpecificComponent columnId={column.get('uuid')} params={params} multiColumn {...other} />}\n            </BundleContainer>\n          );\n        })}\n\n        {Children.map(children, child => cloneElement(child, { multiColumn: true }))}\n      </div>\n    );\n  }\n\n}\n","import { connect } from 'react-redux';\n\nimport ColumnsArea from '../components/columns_area';\n\nconst mapStateToProps = state => ({\n  columns: state.getIn(['settings', 'columns']),\n  isModalOpen: !!state.get('modal').modalType,\n});\n\nexport default connect(mapStateToProps, null, null, { forwardRef: true })(ColumnsArea);\n","import PropTypes from 'prop-types';\nimport { Component, cloneElement, Children } from 'react';\n\nimport { Switch, Route, useLocation } from 'react-router-dom';\n\nimport StackTrace from 'stacktrace-js';\n\nimport BundleColumnError from '../components/bundle_column_error';\nimport { ColumnLoading } from '../components/column_loading';\nimport BundleContainer from '../containers/bundle_container';\n\n// Small wrapper to pass multiColumn to the route components\nexport const WrappedSwitch = ({ multiColumn, children }) => {\n  const  location = useLocation();\n\n  const decklessLocation = multiColumn && location.pathname.startsWith('/deck')\n    ? {...location, pathname: location.pathname.slice(5)}\n    : location;\n\n  return (\n    <Switch location={decklessLocation}>\n      {Children.map(children, child => child ? cloneElement(child, { multiColumn }) : null)}\n    </Switch>\n  );\n};\n\n\nWrappedSwitch.propTypes = {\n  multiColumn: PropTypes.bool,\n  children: PropTypes.node,\n};\n\n// Small Wrapper to extract the params from the route and pass\n// them to the rendered component, together with the content to\n// be rendered inside (the children)\nexport class WrappedRoute extends Component {\n\n  static propTypes = {\n    component: PropTypes.func.isRequired,\n    content: PropTypes.node,\n    multiColumn: PropTypes.bool,\n    componentParams: PropTypes.object,\n  };\n\n  static defaultProps = {\n    componentParams: {},\n  };\n\n  static getDerivedStateFromError () {\n    return {\n      hasError: true,\n    };\n  }\n\n  state = {\n    hasError: false,\n    stacktrace: '',\n  };\n\n  componentDidCatch (error) {\n    StackTrace.fromError(error).then(stackframes => {\n      this.setState({ stacktrace: error.toString() + '\\n' + stackframes.map(frame => frame.toString()).join('\\n') });\n    }).catch(err => {\n      console.error(err);\n    });\n  }\n\n  renderComponent = ({ match }) => {\n    const { component, content, multiColumn, componentParams } = this.props;\n    const { hasError, stacktrace } = this.state;\n\n    if (hasError) {\n      return (\n        <BundleColumnError\n          stacktrace={stacktrace}\n          multiColumn={multiColumn}\n          errorType='error'\n        />\n      );\n    }\n\n    return (\n      <BundleContainer fetchComponent={component} loading={this.renderLoading} error={this.renderError}>\n        {Component => <Component params={match.params} multiColumn={multiColumn} {...componentParams}>{content}</Component>}\n      </BundleContainer>\n    );\n  };\n\n  renderLoading = () => {\n    const { multiColumn } = this.props;\n\n    return <ColumnLoading multiColumn={multiColumn} />;\n  };\n\n  renderError = (props) => {\n    return <BundleColumnError {...props} errorType='network' />;\n  };\n\n  render () {\n    const { component: Component, content, ...rest } = this.props;\n\n    return <Route {...rest} render={this.renderComponent} />;\n  }\n\n}\n","import PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport { defineMessages, injectIntl } from 'react-intl';\n\nimport classNames from 'classnames';\nimport { Redirect, Route, withRouter } from 'react-router-dom';\n\nimport { connect } from 'react-redux';\n\nimport { debounce } from 'lodash';\nimport { HotKeys } from 'react-hotkeys';\n\nimport { focusApp, unfocusApp, changeLayout } from 'mastodon/actions/app';\nimport { synchronouslySubmitMarkers, submitMarkers, fetchMarkers } from 'mastodon/actions/markers';\nimport { INTRODUCTION_VERSION } from 'mastodon/actions/onboarding';\nimport PictureInPicture from 'mastodon/features/picture_in_picture';\nimport { layoutFromWindow } from 'mastodon/is_mobile';\nimport { WithRouterPropTypes } from 'mastodon/utils/react_router';\n\nimport { uploadCompose, resetCompose, changeComposeSpoilerness } from '../../actions/compose';\nimport { clearHeight } from '../../actions/height_cache';\nimport { expandNotifications } from '../../actions/notifications';\nimport { fetchServer, fetchServerTranslationLanguages } from '../../actions/server';\nimport { expandHomeTimeline } from '../../actions/timelines';\nimport initialState, { me, owner, singleUserMode, trendsEnabled, trendsAsLanding } from '../../initial_state';\n\nimport BundleColumnError from './components/bundle_column_error';\nimport Header from './components/header';\nimport UploadArea from './components/upload_area';\nimport ColumnsAreaContainer from './containers/columns_area_container';\nimport LoadingBarContainer from './containers/loading_bar_container';\nimport ModalContainer from './containers/modal_container';\nimport NotificationsContainer from './containers/notifications_container';\nimport {\n  Compose,\n  Status,\n  GettingStarted,\n  KeyboardShortcuts,\n  Firehose,\n  AccountTimeline,\n  AccountGallery,\n  HomeTimeline,\n  Followers,\n  Following,\n  Reblogs,\n  Favourites,\n  DirectTimeline,\n  HashtagTimeline,\n  Notifications,\n  FollowRequests,\n  FavouritedStatuses,\n  BookmarkedStatuses,\n  FollowedTags,\n  ListTimeline,\n  Blocks,\n  DomainBlocks,\n  Mutes,\n  PinnedStatuses,\n  Lists,\n  Directory,\n  Explore,\n  Onboarding,\n  About,\n  PrivacyPolicy,\n} from './util/async-components';\nimport { ColumnsContextProvider } from './util/columns_context';\nimport { WrappedSwitch, WrappedRoute } from './util/react_router_helpers';\n// Dummy import, to make sure that <Status /> ends up in the application bundle.\n// Without this it ends up in ~8 very commonly used bundles.\nimport '../../components/status';\n\nconst messages = defineMessages({\n  beforeUnload: { id: 'ui.beforeunload', defaultMessage: 'Your draft will be lost if you leave Mastodon.' },\n});\n\nconst mapStateToProps = state => ({\n  layout: state.getIn(['meta', 'layout']),\n  isComposing: state.getIn(['compose', 'is_composing']),\n  hasComposingText: state.getIn(['compose', 'text']).trim().length !== 0,\n  hasMediaAttachments: state.getIn(['compose', 'media_attachments']).size > 0,\n  canUploadMore: !state.getIn(['compose', 'media_attachments']).some(x => ['audio', 'video'].includes(x.get('type'))) && state.getIn(['compose', 'media_attachments']).size < 4,\n  dropdownMenuIsOpen: state.dropdownMenu.openId !== null,\n  firstLaunch: state.getIn(['settings', 'introductionVersion'], 0) < INTRODUCTION_VERSION,\n  username: state.getIn(['accounts', me, 'username']),\n});\n\nconst keyMap = {\n  help: '?',\n  new: 'n',\n  search: 's',\n  forceNew: 'option+n',\n  toggleComposeSpoilers: 'option+x',\n  focusColumn: ['1', '2', '3', '4', '5', '6', '7', '8', '9'],\n  reply: 'r',\n  favourite: 'f',\n  boost: 'b',\n  mention: 'm',\n  open: ['enter', 'o'],\n  openProfile: 'p',\n  moveDown: ['down', 'j'],\n  moveUp: ['up', 'k'],\n  back: 'backspace',\n  goToHome: 'g h',\n  goToNotifications: 'g n',\n  goToLocal: 'g l',\n  goToFederated: 'g t',\n  goToDirect: 'g d',\n  goToStart: 'g s',\n  goToFavourites: 'g f',\n  goToPinned: 'g p',\n  goToProfile: 'g u',\n  goToBlocked: 'g b',\n  goToMuted: 'g m',\n  goToRequests: 'g r',\n  toggleHidden: 'x',\n  toggleSensitive: 'h',\n  openMedia: 'e',\n};\n\nclass SwitchingColumnsArea extends PureComponent {\n\n  static contextTypes = {\n    identity: PropTypes.object,\n  };\n\n  static propTypes = {\n    children: PropTypes.node,\n    location: PropTypes.object,\n    singleColumn: PropTypes.bool,\n  };\n\n  UNSAFE_componentWillMount () {\n    if (this.props.singleColumn) {\n      document.body.classList.toggle('layout-single-column', true);\n      document.body.classList.toggle('layout-multiple-columns', false);\n    } else {\n      document.body.classList.toggle('layout-single-column', false);\n      document.body.classList.toggle('layout-multiple-columns', true);\n    }\n  }\n\n  componentDidUpdate (prevProps) {\n    if (![this.props.location.pathname, '/'].includes(prevProps.location.pathname)) {\n      this.node.handleChildrenContentChange();\n    }\n\n    if (prevProps.singleColumn !== this.props.singleColumn) {\n      document.body.classList.toggle('layout-single-column', this.props.singleColumn);\n      document.body.classList.toggle('layout-multiple-columns', !this.props.singleColumn);\n    }\n  }\n\n  setRef = c => {\n    if (c) {\n      this.node = c;\n    }\n  };\n\n  render () {\n    const { children, singleColumn } = this.props;\n    const { signedIn } = this.context.identity;\n    const pathName = this.props.location.pathname;\n\n    let redirect;\n\n    if (signedIn) {\n      if (singleColumn) {\n        redirect = <Redirect from='/' to='/home' exact />;\n      } else {\n        redirect = <Redirect from='/' to='/deck/getting-started' exact />;\n      }\n    } else if (singleUserMode && owner && initialState?.accounts[owner]) {\n      redirect = <Redirect from='/' to={`/@${initialState.accounts[owner].username}`} exact />;\n    } else if (trendsEnabled && trendsAsLanding) {\n      redirect = <Redirect from='/' to='/explore' exact />;\n    } else {\n      redirect = <Redirect from='/' to='/about' exact />;\n    }\n\n    return (\n      <ColumnsContextProvider multiColumn={!singleColumn}>\n        <ColumnsAreaContainer ref={this.setRef} singleColumn={singleColumn}>\n          <WrappedSwitch>\n            {redirect}\n\n            {singleColumn ? <Redirect from='/deck' to='/home' exact /> : null}\n            {singleColumn && pathName.startsWith('/deck/') ? <Redirect from={pathName} to={pathName.slice(5)} /> : null}\n            {/* Redirect old bookmarks (without /deck) with home-like routes to the advanced interface */}\n            {!singleColumn && pathName === '/getting-started' ? <Redirect from='/getting-started' to='/deck/getting-started' exact /> : null}\n            {!singleColumn && pathName === '/home' ? <Redirect from='/home' to='/deck/getting-started' exact /> : null}\n\n            <WrappedRoute path='/getting-started' component={GettingStarted} content={children} />\n            <WrappedRoute path='/keyboard-shortcuts' component={KeyboardShortcuts} content={children} />\n            <WrappedRoute path='/about' component={About} content={children} />\n            <WrappedRoute path='/privacy-policy' component={PrivacyPolicy} content={children} />\n\n            <WrappedRoute path={['/home', '/timelines/home']} component={HomeTimeline} content={children} />\n            <Redirect from='/timelines/public' to='/public' exact />\n            <Redirect from='/timelines/public/local' to='/public/local' exact />\n            <WrappedRoute path='/public' exact component={Firehose} componentParams={{ feedType: 'public' }} content={children} />\n            <WrappedRoute path='/public/local' exact component={Firehose} componentParams={{ feedType: 'community' }} content={children} />\n            <WrappedRoute path='/public/remote' exact component={Firehose} componentParams={{ feedType: 'public:remote' }} content={children} />\n            <WrappedRoute path={['/conversations', '/timelines/direct']} component={DirectTimeline} content={children} />\n            <WrappedRoute path='/tags/:id' component={HashtagTimeline} content={children} />\n            <WrappedRoute path='/lists/:id' component={ListTimeline} content={children} />\n            <WrappedRoute path='/notifications' component={Notifications} content={children} />\n            <WrappedRoute path='/favourites' component={FavouritedStatuses} content={children} />\n\n            <WrappedRoute path='/bookmarks' component={BookmarkedStatuses} content={children} />\n            <WrappedRoute path='/pinned' component={PinnedStatuses} content={children} />\n\n            <WrappedRoute path='/start' component={Onboarding} content={children} />\n            <WrappedRoute path='/directory' component={Directory} content={children} />\n            <WrappedRoute path={['/explore', '/search']} component={Explore} content={children} />\n            <WrappedRoute path={['/publish', '/statuses/new']} component={Compose} content={children} />\n\n            <WrappedRoute path={['/@:acct', '/accounts/:id']} exact component={AccountTimeline} content={children} />\n            <WrappedRoute path='/@:acct/tagged/:tagged?' exact component={AccountTimeline} content={children} />\n            <WrappedRoute path={['/@:acct/with_replies', '/accounts/:id/with_replies']} component={AccountTimeline} content={children} componentParams={{ withReplies: true }} />\n            <WrappedRoute path={['/accounts/:id/followers', '/users/:acct/followers', '/@:acct/followers']} component={Followers} content={children} />\n            <WrappedRoute path={['/accounts/:id/following', '/users/:acct/following', '/@:acct/following']} component={Following} content={children} />\n            <WrappedRoute path={['/@:acct/media', '/accounts/:id/media']} component={AccountGallery} content={children} />\n            <WrappedRoute path='/@:acct/:statusId' exact component={Status} content={children} />\n            <WrappedRoute path='/@:acct/:statusId/reblogs' component={Reblogs} content={children} />\n            <WrappedRoute path='/@:acct/:statusId/favourites' component={Favourites} content={children} />\n\n            {/* Legacy routes, cannot be easily factored with other routes because they share a param name */}\n            <WrappedRoute path='/timelines/tag/:id' component={HashtagTimeline} content={children} />\n            <WrappedRoute path='/timelines/list/:id' component={ListTimeline} content={children} />\n            <WrappedRoute path='/statuses/:statusId' exact component={Status} content={children} />\n            <WrappedRoute path='/statuses/:statusId/reblogs' component={Reblogs} content={children} />\n            <WrappedRoute path='/statuses/:statusId/favourites' component={Favourites} content={children} />\n\n            <WrappedRoute path='/follow_requests' component={FollowRequests} content={children} />\n            <WrappedRoute path='/blocks' component={Blocks} content={children} />\n            <WrappedRoute path='/domain_blocks' component={DomainBlocks} content={children} />\n            <WrappedRoute path='/followed_tags' component={FollowedTags} content={children} />\n            <WrappedRoute path='/mutes' component={Mutes} content={children} />\n            <WrappedRoute path='/lists' component={Lists} content={children} />\n\n            <Route component={BundleColumnError} />\n          </WrappedSwitch>\n        </ColumnsAreaContainer>\n      </ColumnsContextProvider>\n    );\n  }\n\n}\n\nclass UI extends PureComponent {\n\n  static contextTypes = {\n    identity: PropTypes.object.isRequired,\n  };\n\n  static propTypes = {\n    dispatch: PropTypes.func.isRequired,\n    children: PropTypes.node,\n    isComposing: PropTypes.bool,\n    hasComposingText: PropTypes.bool,\n    hasMediaAttachments: PropTypes.bool,\n    canUploadMore: PropTypes.bool,\n    intl: PropTypes.object.isRequired,\n    dropdownMenuIsOpen: PropTypes.bool,\n    layout: PropTypes.string.isRequired,\n    firstLaunch: PropTypes.bool,\n    username: PropTypes.string,\n    ...WithRouterPropTypes,\n  };\n\n  state = {\n    draggingOver: false,\n  };\n\n  handleBeforeUnload = e => {\n    const { intl, dispatch, isComposing, hasComposingText, hasMediaAttachments } = this.props;\n\n    dispatch(synchronouslySubmitMarkers());\n\n    if (isComposing && (hasComposingText || hasMediaAttachments)) {\n      e.preventDefault();\n      // Setting returnValue to any string causes confirmation dialog.\n      // Many browsers no longer display this text to users,\n      // but we set user-friendly message for other browsers, e.g. Edge.\n      e.returnValue = intl.formatMessage(messages.beforeUnload);\n    }\n  };\n\n  handleWindowFocus = () => {\n    this.props.dispatch(focusApp());\n    this.props.dispatch(submitMarkers({ immediate: true }));\n  };\n\n  handleWindowBlur = () => {\n    this.props.dispatch(unfocusApp());\n  };\n\n  handleDragEnter = (e) => {\n    e.preventDefault();\n\n    if (!this.dragTargets) {\n      this.dragTargets = [];\n    }\n\n    if (this.dragTargets.indexOf(e.target) === -1) {\n      this.dragTargets.push(e.target);\n    }\n\n    if (e.dataTransfer && Array.from(e.dataTransfer.types).includes('Files') && this.props.canUploadMore && this.context.identity.signedIn) {\n      this.setState({ draggingOver: true });\n    }\n  };\n\n  handleDragOver = (e) => {\n    if (this.dataTransferIsText(e.dataTransfer)) return false;\n\n    e.preventDefault();\n    e.stopPropagation();\n\n    try {\n      e.dataTransfer.dropEffect = 'copy';\n    } catch (err) {\n\n    }\n\n    return false;\n  };\n\n  handleDrop = (e) => {\n    if (this.dataTransferIsText(e.dataTransfer)) return;\n\n    e.preventDefault();\n\n    this.setState({ draggingOver: false });\n    this.dragTargets = [];\n\n    if (e.dataTransfer && e.dataTransfer.files.length >= 1 && this.props.canUploadMore && this.context.identity.signedIn) {\n      this.props.dispatch(uploadCompose(e.dataTransfer.files));\n    }\n  };\n\n  handleDragLeave = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    this.dragTargets = this.dragTargets.filter(el => el !== e.target && this.node.contains(el));\n\n    if (this.dragTargets.length > 0) {\n      return;\n    }\n\n    this.setState({ draggingOver: false });\n  };\n\n  dataTransferIsText = (dataTransfer) => {\n    return (dataTransfer && Array.from(dataTransfer.types).filter((type) => type === 'text/plain').length === 1);\n  };\n\n  closeUploadModal = () => {\n    this.setState({ draggingOver: false });\n  };\n\n  handleServiceWorkerPostMessage = ({ data }) => {\n    if (data.type === 'navigate') {\n      this.props.history.push(data.path);\n    } else {\n      console.warn('Unknown message type:', data.type);\n    }\n  };\n\n  handleLayoutChange = debounce(() => {\n    this.props.dispatch(clearHeight()); // The cached heights are no longer accurate, invalidate\n  }, 500, {\n    trailing: true,\n  });\n\n  handleResize = () => {\n    const layout = layoutFromWindow();\n\n    if (layout !== this.props.layout) {\n      this.handleLayoutChange.cancel();\n      this.props.dispatch(changeLayout({ layout }));\n    } else {\n      this.handleLayoutChange();\n    }\n  };\n\n  componentDidMount () {\n    const { signedIn } = this.context.identity;\n\n    window.addEventListener('focus', this.handleWindowFocus, false);\n    window.addEventListener('blur', this.handleWindowBlur, false);\n    window.addEventListener('beforeunload', this.handleBeforeUnload, false);\n    window.addEventListener('resize', this.handleResize, { passive: true });\n\n    document.addEventListener('dragenter', this.handleDragEnter, false);\n    document.addEventListener('dragover', this.handleDragOver, false);\n    document.addEventListener('drop', this.handleDrop, false);\n    document.addEventListener('dragleave', this.handleDragLeave, false);\n    document.addEventListener('dragend', this.handleDragEnd, false);\n\n    if ('serviceWorker' in  navigator) {\n      navigator.serviceWorker.addEventListener('message', this.handleServiceWorkerPostMessage);\n    }\n\n    if (signedIn) {\n      this.props.dispatch(fetchMarkers());\n      this.props.dispatch(expandHomeTimeline());\n      this.props.dispatch(expandNotifications());\n      this.props.dispatch(fetchServerTranslationLanguages());\n\n      setTimeout(() => this.props.dispatch(fetchServer()), 3000);\n    }\n\n    this.hotkeys.__mousetrap__.stopCallback = (e, element) => {\n      return ['TEXTAREA', 'SELECT', 'INPUT'].includes(element.tagName);\n    };\n  }\n\n  componentWillUnmount () {\n    window.removeEventListener('focus', this.handleWindowFocus);\n    window.removeEventListener('blur', this.handleWindowBlur);\n    window.removeEventListener('beforeunload', this.handleBeforeUnload);\n    window.removeEventListener('resize', this.handleResize);\n\n    document.removeEventListener('dragenter', this.handleDragEnter);\n    document.removeEventListener('dragover', this.handleDragOver);\n    document.removeEventListener('drop', this.handleDrop);\n    document.removeEventListener('dragleave', this.handleDragLeave);\n    document.removeEventListener('dragend', this.handleDragEnd);\n  }\n\n  setRef = c => {\n    this.node = c;\n  };\n\n  handleHotkeyNew = e => {\n    e.preventDefault();\n\n    const element = this.node.querySelector('.compose-form__autosuggest-wrapper textarea');\n\n    if (element) {\n      element.focus();\n    }\n  };\n\n  handleHotkeySearch = e => {\n    e.preventDefault();\n\n    const element = this.node.querySelector('.search__input');\n\n    if (element) {\n      element.focus();\n    }\n  };\n\n  handleHotkeyForceNew = e => {\n    this.handleHotkeyNew(e);\n    this.props.dispatch(resetCompose());\n  };\n\n  handleHotkeyToggleComposeSpoilers = e => {\n    e.preventDefault();\n    this.props.dispatch(changeComposeSpoilerness());\n  };\n\n  handleHotkeyFocusColumn = e => {\n    const index  = (e.key * 1) + 1; // First child is drawer, skip that\n    const column = this.node.querySelector(`.column:nth-child(${index})`);\n    if (!column) return;\n    const container = column.querySelector('.scrollable');\n\n    if (container) {\n      const status = container.querySelector('.focusable');\n\n      if (status) {\n        if (container.scrollTop > status.offsetTop) {\n          status.scrollIntoView(true);\n        }\n        status.focus();\n      }\n    }\n  };\n\n  handleHotkeyBack = () => {\n    const { history } = this.props;\n\n    if (history.location?.state?.fromMastodon) {\n      history.goBack();\n    } else {\n      history.push('/');\n    }\n  };\n\n  setHotkeysRef = c => {\n    this.hotkeys = c;\n  };\n\n  handleHotkeyToggleHelp = () => {\n    if (this.props.location.pathname === '/keyboard-shortcuts') {\n      this.props.history.goBack();\n    } else {\n      this.props.history.push('/keyboard-shortcuts');\n    }\n  };\n\n  handleHotkeyGoToHome = () => {\n    this.props.history.push('/home');\n  };\n\n  handleHotkeyGoToNotifications = () => {\n    this.props.history.push('/notifications');\n  };\n\n  handleHotkeyGoToLocal = () => {\n    this.props.history.push('/public/local');\n  };\n\n  handleHotkeyGoToFederated = () => {\n    this.props.history.push('/public');\n  };\n\n  handleHotkeyGoToDirect = () => {\n    this.props.history.push('/conversations');\n  };\n\n  handleHotkeyGoToStart = () => {\n    this.props.history.push('/getting-started');\n  };\n\n  handleHotkeyGoToFavourites = () => {\n    this.props.history.push('/favourites');\n  };\n\n  handleHotkeyGoToPinned = () => {\n    this.props.history.push('/pinned');\n  };\n\n  handleHotkeyGoToProfile = () => {\n    this.props.history.push(`/@${this.props.username}`);\n  };\n\n  handleHotkeyGoToBlocked = () => {\n    this.props.history.push('/blocks');\n  };\n\n  handleHotkeyGoToMuted = () => {\n    this.props.history.push('/mutes');\n  };\n\n  handleHotkeyGoToRequests = () => {\n    this.props.history.push('/follow_requests');\n  };\n\n  render () {\n    const { draggingOver } = this.state;\n    const { children, isComposing, location, dropdownMenuIsOpen, layout } = this.props;\n\n    const handlers = {\n      help: this.handleHotkeyToggleHelp,\n      new: this.handleHotkeyNew,\n      search: this.handleHotkeySearch,\n      forceNew: this.handleHotkeyForceNew,\n      toggleComposeSpoilers: this.handleHotkeyToggleComposeSpoilers,\n      focusColumn: this.handleHotkeyFocusColumn,\n      back: this.handleHotkeyBack,\n      goToHome: this.handleHotkeyGoToHome,\n      goToNotifications: this.handleHotkeyGoToNotifications,\n      goToLocal: this.handleHotkeyGoToLocal,\n      goToFederated: this.handleHotkeyGoToFederated,\n      goToDirect: this.handleHotkeyGoToDirect,\n      goToStart: this.handleHotkeyGoToStart,\n      goToFavourites: this.handleHotkeyGoToFavourites,\n      goToPinned: this.handleHotkeyGoToPinned,\n      goToProfile: this.handleHotkeyGoToProfile,\n      goToBlocked: this.handleHotkeyGoToBlocked,\n      goToMuted: this.handleHotkeyGoToMuted,\n      goToRequests: this.handleHotkeyGoToRequests,\n    };\n\n    return (\n      <HotKeys keyMap={keyMap} handlers={handlers} ref={this.setHotkeysRef} attach={window} focused>\n        <div className={classNames('ui', { 'is-composing': isComposing })} ref={this.setRef} style={{ pointerEvents: dropdownMenuIsOpen ? 'none' : null }}>\n          <Header />\n\n          <SwitchingColumnsArea location={location} singleColumn={layout === 'mobile' || layout === 'single-column'}>\n            {children}\n          </SwitchingColumnsArea>\n\n          {layout !== 'mobile' && <PictureInPicture />}\n          <NotificationsContainer />\n          <LoadingBarContainer className='loading-bar' />\n          <ModalContainer />\n          <UploadArea active={draggingOver} onClose={this.closeUploadModal} />\n        </div>\n      </HotKeys>\n    );\n  }\n\n}\n\nexport default connect(mapStateToProps)(injectIntl(withRouter(UI)));\n","import PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport { Helmet } from 'react-helmet';\nimport { Route } from 'react-router-dom';\n\nimport { Provider as ReduxProvider } from 'react-redux';\n\nimport { ScrollContext } from 'react-router-scroll-4';\n\nimport { fetchCustomEmojis } from 'mastodon/actions/custom_emojis';\nimport { hydrateStore } from 'mastodon/actions/store';\nimport { connectUserStream } from 'mastodon/actions/streaming';\nimport ErrorBoundary from 'mastodon/components/error_boundary';\nimport { Router } from 'mastodon/components/router';\nimport UI from 'mastodon/features/ui';\nimport initialState, { title as siteTitle } from 'mastodon/initial_state';\nimport { IntlProvider } from 'mastodon/locales';\nimport { store } from 'mastodon/store';\nimport { isProduction } from 'mastodon/utils/environment';\n\nconst title = isProduction() ? siteTitle : `${siteTitle} (Dev)`;\n\nconst hydrateAction = hydrateStore(initialState);\n\nstore.dispatch(hydrateAction);\nif (initialState.meta.me) {\n  store.dispatch(fetchCustomEmojis());\n}\n\nconst createIdentityContext = state => ({\n  signedIn: !!state.meta.me,\n  accountId: state.meta.me,\n  disabledAccountId: state.meta.disabled_account_id,\n  accessToken: state.meta.access_token,\n  permissions: state.role ? state.role.permissions : 0,\n});\n\nexport default class Mastodon extends PureComponent {\n\n  static childContextTypes = {\n    identity: PropTypes.shape({\n      signedIn: PropTypes.bool.isRequired,\n      accountId: PropTypes.string,\n      disabledAccountId: PropTypes.string,\n      accessToken: PropTypes.string,\n    }).isRequired,\n  };\n\n  identity = createIdentityContext(initialState);\n\n  getChildContext() {\n    return {\n      identity: this.identity,\n    };\n  }\n\n  componentDidMount() {\n    if (this.identity.signedIn) {\n      this.disconnect = store.dispatch(connectUserStream());\n    }\n  }\n\n  componentWillUnmount () {\n    if (this.disconnect) {\n      this.disconnect();\n      this.disconnect = null;\n    }\n  }\n\n  shouldUpdateScroll (prevRouterProps, { location }) {\n    return !(location.state?.mastodonModalKey && location.state?.mastodonModalKey !== prevRouterProps?.location?.state?.mastodonModalKey);\n  }\n\n  render () {\n    return (\n      <IntlProvider>\n        <ReduxProvider store={store}>\n          <ErrorBoundary>\n            <Router>\n              <ScrollContext shouldUpdateScroll={this.shouldUpdateScroll}>\n                <Route path='/' component={UI} />\n              </ScrollContext>\n            </Router>\n\n            <Helmet defaultTitle={title} titleTemplate={`%s - ${title}`} />\n          </ErrorBoundary>\n        </ReduxProvider>\n      </IntlProvider>\n    );\n  }\n\n}\n","/* global performance */\nvar perf = typeof performance !== 'undefined' && performance;\n\nvar now = perf && perf.now\n  ? function () { return perf.now(); }\n  : function () { return Date.now(); }\n\nfunction throwIfEmpty (name) {\n  if (!name) {\n    throw new Error('name must be non-empty')\n  }\n}\n\n// simple binary sort insertion\nfunction insertSorted (arr, item) {\n  var low = 0;\n  var high = arr.length;\n  var mid;\n  while (low < high) {\n    mid = (low + high) >>> 1; // like (num / 2) but faster\n    if (arr[mid].startTime < item.startTime) {\n      low = mid + 1;\n    } else {\n      high = mid;\n    }\n  }\n  arr.splice(low, 0, item);\n}\n\nvar mark;\nvar stop;\nvar getEntries;\nvar clear;\n\nif (\n  perf &&\n  perf.mark &&\n  perf.measure &&\n  perf.getEntriesByName &&\n  perf.getEntriesByType &&\n  perf.clearMarks &&\n  perf.clearMeasures &&\n  // In Node, we want to detect that this perf/correctness fix [1] is available, which\n  // landed in Node 16.15.0, 17.6.0, and 18.0.0. However, it's not observable, and\n  // we don't want to rely on fragile version checks.\n  // So we can rely on this observable change [2] to add clearResourceTimings, which\n  // landed a bit later (18.2.0), but is close enough for our purposes.\n  // [1]: https://github.com/nodejs/node/pull/42032\n  // [2]: https://github.com/nodejs/node/pull/42725\n  (true )\n) {\n  mark = function (name) {\n    throwIfEmpty(name);\n    perf.mark((\"start \" + name));\n  };\n  stop = function (name) {\n    throwIfEmpty(name);\n    perf.mark((\"end \" + name));\n    var measure = perf.measure(name, (\"start \" + name), (\"end \" + name));\n    if (measure) {\n      // return value from performance.measure not supported in all browsers\n      // https://developer.mozilla.org/en-US/docs/Web/API/Performance/measure#browser_compatibility\n      return measure\n    }\n    var entries = perf.getEntriesByName(name);\n    return entries[entries.length - 1]\n  };\n  getEntries = function () { return perf.getEntriesByType('measure'); };\n  clear = function () {\n    perf.clearMarks();\n    perf.clearMeasures();\n  };\n} else {\n  var marks = {};\n  var entries = [];\n  mark = function (name) {\n    throwIfEmpty(name);\n    var startTime = now();\n    marks['$' + name] = startTime;\n  };\n  stop = function (name) {\n    throwIfEmpty(name);\n    var endTime = now();\n    var startTime = marks['$' + name];\n    if (!startTime) {\n      throw new Error((\"no known mark: \" + name))\n    }\n    var entry = {\n      startTime: startTime,\n      name: name,\n      duration: endTime - startTime,\n      entryType: 'measure'\n    };\n    // per the spec this should be at least 150:\n    // https://www.w3.org/TR/resource-timing-1/#extensions-performance-interface\n    // we just have no limit, per Chrome and Edge's de-facto behavior\n    insertSorted(entries, entry);\n    return entry\n  };\n  getEntries = function () { return entries; };\n  clear = function () {\n    marks = {};\n    entries = [];\n  };\n}\n\nexport { clear, getEntries, mark, stop };\n","//\n// Tools for performance debugging, only enabled in development mode.\n// Open up Chrome Dev Tools, then Timeline, then User Timing to see output.\n// Also see config/webpack/loaders/mark.js for the webpack loader marks.\n\nimport * as marky from 'marky';\n\nimport { isDevelopment } from './utils/environment';\n\nif (isDevelopment()) {\n  if (typeof performance !== 'undefined' && performance.setResourceTimingBufferSize) {\n    // Increase Firefox's performance entry limit; otherwise it's capped to 150.\n    // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1331135\n    performance.setResourceTimingBufferSize(Infinity);\n  }\n\n  // allows us to easily do e.g. ReactPerf.printWasted() while debugging\n  //window.ReactPerf = require('react-addons-perf');\n  //window.ReactPerf.start();\n}\n\nexport function start(name) {\n  if (isDevelopment()) {\n    marky.mark(name);\n  }\n}\n\nexport function stop(name) {\n  if (isDevelopment()) {\n    marky.stop(name);\n  }\n}\n","import { createRoot } from 'react-dom/client';\n\nimport { setupBrowserNotifications } from 'mastodon/actions/notifications';\nimport Mastodon from 'mastodon/containers/mastodon';\nimport { me } from 'mastodon/initial_state';\nimport * as perf from 'mastodon/performance';\nimport ready from 'mastodon/ready';\nimport { store } from 'mastodon/store';\n\nimport { isProduction } from './utils/environment';\n\n/**\n * @returns {Promise<void>}\n */\nfunction main() {\n  perf.start('main()');\n\n  return ready(async () => {\n    const mountNode = document.getElementById('mastodon');\n    const props = JSON.parse(mountNode.getAttribute('data-props'));\n\n    const root = createRoot(mountNode);\n    root.render(<Mastodon {...props} />);\n    store.dispatch(setupBrowserNotifications());\n\n    if (isProduction() && me && 'serviceWorker' in navigator) {\n      const { Workbox } = await import('workbox-window');\n      const wb = new Workbox('/sw.js');\n      /** @type {ServiceWorkerRegistration} */\n      let registration;\n\n      try {\n        registration = await wb.register();\n      } catch (err) {\n        console.error(err);\n      }\n\n      if (registration && 'Notification' in window && Notification.permission === 'granted') {\n        const registerPushNotifications = await import('mastodon/actions/push_notifications');\n\n        store.dispatch(registerPushNotifications.register());\n      }\n    }\n\n    perf.stop('main()');\n  });\n}\n\nexport default main;\n","import './public-path';\nimport main from \"mastodon/main\";\n\nimport { start } from '../mastodon/common';\nimport { loadLocale } from '../mastodon/locales';\nimport { loadPolyfills } from '../mastodon/polyfills';\n\nstart();\n\nloadPolyfills()\n  .then(loadLocale)\n  .then(main)\n  .catch(e => {\n    console.error(e);\n  });\n","/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\n/**\n * This is a helper function for getting values from parameter/options\n * objects.\n *\n * @param args The object we are extracting values from\n * @param name The name of the property we are getting.\n * @param defaultValue An optional value to return if the property is missing\n * from the object. If this is not specified and the property is missing, an\n * error will be thrown.\n */\nfunction getArg(aArgs, aName, aDefaultValue) {\n  if (aName in aArgs) {\n    return aArgs[aName];\n  } else if (arguments.length === 3) {\n    return aDefaultValue;\n  } else {\n    throw new Error('\"' + aName + '\" is a required argument.');\n  }\n}\nexports.getArg = getArg;\n\nvar urlRegexp = /^(?:([\\w+\\-.]+):)?\\/\\/(?:(\\w+:\\w+)@)?([\\w.]*)(?::(\\d+))?(\\S*)$/;\nvar dataUrlRegexp = /^data:.+\\,.+$/;\n\nfunction urlParse(aUrl) {\n  var match = aUrl.match(urlRegexp);\n  if (!match) {\n    return null;\n  }\n  return {\n    scheme: match[1],\n    auth: match[2],\n    host: match[3],\n    port: match[4],\n    path: match[5]\n  };\n}\nexports.urlParse = urlParse;\n\nfunction urlGenerate(aParsedUrl) {\n  var url = '';\n  if (aParsedUrl.scheme) {\n    url += aParsedUrl.scheme + ':';\n  }\n  url += '//';\n  if (aParsedUrl.auth) {\n    url += aParsedUrl.auth + '@';\n  }\n  if (aParsedUrl.host) {\n    url += aParsedUrl.host;\n  }\n  if (aParsedUrl.port) {\n    url += \":\" + aParsedUrl.port\n  }\n  if (aParsedUrl.path) {\n    url += aParsedUrl.path;\n  }\n  return url;\n}\nexports.urlGenerate = urlGenerate;\n\n/**\n * Normalizes a path, or the path portion of a URL:\n *\n * - Replaces consecutive slashes with one slash.\n * - Removes unnecessary '.' parts.\n * - Removes unnecessary '<dir>/..' parts.\n *\n * Based on code in the Node.js 'path' core module.\n *\n * @param aPath The path or url to normalize.\n */\nfunction normalize(aPath) {\n  var path = aPath;\n  var url = urlParse(aPath);\n  if (url) {\n    if (!url.path) {\n      return aPath;\n    }\n    path = url.path;\n  }\n  var isAbsolute = exports.isAbsolute(path);\n\n  var parts = path.split(/\\/+/);\n  for (var part, up = 0, i = parts.length - 1; i >= 0; i--) {\n    part = parts[i];\n    if (part === '.') {\n      parts.splice(i, 1);\n    } else if (part === '..') {\n      up++;\n    } else if (up > 0) {\n      if (part === '') {\n        // The first part is blank if the path is absolute. Trying to go\n        // above the root is a no-op. Therefore we can remove all '..' parts\n        // directly after the root.\n        parts.splice(i + 1, up);\n        up = 0;\n      } else {\n        parts.splice(i, 2);\n        up--;\n      }\n    }\n  }\n  path = parts.join('/');\n\n  if (path === '') {\n    path = isAbsolute ? '/' : '.';\n  }\n\n  if (url) {\n    url.path = path;\n    return urlGenerate(url);\n  }\n  return path;\n}\nexports.normalize = normalize;\n\n/**\n * Joins two paths/URLs.\n *\n * @param aRoot The root path or URL.\n * @param aPath The path or URL to be joined with the root.\n *\n * - If aPath is a URL or a data URI, aPath is returned, unless aPath is a\n *   scheme-relative URL: Then the scheme of aRoot, if any, is prepended\n *   first.\n * - Otherwise aPath is a path. If aRoot is a URL, then its path portion\n *   is updated with the result and aRoot is returned. Otherwise the result\n *   is returned.\n *   - If aPath is absolute, the result is aPath.\n *   - Otherwise the two paths are joined with a slash.\n * - Joining for example 'http://' and 'www.example.com' is also supported.\n */\nfunction join(aRoot, aPath) {\n  if (aRoot === \"\") {\n    aRoot = \".\";\n  }\n  if (aPath === \"\") {\n    aPath = \".\";\n  }\n  var aPathUrl = urlParse(aPath);\n  var aRootUrl = urlParse(aRoot);\n  if (aRootUrl) {\n    aRoot = aRootUrl.path || '/';\n  }\n\n  // `join(foo, '//www.example.org')`\n  if (aPathUrl && !aPathUrl.scheme) {\n    if (aRootUrl) {\n      aPathUrl.scheme = aRootUrl.scheme;\n    }\n    return urlGenerate(aPathUrl);\n  }\n\n  if (aPathUrl || aPath.match(dataUrlRegexp)) {\n    return aPath;\n  }\n\n  // `join('http://', 'www.example.com')`\n  if (aRootUrl && !aRootUrl.host && !aRootUrl.path) {\n    aRootUrl.host = aPath;\n    return urlGenerate(aRootUrl);\n  }\n\n  var joined = aPath.charAt(0) === '/'\n    ? aPath\n    : normalize(aRoot.replace(/\\/+$/, '') + '/' + aPath);\n\n  if (aRootUrl) {\n    aRootUrl.path = joined;\n    return urlGenerate(aRootUrl);\n  }\n  return joined;\n}\nexports.join = join;\n\nexports.isAbsolute = function (aPath) {\n  return aPath.charAt(0) === '/' || !!aPath.match(urlRegexp);\n};\n\n/**\n * Make a path relative to a URL or another path.\n *\n * @param aRoot The root path or URL.\n * @param aPath The path or URL to be made relative to aRoot.\n */\nfunction relative(aRoot, aPath) {\n  if (aRoot === \"\") {\n    aRoot = \".\";\n  }\n\n  aRoot = aRoot.replace(/\\/$/, '');\n\n  // It is possible for the path to be above the root. In this case, simply\n  // checking whether the root is a prefix of the path won't work. Instead, we\n  // need to remove components from the root one by one, until either we find\n  // a prefix that fits, or we run out of components to remove.\n  var level = 0;\n  while (aPath.indexOf(aRoot + '/') !== 0) {\n    var index = aRoot.lastIndexOf(\"/\");\n    if (index < 0) {\n      return aPath;\n    }\n\n    // If the only part of the root that is left is the scheme (i.e. http://,\n    // file:///, etc.), one or more slashes (/), or simply nothing at all, we\n    // have exhausted all components, so the path is not relative to the root.\n    aRoot = aRoot.slice(0, index);\n    if (aRoot.match(/^([^\\/]+:\\/)?\\/*$/)) {\n      return aPath;\n    }\n\n    ++level;\n  }\n\n  // Make sure we add a \"../\" for each component we removed from the root.\n  return Array(level + 1).join(\"../\") + aPath.substr(aRoot.length + 1);\n}\nexports.relative = relative;\n\nvar supportsNullProto = (function () {\n  var obj = Object.create(null);\n  return !('__proto__' in obj);\n}());\n\nfunction identity (s) {\n  return s;\n}\n\n/**\n * Because behavior goes wacky when you set `__proto__` on objects, we\n * have to prefix all the strings in our set with an arbitrary character.\n *\n * See https://github.com/mozilla/source-map/pull/31 and\n * https://github.com/mozilla/source-map/issues/30\n *\n * @param String aStr\n */\nfunction toSetString(aStr) {\n  if (isProtoString(aStr)) {\n    return '$' + aStr;\n  }\n\n  return aStr;\n}\nexports.toSetString = supportsNullProto ? identity : toSetString;\n\nfunction fromSetString(aStr) {\n  if (isProtoString(aStr)) {\n    return aStr.slice(1);\n  }\n\n  return aStr;\n}\nexports.fromSetString = supportsNullProto ? identity : fromSetString;\n\nfunction isProtoString(s) {\n  if (!s) {\n    return false;\n  }\n\n  var length = s.length;\n\n  if (length < 9 /* \"__proto__\".length */) {\n    return false;\n  }\n\n  if (s.charCodeAt(length - 1) !== 95  /* '_' */ ||\n      s.charCodeAt(length - 2) !== 95  /* '_' */ ||\n      s.charCodeAt(length - 3) !== 111 /* 'o' */ ||\n      s.charCodeAt(length - 4) !== 116 /* 't' */ ||\n      s.charCodeAt(length - 5) !== 111 /* 'o' */ ||\n      s.charCodeAt(length - 6) !== 114 /* 'r' */ ||\n      s.charCodeAt(length - 7) !== 112 /* 'p' */ ||\n      s.charCodeAt(length - 8) !== 95  /* '_' */ ||\n      s.charCodeAt(length - 9) !== 95  /* '_' */) {\n    return false;\n  }\n\n  for (var i = length - 10; i >= 0; i--) {\n    if (s.charCodeAt(i) !== 36 /* '$' */) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * Comparator between two mappings where the original positions are compared.\n *\n * Optionally pass in `true` as `onlyCompareGenerated` to consider two\n * mappings with the same original source/line/column, but different generated\n * line and column the same. Useful when searching for a mapping with a\n * stubbed out mapping.\n */\nfunction compareByOriginalPositions(mappingA, mappingB, onlyCompareOriginal) {\n  var cmp = mappingA.source - mappingB.source;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalLine - mappingB.originalLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalColumn - mappingB.originalColumn;\n  if (cmp !== 0 || onlyCompareOriginal) {\n    return cmp;\n  }\n\n  cmp = mappingA.generatedColumn - mappingB.generatedColumn;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.generatedLine - mappingB.generatedLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  return mappingA.name - mappingB.name;\n}\nexports.compareByOriginalPositions = compareByOriginalPositions;\n\n/**\n * Comparator between two mappings with deflated source and name indices where\n * the generated positions are compared.\n *\n * Optionally pass in `true` as `onlyCompareGenerated` to consider two\n * mappings with the same generated line and column, but different\n * source/name/original line and column the same. Useful when searching for a\n * mapping with a stubbed out mapping.\n */\nfunction compareByGeneratedPositionsDeflated(mappingA, mappingB, onlyCompareGenerated) {\n  var cmp = mappingA.generatedLine - mappingB.generatedLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.generatedColumn - mappingB.generatedColumn;\n  if (cmp !== 0 || onlyCompareGenerated) {\n    return cmp;\n  }\n\n  cmp = mappingA.source - mappingB.source;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalLine - mappingB.originalLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalColumn - mappingB.originalColumn;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  return mappingA.name - mappingB.name;\n}\nexports.compareByGeneratedPositionsDeflated = compareByGeneratedPositionsDeflated;\n\nfunction strcmp(aStr1, aStr2) {\n  if (aStr1 === aStr2) {\n    return 0;\n  }\n\n  if (aStr1 > aStr2) {\n    return 1;\n  }\n\n  return -1;\n}\n\n/**\n * Comparator between two mappings with inflated source and name strings where\n * the generated positions are compared.\n */\nfunction compareByGeneratedPositionsInflated(mappingA, mappingB) {\n  var cmp = mappingA.generatedLine - mappingB.generatedLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.generatedColumn - mappingB.generatedColumn;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = strcmp(mappingA.source, mappingB.source);\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalLine - mappingB.originalLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalColumn - mappingB.originalColumn;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  return strcmp(mappingA.name, mappingB.name);\n}\nexports.compareByGeneratedPositionsInflated = compareByGeneratedPositionsInflated;\n","(function(root, factory) {\n    'use strict';\n    // Universal Module Definition (UMD) to support AMD, CommonJS/Node.js, Rhino, and browsers.\n\n    /* istanbul ignore next */\n    if (typeof define === 'function' && define.amd) {\n        define('stacktrace', ['error-stack-parser', 'stack-generator', 'stacktrace-gps'], factory);\n    } else if (typeof exports === 'object') {\n        module.exports = factory(require('error-stack-parser'), require('stack-generator'), require('stacktrace-gps'));\n    } else {\n        root.StackTrace = factory(root.ErrorStackParser, root.StackGenerator, root.StackTraceGPS);\n    }\n}(this, function StackTrace(ErrorStackParser, StackGenerator, StackTraceGPS) {\n    var _options = {\n        filter: function(stackframe) {\n            // Filter out stackframes for this library by default\n            return (stackframe.functionName || '').indexOf('StackTrace$$') === -1 &&\n                (stackframe.functionName || '').indexOf('ErrorStackParser$$') === -1 &&\n                (stackframe.functionName || '').indexOf('StackTraceGPS$$') === -1 &&\n                (stackframe.functionName || '').indexOf('StackGenerator$$') === -1;\n        },\n        sourceCache: {}\n    };\n\n    var _generateError = function StackTrace$$GenerateError() {\n        try {\n            // Error must be thrown to get stack in IE\n            throw new Error();\n        } catch (err) {\n            return err;\n        }\n    };\n\n    /**\n     * Merge 2 given Objects. If a conflict occurs the second object wins.\n     * Does not do deep merges.\n     *\n     * @param {Object} first base object\n     * @param {Object} second overrides\n     * @returns {Object} merged first and second\n     * @private\n     */\n    function _merge(first, second) {\n        var target = {};\n\n        [first, second].forEach(function(obj) {\n            for (var prop in obj) {\n                if (Object.prototype.hasOwnProperty.call(obj, prop)) {\n                    target[prop] = obj[prop];\n                }\n            }\n            return target;\n        });\n\n        return target;\n    }\n\n    function _isShapedLikeParsableError(err) {\n        return err.stack || err['opera#sourceloc'];\n    }\n\n    function _filtered(stackframes, filter) {\n        if (typeof filter === 'function') {\n            return stackframes.filter(filter);\n        }\n        return stackframes;\n    }\n\n    return {\n        /**\n         * Get a backtrace from invocation point.\n         *\n         * @param {Object} opts\n         * @returns {Array} of StackFrame\n         */\n        get: function StackTrace$$get(opts) {\n            var err = _generateError();\n            return _isShapedLikeParsableError(err) ? this.fromError(err, opts) : this.generateArtificially(opts);\n        },\n\n        /**\n         * Get a backtrace from invocation point.\n         * IMPORTANT: Does not handle source maps or guess function names!\n         *\n         * @param {Object} opts\n         * @returns {Array} of StackFrame\n         */\n        getSync: function StackTrace$$getSync(opts) {\n            opts = _merge(_options, opts);\n            var err = _generateError();\n            var stack = _isShapedLikeParsableError(err) ? ErrorStackParser.parse(err) : StackGenerator.backtrace(opts);\n            return _filtered(stack, opts.filter);\n        },\n\n        /**\n         * Given an error object, parse it.\n         *\n         * @param {Error} error object\n         * @param {Object} opts\n         * @returns {Promise} for Array[StackFrame}\n         */\n        fromError: function StackTrace$$fromError(error, opts) {\n            opts = _merge(_options, opts);\n            var gps = new StackTraceGPS(opts);\n            return new Promise(function(resolve) {\n                var stackframes = _filtered(ErrorStackParser.parse(error), opts.filter);\n                resolve(Promise.all(stackframes.map(function(sf) {\n                    return new Promise(function(resolve) {\n                        function resolveOriginal() {\n                            resolve(sf);\n                        }\n\n                        gps.pinpoint(sf).then(resolve, resolveOriginal)['catch'](resolveOriginal);\n                    });\n                })));\n            }.bind(this));\n        },\n\n        /**\n         * Use StackGenerator to generate a backtrace.\n         *\n         * @param {Object} opts\n         * @returns {Promise} of Array[StackFrame]\n         */\n        generateArtificially: function StackTrace$$generateArtificially(opts) {\n            opts = _merge(_options, opts);\n            var stackFrames = StackGenerator.backtrace(opts);\n            if (typeof opts.filter === 'function') {\n                stackFrames = stackFrames.filter(opts.filter);\n            }\n            return Promise.resolve(stackFrames);\n        },\n\n        /**\n         * Given a function, wrap it such that invocations trigger a callback that\n         * is called with a stack trace.\n         *\n         * @param {Function} fn to be instrumented\n         * @param {Function} callback function to call with a stack trace on invocation\n         * @param {Function} errback optional function to call with error if unable to get stack trace.\n         * @param {Object} thisArg optional context object (e.g. window)\n         */\n        instrument: function StackTrace$$instrument(fn, callback, errback, thisArg) {\n            if (typeof fn !== 'function') {\n                throw new Error('Cannot instrument non-function object');\n            } else if (typeof fn.__stacktraceOriginalFn === 'function') {\n                // Already instrumented, return given Function\n                return fn;\n            }\n\n            var instrumented = function StackTrace$$instrumented() {\n                try {\n                    this.get().then(callback, errback)['catch'](errback);\n                    return fn.apply(thisArg || this, arguments);\n                } catch (e) {\n                    if (_isShapedLikeParsableError(e)) {\n                        this.fromError(e).then(callback, errback)['catch'](errback);\n                    }\n                    throw e;\n                }\n            }.bind(this);\n            instrumented.__stacktraceOriginalFn = fn;\n\n            return instrumented;\n        },\n\n        /**\n         * Given a function that has been instrumented,\n         * revert the function to it's original (non-instrumented) state.\n         *\n         * @param {Function} fn to de-instrument\n         */\n        deinstrument: function StackTrace$$deinstrument(fn) {\n            if (typeof fn !== 'function') {\n                throw new Error('Cannot de-instrument non-function object');\n            } else if (typeof fn.__stacktraceOriginalFn === 'function') {\n                return fn.__stacktraceOriginalFn;\n            } else {\n                // Function not instrumented, return original\n                return fn;\n            }\n        },\n\n        /**\n         * Given an error message and Array of StackFrames, serialize and POST to given URL.\n         *\n         * @param {Array} stackframes\n         * @param {String} url\n         * @param {String} errorMsg\n         * @param {Object} requestOptions\n         */\n        report: function StackTrace$$report(stackframes, url, errorMsg, requestOptions) {\n            return new Promise(function(resolve, reject) {\n                var req = new XMLHttpRequest();\n                req.onerror = reject;\n                req.onreadystatechange = function onreadystatechange() {\n                    if (req.readyState === 4) {\n                        if (req.status >= 200 && req.status < 400) {\n                            resolve(req.responseText);\n                        } else {\n                            reject(new Error('POST to ' + url + ' failed with status: ' + req.status));\n                        }\n                    }\n                };\n                req.open('post', url);\n\n                // Set request headers\n                req.setRequestHeader('Content-Type', 'application/json');\n                if (requestOptions && typeof requestOptions.headers === 'object') {\n                    var headers = requestOptions.headers;\n                    for (var header in headers) {\n                        if (Object.prototype.hasOwnProperty.call(headers, header)) {\n                            req.setRequestHeader(header, headers[header]);\n                        }\n                    }\n                }\n\n                var reportPayload = {stack: stackframes};\n                if (errorMsg !== undefined && errorMsg !== null) {\n                    reportPayload.message = errorMsg;\n                }\n\n                req.send(JSON.stringify(reportPayload));\n            });\n        }\n    };\n}));\n","(function(root, factory) {\n    'use strict';\n    // Universal Module Definition (UMD) to support AMD, CommonJS/Node.js, Rhino, and browsers.\n\n    /* istanbul ignore next */\n    if (typeof define === 'function' && define.amd) {\n        define('stackframe', [], factory);\n    } else if (typeof exports === 'object') {\n        module.exports = factory();\n    } else {\n        root.StackFrame = factory();\n    }\n}(this, function() {\n    'use strict';\n    function _isNumber(n) {\n        return !isNaN(parseFloat(n)) && isFinite(n);\n    }\n\n    function _capitalize(str) {\n        return str.charAt(0).toUpperCase() + str.substring(1);\n    }\n\n    function _getter(p) {\n        return function() {\n            return this[p];\n        };\n    }\n\n    var booleanProps = ['isConstructor', 'isEval', 'isNative', 'isToplevel'];\n    var numericProps = ['columnNumber', 'lineNumber'];\n    var stringProps = ['fileName', 'functionName', 'source'];\n    var arrayProps = ['args'];\n    var objectProps = ['evalOrigin'];\n\n    var props = booleanProps.concat(numericProps, stringProps, arrayProps, objectProps);\n\n    function StackFrame(obj) {\n        if (!obj) return;\n        for (var i = 0; i < props.length; i++) {\n            if (obj[props[i]] !== undefined) {\n                this['set' + _capitalize(props[i])](obj[props[i]]);\n            }\n        }\n    }\n\n    StackFrame.prototype = {\n        getArgs: function() {\n            return this.args;\n        },\n        setArgs: function(v) {\n            if (Object.prototype.toString.call(v) !== '[object Array]') {\n                throw new TypeError('Args must be an Array');\n            }\n            this.args = v;\n        },\n\n        getEvalOrigin: function() {\n            return this.evalOrigin;\n        },\n        setEvalOrigin: function(v) {\n            if (v instanceof StackFrame) {\n                this.evalOrigin = v;\n            } else if (v instanceof Object) {\n                this.evalOrigin = new StackFrame(v);\n            } else {\n                throw new TypeError('Eval Origin must be an Object or StackFrame');\n            }\n        },\n\n        toString: function() {\n            var fileName = this.getFileName() || '';\n            var lineNumber = this.getLineNumber() || '';\n            var columnNumber = this.getColumnNumber() || '';\n            var functionName = this.getFunctionName() || '';\n            if (this.getIsEval()) {\n                if (fileName) {\n                    return '[eval] (' + fileName + ':' + lineNumber + ':' + columnNumber + ')';\n                }\n                return '[eval]:' + lineNumber + ':' + columnNumber;\n            }\n            if (functionName) {\n                return functionName + ' (' + fileName + ':' + lineNumber + ':' + columnNumber + ')';\n            }\n            return fileName + ':' + lineNumber + ':' + columnNumber;\n        }\n    };\n\n    StackFrame.fromString = function StackFrame$$fromString(str) {\n        var argsStartIndex = str.indexOf('(');\n        var argsEndIndex = str.lastIndexOf(')');\n\n        var functionName = str.substring(0, argsStartIndex);\n        var args = str.substring(argsStartIndex + 1, argsEndIndex).split(',');\n        var locationString = str.substring(argsEndIndex + 1);\n\n        if (locationString.indexOf('@') === 0) {\n            var parts = /@(.+?)(?::(\\d+))?(?::(\\d+))?$/.exec(locationString, '');\n            var fileName = parts[1];\n            var lineNumber = parts[2];\n            var columnNumber = parts[3];\n        }\n\n        return new StackFrame({\n            functionName: functionName,\n            args: args || undefined,\n            fileName: fileName,\n            lineNumber: lineNumber || undefined,\n            columnNumber: columnNumber || undefined\n        });\n    };\n\n    for (var i = 0; i < booleanProps.length; i++) {\n        StackFrame.prototype['get' + _capitalize(booleanProps[i])] = _getter(booleanProps[i]);\n        StackFrame.prototype['set' + _capitalize(booleanProps[i])] = (function(p) {\n            return function(v) {\n                this[p] = Boolean(v);\n            };\n        })(booleanProps[i]);\n    }\n\n    for (var j = 0; j < numericProps.length; j++) {\n        StackFrame.prototype['get' + _capitalize(numericProps[j])] = _getter(numericProps[j]);\n        StackFrame.prototype['set' + _capitalize(numericProps[j])] = (function(p) {\n            return function(v) {\n                if (!_isNumber(v)) {\n                    throw new TypeError(p + ' must be a Number');\n                }\n                this[p] = Number(v);\n            };\n        })(numericProps[j]);\n    }\n\n    for (var k = 0; k < stringProps.length; k++) {\n        StackFrame.prototype['get' + _capitalize(stringProps[k])] = _getter(stringProps[k]);\n        StackFrame.prototype['set' + _capitalize(stringProps[k])] = (function(p) {\n            return function(v) {\n                this[p] = String(v);\n            };\n        })(stringProps[k]);\n    }\n\n    return StackFrame;\n}));\n","/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nvar base64VLQ = require('./base64-vlq');\nvar util = require('./util');\nvar ArraySet = require('./array-set').ArraySet;\nvar MappingList = require('./mapping-list').MappingList;\n\n/**\n * An instance of the SourceMapGenerator represents a source map which is\n * being built incrementally. You may pass an object with the following\n * properties:\n *\n *   - file: The filename of the generated source.\n *   - sourceRoot: A root for all relative URLs in this source map.\n */\nfunction SourceMapGenerator(aArgs) {\n  if (!aArgs) {\n    aArgs = {};\n  }\n  this._file = util.getArg(aArgs, 'file', null);\n  this._sourceRoot = util.getArg(aArgs, 'sourceRoot', null);\n  this._skipValidation = util.getArg(aArgs, 'skipValidation', false);\n  this._sources = new ArraySet();\n  this._names = new ArraySet();\n  this._mappings = new MappingList();\n  this._sourcesContents = null;\n}\n\nSourceMapGenerator.prototype._version = 3;\n\n/**\n * Creates a new SourceMapGenerator based on a SourceMapConsumer\n *\n * @param aSourceMapConsumer The SourceMap.\n */\nSourceMapGenerator.fromSourceMap =\n  function SourceMapGenerator_fromSourceMap(aSourceMapConsumer) {\n    var sourceRoot = aSourceMapConsumer.sourceRoot;\n    var generator = new SourceMapGenerator({\n      file: aSourceMapConsumer.file,\n      sourceRoot: sourceRoot\n    });\n    aSourceMapConsumer.eachMapping(function (mapping) {\n      var newMapping = {\n        generated: {\n          line: mapping.generatedLine,\n          column: mapping.generatedColumn\n        }\n      };\n\n      if (mapping.source != null) {\n        newMapping.source = mapping.source;\n        if (sourceRoot != null) {\n          newMapping.source = util.relative(sourceRoot, newMapping.source);\n        }\n\n        newMapping.original = {\n          line: mapping.originalLine,\n          column: mapping.originalColumn\n        };\n\n        if (mapping.name != null) {\n          newMapping.name = mapping.name;\n        }\n      }\n\n      generator.addMapping(newMapping);\n    });\n    aSourceMapConsumer.sources.forEach(function (sourceFile) {\n      var content = aSourceMapConsumer.sourceContentFor(sourceFile);\n      if (content != null) {\n        generator.setSourceContent(sourceFile, content);\n      }\n    });\n    return generator;\n  };\n\n/**\n * Add a single mapping from original source line and column to the generated\n * source's line and column for this source map being created. The mapping\n * object should have the following properties:\n *\n *   - generated: An object with the generated line and column positions.\n *   - original: An object with the original line and column positions.\n *   - source: The original source file (relative to the sourceRoot).\n *   - name: An optional original token name for this mapping.\n */\nSourceMapGenerator.prototype.addMapping =\n  function SourceMapGenerator_addMapping(aArgs) {\n    var generated = util.getArg(aArgs, 'generated');\n    var original = util.getArg(aArgs, 'original', null);\n    var source = util.getArg(aArgs, 'source', null);\n    var name = util.getArg(aArgs, 'name', null);\n\n    if (!this._skipValidation) {\n      this._validateMapping(generated, original, source, name);\n    }\n\n    if (source != null) {\n      source = String(source);\n      if (!this._sources.has(source)) {\n        this._sources.add(source);\n      }\n    }\n\n    if (name != null) {\n      name = String(name);\n      if (!this._names.has(name)) {\n        this._names.add(name);\n      }\n    }\n\n    this._mappings.add({\n      generatedLine: generated.line,\n      generatedColumn: generated.column,\n      originalLine: original != null && original.line,\n      originalColumn: original != null && original.column,\n      source: source,\n      name: name\n    });\n  };\n\n/**\n * Set the source content for a source file.\n */\nSourceMapGenerator.prototype.setSourceContent =\n  function SourceMapGenerator_setSourceContent(aSourceFile, aSourceContent) {\n    var source = aSourceFile;\n    if (this._sourceRoot != null) {\n      source = util.relative(this._sourceRoot, source);\n    }\n\n    if (aSourceContent != null) {\n      // Add the source content to the _sourcesContents map.\n      // Create a new _sourcesContents map if the property is null.\n      if (!this._sourcesContents) {\n        this._sourcesContents = Object.create(null);\n      }\n      this._sourcesContents[util.toSetString(source)] = aSourceContent;\n    } else if (this._sourcesContents) {\n      // Remove the source file from the _sourcesContents map.\n      // If the _sourcesContents map is empty, set the property to null.\n      delete this._sourcesContents[util.toSetString(source)];\n      if (Object.keys(this._sourcesContents).length === 0) {\n        this._sourcesContents = null;\n      }\n    }\n  };\n\n/**\n * Applies the mappings of a sub-source-map for a specific source file to the\n * source map being generated. Each mapping to the supplied source file is\n * rewritten using the supplied source map. Note: The resolution for the\n * resulting mappings is the minimium of this map and the supplied map.\n *\n * @param aSourceMapConsumer The source map to be applied.\n * @param aSourceFile Optional. The filename of the source file.\n *        If omitted, SourceMapConsumer's file property will be used.\n * @param aSourceMapPath Optional. The dirname of the path to the source map\n *        to be applied. If relative, it is relative to the SourceMapConsumer.\n *        This parameter is needed when the two source maps aren't in the same\n *        directory, and the source map to be applied contains relative source\n *        paths. If so, those relative source paths need to be rewritten\n *        relative to the SourceMapGenerator.\n */\nSourceMapGenerator.prototype.applySourceMap =\n  function SourceMapGenerator_applySourceMap(aSourceMapConsumer, aSourceFile, aSourceMapPath) {\n    var sourceFile = aSourceFile;\n    // If aSourceFile is omitted, we will use the file property of the SourceMap\n    if (aSourceFile == null) {\n      if (aSourceMapConsumer.file == null) {\n        throw new Error(\n          'SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, ' +\n          'or the source map\\'s \"file\" property. Both were omitted.'\n        );\n      }\n      sourceFile = aSourceMapConsumer.file;\n    }\n    var sourceRoot = this._sourceRoot;\n    // Make \"sourceFile\" relative if an absolute Url is passed.\n    if (sourceRoot != null) {\n      sourceFile = util.relative(sourceRoot, sourceFile);\n    }\n    // Applying the SourceMap can add and remove items from the sources and\n    // the names array.\n    var newSources = new ArraySet();\n    var newNames = new ArraySet();\n\n    // Find mappings for the \"sourceFile\"\n    this._mappings.unsortedForEach(function (mapping) {\n      if (mapping.source === sourceFile && mapping.originalLine != null) {\n        // Check if it can be mapped by the source map, then update the mapping.\n        var original = aSourceMapConsumer.originalPositionFor({\n          line: mapping.originalLine,\n          column: mapping.originalColumn\n        });\n        if (original.source != null) {\n          // Copy mapping\n          mapping.source = original.source;\n          if (aSourceMapPath != null) {\n            mapping.source = util.join(aSourceMapPath, mapping.source)\n          }\n          if (sourceRoot != null) {\n            mapping.source = util.relative(sourceRoot, mapping.source);\n          }\n          mapping.originalLine = original.line;\n          mapping.originalColumn = original.column;\n          if (original.name != null) {\n            mapping.name = original.name;\n          }\n        }\n      }\n\n      var source = mapping.source;\n      if (source != null && !newSources.has(source)) {\n        newSources.add(source);\n      }\n\n      var name = mapping.name;\n      if (name != null && !newNames.has(name)) {\n        newNames.add(name);\n      }\n\n    }, this);\n    this._sources = newSources;\n    this._names = newNames;\n\n    // Copy sourcesContents of applied map.\n    aSourceMapConsumer.sources.forEach(function (sourceFile) {\n      var content = aSourceMapConsumer.sourceContentFor(sourceFile);\n      if (content != null) {\n        if (aSourceMapPath != null) {\n          sourceFile = util.join(aSourceMapPath, sourceFile);\n        }\n        if (sourceRoot != null) {\n          sourceFile = util.relative(sourceRoot, sourceFile);\n        }\n        this.setSourceContent(sourceFile, content);\n      }\n    }, this);\n  };\n\n/**\n * A mapping can have one of the three levels of data:\n *\n *   1. Just the generated position.\n *   2. The Generated position, original position, and original source.\n *   3. Generated and original position, original source, as well as a name\n *      token.\n *\n * To maintain consistency, we validate that any new mapping being added falls\n * in to one of these categories.\n */\nSourceMapGenerator.prototype._validateMapping =\n  function SourceMapGenerator_validateMapping(aGenerated, aOriginal, aSource,\n                                              aName) {\n    if (aGenerated && 'line' in aGenerated && 'column' in aGenerated\n        && aGenerated.line > 0 && aGenerated.column >= 0\n        && !aOriginal && !aSource && !aName) {\n      // Case 1.\n      return;\n    }\n    else if (aGenerated && 'line' in aGenerated && 'column' in aGenerated\n             && aOriginal && 'line' in aOriginal && 'column' in aOriginal\n             && aGenerated.line > 0 && aGenerated.column >= 0\n             && aOriginal.line > 0 && aOriginal.column >= 0\n             && aSource) {\n      // Cases 2 and 3.\n      return;\n    }\n    else {\n      throw new Error('Invalid mapping: ' + JSON.stringify({\n        generated: aGenerated,\n        source: aSource,\n        original: aOriginal,\n        name: aName\n      }));\n    }\n  };\n\n/**\n * Serialize the accumulated mappings in to the stream of base 64 VLQs\n * specified by the source map format.\n */\nSourceMapGenerator.prototype._serializeMappings =\n  function SourceMapGenerator_serializeMappings() {\n    var previousGeneratedColumn = 0;\n    var previousGeneratedLine = 1;\n    var previousOriginalColumn = 0;\n    var previousOriginalLine = 0;\n    var previousName = 0;\n    var previousSource = 0;\n    var result = '';\n    var next;\n    var mapping;\n    var nameIdx;\n    var sourceIdx;\n\n    var mappings = this._mappings.toArray();\n    for (var i = 0, len = mappings.length; i < len; i++) {\n      mapping = mappings[i];\n      next = ''\n\n      if (mapping.generatedLine !== previousGeneratedLine) {\n        previousGeneratedColumn = 0;\n        while (mapping.generatedLine !== previousGeneratedLine) {\n          next += ';';\n          previousGeneratedLine++;\n        }\n      }\n      else {\n        if (i > 0) {\n          if (!util.compareByGeneratedPositionsInflated(mapping, mappings[i - 1])) {\n            continue;\n          }\n          next += ',';\n        }\n      }\n\n      next += base64VLQ.encode(mapping.generatedColumn\n                                 - previousGeneratedColumn);\n      previousGeneratedColumn = mapping.generatedColumn;\n\n      if (mapping.source != null) {\n        sourceIdx = this._sources.indexOf(mapping.source);\n        next += base64VLQ.encode(sourceIdx - previousSource);\n        previousSource = sourceIdx;\n\n        // lines are stored 0-based in SourceMap spec version 3\n        next += base64VLQ.encode(mapping.originalLine - 1\n                                   - previousOriginalLine);\n        previousOriginalLine = mapping.originalLine - 1;\n\n        next += base64VLQ.encode(mapping.originalColumn\n                                   - previousOriginalColumn);\n        previousOriginalColumn = mapping.originalColumn;\n\n        if (mapping.name != null) {\n          nameIdx = this._names.indexOf(mapping.name);\n          next += base64VLQ.encode(nameIdx - previousName);\n          previousName = nameIdx;\n        }\n      }\n\n      result += next;\n    }\n\n    return result;\n  };\n\nSourceMapGenerator.prototype._generateSourcesContent =\n  function SourceMapGenerator_generateSourcesContent(aSources, aSourceRoot) {\n    return aSources.map(function (source) {\n      if (!this._sourcesContents) {\n        return null;\n      }\n      if (aSourceRoot != null) {\n        source = util.relative(aSourceRoot, source);\n      }\n      var key = util.toSetString(source);\n      return Object.prototype.hasOwnProperty.call(this._sourcesContents, key)\n        ? this._sourcesContents[key]\n        : null;\n    }, this);\n  };\n\n/**\n * Externalize the source map.\n */\nSourceMapGenerator.prototype.toJSON =\n  function SourceMapGenerator_toJSON() {\n    var map = {\n      version: this._version,\n      sources: this._sources.toArray(),\n      names: this._names.toArray(),\n      mappings: this._serializeMappings()\n    };\n    if (this._file != null) {\n      map.file = this._file;\n    }\n    if (this._sourceRoot != null) {\n      map.sourceRoot = this._sourceRoot;\n    }\n    if (this._sourcesContents) {\n      map.sourcesContent = this._generateSourcesContent(map.sources, map.sourceRoot);\n    }\n\n    return map;\n  };\n\n/**\n * Render the source map being generated to a string.\n */\nSourceMapGenerator.prototype.toString =\n  function SourceMapGenerator_toString() {\n    return JSON.stringify(this.toJSON());\n  };\n\nexports.SourceMapGenerator = SourceMapGenerator;\n","/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n *\n * Based on the Base 64 VLQ implementation in Closure Compiler:\n * https://code.google.com/p/closure-compiler/source/browse/trunk/src/com/google/debugging/sourcemap/Base64VLQ.java\n *\n * Copyright 2011 The Closure Compiler Authors. All rights reserved.\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n *  * Redistributions of source code must retain the above copyright\n *    notice, this list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above\n *    copyright notice, this list of conditions and the following\n *    disclaimer in the documentation and/or other materials provided\n *    with the distribution.\n *  * Neither the name of Google Inc. nor the names of its\n *    contributors may be used to endorse or promote products derived\n *    from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nvar base64 = require('./base64');\n\n// A single base 64 digit can contain 6 bits of data. For the base 64 variable\n// length quantities we use in the source map spec, the first bit is the sign,\n// the next four bits are the actual value, and the 6th bit is the\n// continuation bit. The continuation bit tells us whether there are more\n// digits in this value following this digit.\n//\n//   Continuation\n//   |    Sign\n//   |    |\n//   V    V\n//   101011\n\nvar VLQ_BASE_SHIFT = 5;\n\n// binary: 100000\nvar VLQ_BASE = 1 << VLQ_BASE_SHIFT;\n\n// binary: 011111\nvar VLQ_BASE_MASK = VLQ_BASE - 1;\n\n// binary: 100000\nvar VLQ_CONTINUATION_BIT = VLQ_BASE;\n\n/**\n * Converts from a two-complement value to a value where the sign bit is\n * placed in the least significant bit.  For example, as decimals:\n *   1 becomes 2 (10 binary), -1 becomes 3 (11 binary)\n *   2 becomes 4 (100 binary), -2 becomes 5 (101 binary)\n */\nfunction toVLQSigned(aValue) {\n  return aValue < 0\n    ? ((-aValue) << 1) + 1\n    : (aValue << 1) + 0;\n}\n\n/**\n * Converts to a two-complement value from a value where the sign bit is\n * placed in the least significant bit.  For example, as decimals:\n *   2 (10 binary) becomes 1, 3 (11 binary) becomes -1\n *   4 (100 binary) becomes 2, 5 (101 binary) becomes -2\n */\nfunction fromVLQSigned(aValue) {\n  var isNegative = (aValue & 1) === 1;\n  var shifted = aValue >> 1;\n  return isNegative\n    ? -shifted\n    : shifted;\n}\n\n/**\n * Returns the base 64 VLQ encoded value.\n */\nexports.encode = function base64VLQ_encode(aValue) {\n  var encoded = \"\";\n  var digit;\n\n  var vlq = toVLQSigned(aValue);\n\n  do {\n    digit = vlq & VLQ_BASE_MASK;\n    vlq >>>= VLQ_BASE_SHIFT;\n    if (vlq > 0) {\n      // There are still more digits in this value, so we must make sure the\n      // continuation bit is marked.\n      digit |= VLQ_CONTINUATION_BIT;\n    }\n    encoded += base64.encode(digit);\n  } while (vlq > 0);\n\n  return encoded;\n};\n\n/**\n * Decodes the next base 64 VLQ value from the given string and returns the\n * value and the rest of the string via the out parameter.\n */\nexports.decode = function base64VLQ_decode(aStr, aIndex, aOutParam) {\n  var strLen = aStr.length;\n  var result = 0;\n  var shift = 0;\n  var continuation, digit;\n\n  do {\n    if (aIndex >= strLen) {\n      throw new Error(\"Expected more digits in base 64 VLQ value.\");\n    }\n\n    digit = base64.decode(aStr.charCodeAt(aIndex++));\n    if (digit === -1) {\n      throw new Error(\"Invalid base64 digit: \" + aStr.charAt(aIndex - 1));\n    }\n\n    continuation = !!(digit & VLQ_CONTINUATION_BIT);\n    digit &= VLQ_BASE_MASK;\n    result = result + (digit << shift);\n    shift += VLQ_BASE_SHIFT;\n  } while (continuation);\n\n  aOutParam.value = fromVLQSigned(result);\n  aOutParam.rest = aIndex;\n};\n","/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nvar util = require('./util');\nvar has = Object.prototype.hasOwnProperty;\n\n/**\n * A data structure which is a combination of an array and a set. Adding a new\n * member is O(1), testing for membership is O(1), and finding the index of an\n * element is O(1). Removing elements from the set is not supported. Only\n * strings are supported for membership.\n */\nfunction ArraySet() {\n  this._array = [];\n  this._set = Object.create(null);\n}\n\n/**\n * Static method for creating ArraySet instances from an existing array.\n */\nArraySet.fromArray = function ArraySet_fromArray(aArray, aAllowDuplicates) {\n  var set = new ArraySet();\n  for (var i = 0, len = aArray.length; i < len; i++) {\n    set.add(aArray[i], aAllowDuplicates);\n  }\n  return set;\n};\n\n/**\n * Return how many unique items are in this ArraySet. If duplicates have been\n * added, than those do not count towards the size.\n *\n * @returns Number\n */\nArraySet.prototype.size = function ArraySet_size() {\n  return Object.getOwnPropertyNames(this._set).length;\n};\n\n/**\n * Add the given string to this set.\n *\n * @param String aStr\n */\nArraySet.prototype.add = function ArraySet_add(aStr, aAllowDuplicates) {\n  var sStr = util.toSetString(aStr);\n  var isDuplicate = has.call(this._set, sStr);\n  var idx = this._array.length;\n  if (!isDuplicate || aAllowDuplicates) {\n    this._array.push(aStr);\n  }\n  if (!isDuplicate) {\n    this._set[sStr] = idx;\n  }\n};\n\n/**\n * Is the given string a member of this set?\n *\n * @param String aStr\n */\nArraySet.prototype.has = function ArraySet_has(aStr) {\n  var sStr = util.toSetString(aStr);\n  return has.call(this._set, sStr);\n};\n\n/**\n * What is the index of the given string in the array?\n *\n * @param String aStr\n */\nArraySet.prototype.indexOf = function ArraySet_indexOf(aStr) {\n  var sStr = util.toSetString(aStr);\n  if (has.call(this._set, sStr)) {\n    return this._set[sStr];\n  }\n  throw new Error('\"' + aStr + '\" is not in the set.');\n};\n\n/**\n * What is the element at the given index?\n *\n * @param Number aIdx\n */\nArraySet.prototype.at = function ArraySet_at(aIdx) {\n  if (aIdx >= 0 && aIdx < this._array.length) {\n    return this._array[aIdx];\n  }\n  throw new Error('No element indexed by ' + aIdx);\n};\n\n/**\n * Returns the array representation of this set (which has the proper indices\n * indicated by indexOf). Note that this is a copy of the internal array used\n * for storing the members so that no one can mess with internal state.\n */\nArraySet.prototype.toArray = function ArraySet_toArray() {\n  return this._array.slice();\n};\n\nexports.ArraySet = ArraySet;\n"],"sourceRoot":""}