(window.webpackJsonp=window.webpackJsonp||[]).push([[457],{1261:function(e,t,s){"use strict";s.r(t);var a=s(0),i=s(2),o=s.n(i),c=s(1),n=s(7),l=s(21),r=s(43),d=s(84),h=s(19),b=s(28),u=s(10),g=s(130),p=s(271),m=s(164),j=s(268),O=s(298),v=s(5),_=s(63),x=s(1116),y=s(165),M=(s(33),s(11)),f=s.n(M),k=s(82),L=s(166),N=s(77),w=s(47),C=s(65),I=s(4);class P extends c.PureComponent{constructor(){super(...arguments),this.state={thumbnailLoaded:!1},this.handleImageLoad=()=>this.setState({thumbnailLoaded:!0})}render(){const{expanded:e,url:t,title:s,lang:i,publisher:o,author:c,publishedAt:n,sharedTimes:r,thumbnail:d,thumbnailDescription:h,blurhash:b}=this.props,{thumbnailLoaded:u}=this.state;return Object(a.a)("a",{className:f()("story",{expanded:e}),href:t,target:"blank",rel:"noopener"},void 0,Object(a.a)("div",{className:"story__details"},void 0,Object(a.a)("div",{className:"story__details__publisher"},void 0,o?Object(a.a)("span",{lang:i},void 0,o):Object(a.a)(C.a,{width:50}),n&&Object(I.jsxs)(I.Fragment,{children:[" · ",Object(a.a)(N.a,{timestamp:n})]})),Object(a.a)("div",{className:"story__details__title",lang:i},void 0,s||Object(a.a)(C.a,{})),Object(a.a)("div",{className:"story__details__shared"},void 0,c&&Object(I.jsxs)(I.Fragment,{children:[Object(a.a)(l.a,{id:"link_preview.author",defaultMessage:"By {name}",values:{name:Object(a.a)("strong",{},void 0,c)}})," · "]}),"number"==typeof r?Object(a.a)(w.a,{value:r,renderer:L.b}):Object(a.a)(C.a,{width:100}))),Object(a.a)("div",{className:"story__thumbnail"},void 0,d?Object(I.jsxs)(I.Fragment,{children:[Object(a.a)("div",{className:f()("story__thumbnail__preview",{"story__thumbnail__preview--hidden":u})},void 0,Object(a.a)(k.a,{hash:b})),Object(a.a)("img",{src:d,onLoad:this.handleImageLoad,alt:h,title:h,lang:i})]}):Object(a.a)(C.a,{})))}}class S extends c.PureComponent{componentDidMount(){const{dispatch:e,links:t,history:s}=this.props;"POP"===s.action&&t.size>0||e(Object(_.o)())}render(){const{isLoading:e,links:t}=this.props,s=Object(a.a)(x.a,{id:"explore/links"},void 0,Object(a.a)(l.a,{id:"dismissable_banner.explore_links",defaultMessage:"These are news stories being shared the most on the social web today. Newer news stories posted by more different people are ranked higher."}));return!e&&t.isEmpty()?Object(a.a)("div",{className:"explore__links scrollable scrollable--flex"},void 0,s,Object(a.a)("div",{className:"empty-column-indicator"},void 0,Object(a.a)(l.a,{id:"empty_column.explore_statuses",defaultMessage:"Nothing is trending right now. Check back later!"}))):Object(a.a)("div",{className:"explore__links scrollable","data-nosnippet":!0},void 0,s,e?Object(a.a)(y.a,{}):t.map(((e,t)=>Object(a.a)(P,{expanded:0===t,lang:e.get("language"),url:e.get("url"),title:e.get("title"),publisher:e.get("provider_name"),publishedAt:e.get("published_at"),author:e.get("author_name"),sharedTimes:1*e.getIn(["history",0,"accounts"])+1*e.getIn(["history",1,"accounts"]),thumbnail:e.get("image"),thumbnailDescription:e.get("image_description"),blurhash:e.get("blurhash")},e.get("id")))))}}var T=Object(u.connect)((e=>({links:e.getIn(["trends","links","items"]),isLoading:e.getIn(["trends","links","isLoading"])})))(Object(b.h)(S)),z=s(3),D=s(1124),H=s(272),F=s(37),A=s(15),q=s(269),E=s(270),R=s(232),J=s(1125);const K=Object(n.d)({title:{id:"search_results.title",defaultMessage:"Search for {q}"}}),B=e=>e.size>10&&e.size%10==1?e.skipLast(1):e;class G extends c.PureComponent{constructor(){super(...arguments),this.state={type:this.props.submittedType||"all"},this.handleSelectAll=()=>{const{submittedType:e,dispatch:t}=this.props;e&&t(Object(F.s)()),this.setState({type:"all"})},this.handleSelectAccounts=()=>{const{submittedType:e,dispatch:t}=this.props;"accounts"!==e&&t(Object(F.s)("accounts")),this.setState({type:"accounts"})},this.handleSelectHashtags=()=>{const{submittedType:e,dispatch:t}=this.props;"hashtags"!==e&&t(Object(F.s)("hashtags")),this.setState({type:"hashtags"})},this.handleSelectStatuses=()=>{const{submittedType:e,dispatch:t}=this.props;"statuses"!==e&&t(Object(F.s)("statuses")),this.setState({type:"statuses"})},this.handleLoadMoreAccounts=()=>this._loadMore("accounts"),this.handleLoadMoreStatuses=()=>this._loadMore("statuses"),this.handleLoadMoreHashtags=()=>this._loadMore("hashtags"),this.handleLoadMore=()=>{const{type:e}=this.state;"all"!==e&&this._loadMore(e)}}static getDerivedStateFromProps(e,t){return e.submittedType!==t.type?{type:e.submittedType||"all"}:null}_loadMore(e){const{dispatch:t}=this.props;t(Object(F.n)(e))}render(){const{intl:e,isLoading:t,q:s,results:i}=this.props,{type:o}=this.state,c="all"!==o&&(i.get(o,Object(z.List)()).size>10&&i.get(o).size%10==1);let n;const r=i.get("accounts",Object(z.List)()),h=i.get("hashtags",Object(z.List)()),b=i.get("statuses",Object(z.List)());switch(o){case"all":n=r.size+h.size+b.size>0?Object(I.jsxs)(I.Fragment,{children:[r.size>0&&Object(a.a)(J.a,{title:Object(I.jsxs)(I.Fragment,{children:[Object(a.a)(A.a,{id:"users",icon:H.a}),Object(a.a)(l.a,{id:"search_results.accounts",defaultMessage:"Profiles"})]}),onClickMore:this.handleLoadMoreAccounts},"accounts",r.take(4).map((e=>Object(a.a)(E.a,{id:e},e)))),h.size>0&&Object(a.a)(J.a,{title:Object(I.jsxs)(I.Fragment,{children:[Object(a.a)(A.a,{id:"hashtag",icon:p.a}),Object(a.a)(l.a,{id:"search_results.hashtags",defaultMessage:"Hashtags"})]}),onClickMore:this.handleLoadMoreHashtags},"hashtags",h.take(4).map((e=>Object(a.a)(L.a,{hashtag:e},e.get("name"))))),b.size>0&&Object(a.a)(J.a,{title:Object(I.jsxs)(I.Fragment,{children:[Object(a.a)(A.a,{id:"quote-right",icon:D.a}),Object(a.a)(l.a,{id:"search_results.statuses",defaultMessage:"Posts"})]}),onClickMore:this.handleLoadMoreStatuses},"statuses",b.take(4).map((e=>Object(a.a)(R.a,{id:e},e))))]}):[];break;case"accounts":n=(e=>B(e).map((e=>Object(a.a)(E.a,{id:e},e))))(r);break;case"hashtags":n=(e=>B(e).map((e=>Object(a.a)(L.a,{hashtag:e},e.get("name")))))(h);break;case"statuses":n=(e=>B(e).map((e=>Object(a.a)(R.a,{id:e},e))))(b)}return Object(I.jsxs)(I.Fragment,{children:[Object(a.a)("div",{className:"account__section-headline"},void 0,Object(a.a)("button",{onClick:this.handleSelectAll,className:"all"===o?"active":void 0},void 0,Object(a.a)(l.a,{id:"search_results.all",defaultMessage:"All"})),Object(a.a)("button",{onClick:this.handleSelectAccounts,className:"accounts"===o?"active":void 0},void 0,Object(a.a)(l.a,{id:"search_results.accounts",defaultMessage:"Profiles"})),Object(a.a)("button",{onClick:this.handleSelectHashtags,className:"hashtags"===o?"active":void 0},void 0,Object(a.a)(l.a,{id:"search_results.hashtags",defaultMessage:"Hashtags"})),Object(a.a)("button",{onClick:this.handleSelectStatuses,className:"statuses"===o?"active":void 0},void 0,Object(a.a)(l.a,{id:"search_results.statuses",defaultMessage:"Posts"}))),Object(a.a)("div",{className:"explore__search-results","data-nosnippet":!0},void 0,Object(a.a)(q.a,{scrollKey:"search-results",isLoading:t,onLoadMore:this.handleLoadMore,hasMore:c,emptyMessage:Object(a.a)(l.a,{id:"search_results.nothing_found",defaultMessage:"Could not find anything for these search terms"}),bindToDocument:!0},void 0,n)),Object(a.a)(d.a,{},void 0,Object(a.a)("title",{},void 0,e.formatMessage(K.title,{q:s})))]})}}var Q=Object(u.connect)((e=>({isLoading:e.getIn(["search","isLoading"]),results:e.getIn(["search","results"]),q:e.getIn(["search","searchTerm"]),submittedType:e.getIn(["search","type"])})))(Object(r.c)(G)),U=s(46),V=s.n(U),W=s(276),X=s(38);class Y extends c.PureComponent{constructor(){super(...arguments),this.handleLoadMore=V()((()=>{const{dispatch:e}=this.props;e(Object(_.m)())}),300,{leading:!0})}componentDidMount(){const{dispatch:e,statusIds:t,history:s}=this.props;"POP"===s.action&&t.size>0||e(Object(_.p)())}render(){const{isLoading:e,hasMore:t,statusIds:s,multiColumn:i}=this.props,o=Object(a.a)(l.a,{id:"empty_column.explore_statuses",defaultMessage:"Nothing is trending right now. Check back later!"});return Object(a.a)(W.a,{trackScroll:!0,prepend:Object(a.a)(x.a,{id:"explore/statuses"},void 0,Object(a.a)(l.a,{id:"dismissable_banner.explore_statuses",defaultMessage:"These are posts from across the social web that are gaining traction today. Newer posts with more boosts and favorites are ranked higher."})),alwaysPrepend:!0,timelineId:"explore",statusIds:s,scrollKey:"explore-statuses",hasMore:t,isLoading:e,onLoadMore:this.handleLoadMore,emptyMessage:o,bindToDocument:!i,withCounters:!0})}}var Z=Object(u.connect)((e=>({statusIds:Object(X.d)(e,"trending"),isLoading:e.getIn(["status_lists","trending","isLoading"],!0),hasMore:!!e.getIn(["status_lists","trending","next"])})))(Object(b.h)(Y)),$=s(160),ee=s(1132);class te extends c.PureComponent{componentDidMount(){const{dispatch:e,suggestions:t,history:s}=this.props;"POP"===s.action&&t.size>0||e(Object($.f)(!0))}render(){const{isLoading:e,suggestions:t}=this.props;return!e&&t.isEmpty()?Object(a.a)("div",{className:"explore__suggestions scrollable scrollable--flex"},void 0,Object(a.a)("div",{className:"empty-column-indicator"},void 0,Object(a.a)(l.a,{id:"empty_column.explore_statuses",defaultMessage:"Nothing is trending right now. Check back later!"}))):Object(a.a)("div",{className:"explore__suggestions scrollable","data-nosnippet":!0},void 0,e?Object(a.a)(y.a,{}):t.map((e=>Object(a.a)(ee.a,{id:e.get("account")},e.get("account")))))}}var se=Object(u.connect)((e=>({suggestions:e.getIn(["suggestions","items"]),isLoading:e.getIn(["suggestions","isLoading"])})))(Object(b.h)(te));class ae extends c.PureComponent{componentDidMount(){const{dispatch:e,history:t,hashtags:s}=this.props;"POP"===t.action&&s.size>0||e(Object(_.n)())}render(){const{isLoading:e,hashtags:t}=this.props,s=Object(a.a)(x.a,{id:"explore/tags"},void 0,Object(a.a)(l.a,{id:"dismissable_banner.explore_tags",defaultMessage:"These are hashtags that are gaining traction on the social web today. Hashtags that are used by more different people are ranked higher."}));return!e&&t.isEmpty()?Object(a.a)("div",{className:"explore__links scrollable scrollable--flex"},void 0,s,Object(a.a)("div",{className:"empty-column-indicator"},void 0,Object(a.a)(l.a,{id:"empty_column.explore_statuses",defaultMessage:"Nothing is trending right now. Check back later!"}))):Object(a.a)("div",{className:"scrollable explore__links","data-nosnippet":!0},void 0,s,e?Object(a.a)(y.a,{}):t.map((e=>Object(a.a)(L.a,{hashtag:e},e.get("name")))))}}var ie=Object(u.connect)((e=>({hashtags:e.getIn(["trends","tags","items"]),isLoadingHashtags:e.getIn(["trends","tags","isLoading"])})))(Object(b.h)(ae));const oe=Object(n.d)({title:{id:"explore.title",defaultMessage:"Explore"},searchResults:{id:"explore.search_results",defaultMessage:"Search results"}});class ce extends c.PureComponent{constructor(){super(...arguments),this.handleHeaderClick=()=>{this.column.scrollTop()},this.setRef=e=>{this.column=e}}render(){const{intl:e,multiColumn:t,isSearching:s}=this.props,{signedIn:i}=this.context.identity;return Object(I.jsxs)(m.a,{bindToDocument:!t,ref:this.setRef,label:e.formatMessage(oe.title),children:[Object(a.a)(j.a,{icon:s?"search":"hashtag",iconComponent:s?g.a:p.a,title:e.formatMessage(s?oe.searchResults:oe.title),onClick:this.handleHeaderClick,multiColumn:t}),Object(a.a)("div",{className:"explore__search-header"},void 0,Object(a.a)(O.a,{})),s?Object(a.a)(Q,{}):Object(I.jsxs)(I.Fragment,{children:[Object(a.a)("div",{className:"account__section-headline"},void 0,Object(a.a)(h.b,{exact:!0,to:"/explore"},void 0,Object(a.a)(l.a,{tagName:"div",id:"explore.trending_statuses",defaultMessage:"Posts"})),Object(a.a)(h.b,{exact:!0,to:"/explore/tags"},void 0,Object(a.a)(l.a,{tagName:"div",id:"explore.trending_tags",defaultMessage:"Hashtags"})),i&&Object(a.a)(h.b,{exact:!0,to:"/explore/suggestions"},void 0,Object(a.a)(l.a,{tagName:"div",id:"explore.suggested_follows",defaultMessage:"People"})),Object(a.a)(h.b,{exact:!0,to:"/explore/links"},void 0,Object(a.a)(l.a,{tagName:"div",id:"explore.trending_links",defaultMessage:"News"}))),Object(a.a)(b.d,{},void 0,Object(a.a)(b.b,{path:"/explore/tags",component:ie}),Object(a.a)(b.b,{path:"/explore/links",component:T}),Object(a.a)(b.b,{path:"/explore/suggestions",component:se}),Object(a.a)(b.b,{exact:!0,path:["/explore","/explore/posts","/search"]},void 0,Object(a.a)(Z,{multiColumn:t}))),Object(a.a)(d.a,{},void 0,Object(a.a)("title",{},void 0,e.formatMessage(oe.title)),Object(a.a)("meta",{name:"robots",content:s?"noindex":"all"}))]})]})}}ce.contextTypes={identity:o.a.object};t.default=Object(u.connect)((e=>({layout:e.getIn(["meta","layout"]),isSearching:e.getIn(["search","submitted"])||!v.D})))(Object(r.c)(ce))}}]);
//# sourceMappingURL=explore-efb38e4ebb9c8714492a.chunk.js.map