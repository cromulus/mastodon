{"version":3,"sources":["webpack:///./node_modules/@material-symbols/svg-600/outlined/delete.svg","webpack:///./app/javascript/mastodon/features/list_timeline/index.jsx"],"names":["_path","_extends","Object","assign","bind","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","SvgDelete","_ref","title","titleId","props","xmlns","width","height","viewBox","id","d","messages","defineMessages","deleteMessage","defaultMessage","deleteConfirm","followed","none","list","ListTimeline","PureComponent","constructor","_defineProperty","columnId","dispatch","removeColumn","addColumn","params","history","push","dir","moveColumn","column","scrollTop","c","maxId","expandListTimeline","openModal","modalType","modalProps","listId","intl","message","formatMessage","confirm","onConfirm","deleteList","updateList","undefined","value","_ref2","checked","componentDidMount","fetchList","disconnect","connectListStream","UNSAFE_componentWillReceiveProps","nextProps","componentWillUnmount","render","hasUnread","multiColumn","pinned","get","replies_policy","isExclusive","_jsx","Column","className","LoadingIndicator","BundleColumnError","errorType","_jsxs","bindToDocument","ref","setRef","label","children","ColumnHeader","icon","iconComponent","ListAltIcon","active","onPin","handlePin","onMove","handleMove","onClick","handleHeaderClick","type","tabIndex","handleEditClick","Icon","EditIcon","FormattedMessage","handleDeleteClick","DeleteIcon","Toggle","onChange","onExclusiveToggle","htmlFor","role","map","policy","RadioButton","name","handleRepliesPolicyChange","StatusListContainer","trackScroll","scrollKey","timelineId","onLoadMore","handleLoadMore","emptyMessage","Helmet","content","withRouter","connect","mapStateToProps","state","getIn","injectIntl"],"mappings":"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","file":"js/features/list_timeline-c213038fbe573868d3fa.chunk.js","sourcesContent":["var _path;\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport * as React from \"react\";\nfunction SvgDelete(_ref) {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 48,\n    height: 48,\n    viewBox: \"0 -960 960 960\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M256.478-105.869q-33.49 0-56.637-22.981-23.147-22.98-23.147-56.237v-560.391h-50.609v-79.218h212.306v-40.175h282.653v40.175h212.871v79.218h-50.609v560.391q0 32.507-23.522 55.862-23.522 23.356-56.262 23.356H256.478Zm447.044-639.609H256.478v560.391h447.044v-560.391Zm-343.87 478.913h69.609v-399h-69.609v399Zm171.087 0h70.174v-399h-70.174v399ZM256.478-745.478v560.391-560.391Z\"\n  })));\n}\nexport default __webpack_public_path__ + \"media/outlined/delete-3304c184.svg\";\nexport { SvgDelete as ReactComponent };","import PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport { FormattedMessage, defineMessages, injectIntl } from 'react-intl';\n\nimport { Helmet } from 'react-helmet';\nimport { withRouter } from 'react-router-dom';\n\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport { connect } from 'react-redux';\n\nimport { ReactComponent as DeleteIcon } from '@material-symbols/svg-600/outlined/delete.svg';\nimport { ReactComponent as EditIcon } from '@material-symbols/svg-600/outlined/edit.svg';\nimport { ReactComponent as ListAltIcon } from '@material-symbols/svg-600/outlined/list_alt.svg';\nimport Toggle from 'react-toggle';\n\nimport { addColumn, removeColumn, moveColumn } from 'mastodon/actions/columns';\nimport { fetchList, deleteList, updateList } from 'mastodon/actions/lists';\nimport { openModal } from 'mastodon/actions/modal';\nimport { connectListStream } from 'mastodon/actions/streaming';\nimport { expandListTimeline } from 'mastodon/actions/timelines';\nimport Column from 'mastodon/components/column';\nimport ColumnHeader from 'mastodon/components/column_header';\nimport { Icon }  from 'mastodon/components/icon';\nimport { LoadingIndicator } from 'mastodon/components/loading_indicator';\nimport { RadioButton } from 'mastodon/components/radio_button';\nimport BundleColumnError from 'mastodon/features/ui/components/bundle_column_error';\nimport StatusListContainer from 'mastodon/features/ui/containers/status_list_container';\nimport { WithRouterPropTypes } from 'mastodon/utils/react_router';\n\nconst messages = defineMessages({\n  deleteMessage: { id: 'confirmations.delete_list.message', defaultMessage: 'Are you sure you want to permanently delete this list?' },\n  deleteConfirm: { id: 'confirmations.delete_list.confirm', defaultMessage: 'Delete' },\n  followed:   { id: 'lists.replies_policy.followed', defaultMessage: 'Any followed user' },\n  none:    { id: 'lists.replies_policy.none', defaultMessage: 'No one' },\n  list:  { id: 'lists.replies_policy.list', defaultMessage: 'Members of the list' },\n});\n\nconst mapStateToProps = (state, props) => ({\n  list: state.getIn(['lists', props.params.id]),\n  hasUnread: state.getIn(['timelines', `list:${props.params.id}`, 'unread']) > 0,\n});\n\nclass ListTimeline extends PureComponent {\n\n  static propTypes = {\n    params: PropTypes.object.isRequired,\n    dispatch: PropTypes.func.isRequired,\n    columnId: PropTypes.string,\n    hasUnread: PropTypes.bool,\n    multiColumn: PropTypes.bool,\n    list: PropTypes.oneOfType([ImmutablePropTypes.map, PropTypes.bool]),\n    intl: PropTypes.object.isRequired,\n    ...WithRouterPropTypes,\n  };\n\n  handlePin = () => {\n    const { columnId, dispatch } = this.props;\n\n    if (columnId) {\n      dispatch(removeColumn(columnId));\n    } else {\n      dispatch(addColumn('LIST', { id: this.props.params.id }));\n      this.props.history.push('/');\n    }\n  };\n\n  handleMove = (dir) => {\n    const { columnId, dispatch } = this.props;\n    dispatch(moveColumn(columnId, dir));\n  };\n\n  handleHeaderClick = () => {\n    this.column.scrollTop();\n  };\n\n  componentDidMount () {\n    const { dispatch } = this.props;\n    const { id } = this.props.params;\n\n    dispatch(fetchList(id));\n    dispatch(expandListTimeline(id));\n\n    this.disconnect = dispatch(connectListStream(id));\n  }\n\n  UNSAFE_componentWillReceiveProps (nextProps) {\n    const { dispatch } = this.props;\n    const { id } = nextProps.params;\n\n    if (id !== this.props.params.id) {\n      if (this.disconnect) {\n        this.disconnect();\n        this.disconnect = null;\n      }\n\n      dispatch(fetchList(id));\n      dispatch(expandListTimeline(id));\n\n      this.disconnect = dispatch(connectListStream(id));\n    }\n  }\n\n  componentWillUnmount () {\n    if (this.disconnect) {\n      this.disconnect();\n      this.disconnect = null;\n    }\n  }\n\n  setRef = c => {\n    this.column = c;\n  };\n\n  handleLoadMore = maxId => {\n    const { id } = this.props.params;\n    this.props.dispatch(expandListTimeline(id, { maxId }));\n  };\n\n  handleEditClick = () => {\n    this.props.dispatch(openModal({\n      modalType: 'LIST_EDITOR',\n      modalProps: { listId: this.props.params.id },\n    }));\n  };\n\n  handleDeleteClick = () => {\n    const { dispatch, columnId, intl } = this.props;\n    const { id } = this.props.params;\n\n    dispatch(openModal({\n      modalType: 'CONFIRM',\n      modalProps: {\n        message: intl.formatMessage(messages.deleteMessage),\n        confirm: intl.formatMessage(messages.deleteConfirm),\n        onConfirm: () => {\n          dispatch(deleteList(id));\n\n          if (columnId) {\n            dispatch(removeColumn(columnId));\n          } else {\n            this.props.history.push('/lists');\n          }\n        },\n      },\n    }));\n  };\n\n  handleRepliesPolicyChange = ({ target }) => {\n    const { dispatch } = this.props;\n    const { id } = this.props.params;\n    dispatch(updateList(id, undefined, false, undefined, target.value));\n  };\n\n  onExclusiveToggle = ({ target }) => {\n    const { dispatch } = this.props;\n    const { id } = this.props.params;\n    dispatch(updateList(id, undefined, false, target.checked, undefined));\n  };\n\n  render () {\n    const { hasUnread, columnId, multiColumn, list, intl } = this.props;\n    const { id } = this.props.params;\n    const pinned = !!columnId;\n    const title  = list ? list.get('title') : id;\n    const replies_policy = list ? list.get('replies_policy') : undefined;\n    const isExclusive = list ? list.get('exclusive') : undefined;\n\n    if (typeof list === 'undefined') {\n      return (\n        <Column>\n          <div className='scrollable'>\n            <LoadingIndicator />\n          </div>\n        </Column>\n      );\n    } else if (list === false) {\n      return (\n        <BundleColumnError multiColumn={multiColumn} errorType='routing' />\n      );\n    }\n\n    return (\n      <Column bindToDocument={!multiColumn} ref={this.setRef} label={title}>\n        <ColumnHeader\n          icon='list-ul'\n          iconComponent={ListAltIcon}\n          active={hasUnread}\n          title={title}\n          onPin={this.handlePin}\n          onMove={this.handleMove}\n          onClick={this.handleHeaderClick}\n          pinned={pinned}\n          multiColumn={multiColumn}\n        >\n          <div className='column-settings__row column-header__links'>\n            <button type='button' className='text-btn column-header__setting-btn' tabIndex={0} onClick={this.handleEditClick}>\n              <Icon id='pencil' icon={EditIcon} /> <FormattedMessage id='lists.edit' defaultMessage='Edit list' />\n            </button>\n\n            <button type='button' className='text-btn column-header__setting-btn' tabIndex={0} onClick={this.handleDeleteClick}>\n              <Icon id='trash' icon={DeleteIcon} /> <FormattedMessage id='lists.delete' defaultMessage='Delete list' />\n            </button>\n          </div>\n\n          <div className='setting-toggle'>\n            <Toggle id={`list-${id}-exclusive`} checked={isExclusive} onChange={this.onExclusiveToggle} />\n            <label htmlFor={`list-${id}-exclusive`} className='setting-toggle__label'>\n              <FormattedMessage id='lists.exclusive' defaultMessage='Hide these posts from home' />\n            </label>\n          </div>\n\n          { replies_policy !== undefined && (\n            <div role='group' aria-labelledby={`list-${id}-replies-policy`}>\n              <span id={`list-${id}-replies-policy`} className='column-settings__section'>\n                <FormattedMessage id='lists.replies_policy.title' defaultMessage='Show replies to:' />\n              </span>\n              <div className='column-settings__row'>\n                { ['none', 'list', 'followed'].map(policy => (\n                  <RadioButton name='order' key={policy} value={policy} label={intl.formatMessage(messages[policy])} checked={replies_policy === policy} onChange={this.handleRepliesPolicyChange} />\n                ))}\n              </div>\n            </div>\n          )}\n        </ColumnHeader>\n\n        <StatusListContainer\n          trackScroll={!pinned}\n          scrollKey={`list_timeline-${columnId}`}\n          timelineId={`list:${id}`}\n          onLoadMore={this.handleLoadMore}\n          emptyMessage={<FormattedMessage id='empty_column.list' defaultMessage='There is nothing in this list yet. When members of this list post new statuses, they will appear here.' />}\n          bindToDocument={!multiColumn}\n        />\n\n        <Helmet>\n          <title>{title}</title>\n          <meta name='robots' content='noindex' />\n        </Helmet>\n      </Column>\n    );\n  }\n\n}\n\nexport default withRouter(connect(mapStateToProps)(injectIntl(ListTimeline)));\n"],"sourceRoot":""}