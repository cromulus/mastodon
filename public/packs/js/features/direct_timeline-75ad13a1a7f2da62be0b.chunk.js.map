{"version":3,"sources":["webpack:///./app/javascript/mastodon/components/avatar_composite.jsx","webpack:///./app/javascript/mastodon/features/direct_timeline/components/conversation.jsx","webpack:///./app/javascript/mastodon/features/direct_timeline/containers/conversation_container.js","webpack:///./app/javascript/mastodon/features/direct_timeline/components/conversations_list.jsx","webpack:///./app/javascript/mastodon/features/direct_timeline/containers/conversations_list_container.js","webpack:///./app/javascript/mastodon/features/direct_timeline/index.jsx"],"names":["AvatarComposite","PureComponent","renderItem","account","size","index","animate","this","props","width","height","top","left","bottom","right","style","_jsx","get","Avatar","render","accounts","className","take","map","i","Math","min","_defineProperty","autoPlayGif","messages","defineMessages","more","id","defaultMessage","open","reply","markAsRead","delete","muteConversation","unmuteConversation","Conversation","ImmutablePureComponent","constructor","arguments","_ref","currentTarget","emojis","querySelectorAll","length","emoji","src","getAttribute","_ref2","history","lastStatus","unread","markRead","push","getIn","onMoveUp","conversationId","onMoveDown","onMute","onToggleHidden","scrollKey","intl","menu","text","formatMessage","action","handleClick","handleConversationMute","handleMarkAsRead","handleDelete","names","a","Link","to","title","dangerouslySetInnerHTML","__html","reduce","prev","cur","handlers","handleReply","moveUp","handleHotkeyMoveUp","moveDown","handleHotkeyMoveDown","toggleHidden","handleShowMore","HotKeys","classNames","tabIndex","onClick","role","RelativeTimestamp","timestamp","onMouseEnter","handleMouseEnter","onMouseLeave","handleMouseLeave","FormattedMessage","values","StatusContent","status","expanded","onExpandedToggle","collapsible","AttachmentList","compact","media","IconButton","icon","iconComponent","ReplyIcon","DropdownMenuContainer","items","MoreHorizIcon","direction","PropTypes","string","isRequired","ImmutablePropTypes","list","bool","func","object","WithRouterPropTypes","withRouter","injectIntl","replyConfirm","replyMessage","connect","mapStateToProps","getStatus","makeGetStatus","state","conversation","find","x","lastStatusId","accountId","mapDispatchToProps","dispatch","markConversationRead","router","_","getState","trim","openModal","modalType","modalProps","message","confirm","onConfirm","replyCompose","deleteConversation","unmuteStatus","muteStatus","revealStatus","hideStatus","ConversationsList","conversations","findIndex","elementIndex","getCurrentIndex","_selectChild","c","node","_debounce","last","onLoadMore","leading","align_top","container","element","querySelector","scrollTop","offsetTop","scrollIntoView","clientHeight","offsetHeight","focus","isLoading","other","_jsx2","ScrollableList","showLoading","isEmpty","handleLoadOlder","ref","setRef","children","item","ConversationContainer","handleMoveUp","handleMoveDown","hasMore","maxId","expandConversations","DirectTimeline","columnId","removeColumn","addColumn","dir","moveColumn","column","componentDidMount","mountConversations","disconnect","connectDirectStream","componentWillUnmount","unmountConversations","hasUnread","multiColumn","pinned","_jsxs","Column","bindToDocument","label","ColumnHeader","AlternateEmailIcon","active","onPin","handlePin","onMove","handleMove","handleHeaderClick","ConversationsListContainer","trackScroll","timelineId","handleLoadMore","prepend","href","target","alwaysPrepend","emptyMessage","Helmet","name","content"],"mappings":"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","file":"js/features/direct_timeline-75ad13a1a7f2da62be0b.chunk.js","sourcesContent":["import PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport ImmutablePropTypes from 'react-immutable-proptypes';\n\nimport { autoPlayGif } from '../initial_state';\n\nimport { Avatar } from './avatar';\n\nexport default class AvatarComposite extends PureComponent {\n\n  static propTypes = {\n    accounts: ImmutablePropTypes.list.isRequired,\n    animate: PropTypes.bool,\n    size: PropTypes.number.isRequired,\n  };\n\n  static defaultProps = {\n    animate: autoPlayGif,\n  };\n\n  renderItem (account, size, index) {\n    const { animate } = this.props;\n\n    let width  = 50;\n    let height = 100;\n    let top    = 'auto';\n    let left   = 'auto';\n    let bottom = 'auto';\n    let right  = 'auto';\n\n    if (size === 1) {\n      width = 100;\n    }\n\n    if (size === 4 || (size === 3 && index > 0)) {\n      height = 50;\n    }\n\n    if (size === 2) {\n      if (index === 0) {\n        right = '1px';\n      } else {\n        left = '1px';\n      }\n    } else if (size === 3) {\n      if (index === 0) {\n        right = '1px';\n      } else if (index > 0) {\n        left = '1px';\n      }\n\n      if (index === 1) {\n        bottom = '1px';\n      } else if (index > 1) {\n        top = '1px';\n      }\n    } else if (size === 4) {\n      if (index === 0 || index === 2) {\n        right = '1px';\n      }\n\n      if (index === 1 || index === 3) {\n        left = '1px';\n      }\n\n      if (index < 2) {\n        bottom = '1px';\n      } else {\n        top = '1px';\n      }\n    }\n\n    const style = {\n      left: left,\n      top: top,\n      right: right,\n      bottom: bottom,\n      width: `${width}%`,\n      height: `${height}%`,\n    };\n\n    return (\n      <div key={account.get('id')} style={style}>\n        <Avatar account={account} animate={animate} />\n      </div>\n    );\n  }\n\n  render() {\n    const { accounts, size } = this.props;\n\n    return (\n      <div className='account__avatar-composite' style={{ width: `${size}px`, height: `${size}px` }}>\n        {accounts.take(4).map((account, i) => this.renderItem(account, Math.min(accounts.size, 4), i))}\n\n        {accounts.size > 4 && (\n          <span className='account__avatar-composite__label'>\n            +{accounts.size - 4}\n          </span>\n        )}\n      </div>\n    );\n  }\n\n}\n","import PropTypes from 'prop-types';\n\nimport { defineMessages, injectIntl, FormattedMessage } from 'react-intl';\n\nimport classNames from 'classnames';\nimport { Link, withRouter } from 'react-router-dom';\n\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport ImmutablePureComponent from 'react-immutable-pure-component';\n\nimport { ReactComponent as MoreHorizIcon } from '@material-symbols/svg-600/outlined/more_horiz.svg';\nimport { ReactComponent as ReplyIcon } from '@material-symbols/svg-600/outlined/reply.svg';\nimport { HotKeys } from 'react-hotkeys';\n\nimport AttachmentList from 'mastodon/components/attachment_list';\nimport AvatarComposite from 'mastodon/components/avatar_composite';\nimport { IconButton } from 'mastodon/components/icon_button';\nimport { RelativeTimestamp } from 'mastodon/components/relative_timestamp';\nimport StatusContent from 'mastodon/components/status_content';\nimport DropdownMenuContainer from 'mastodon/containers/dropdown_menu_container';\nimport { autoPlayGif } from 'mastodon/initial_state';\nimport { WithRouterPropTypes } from 'mastodon/utils/react_router';\n\nconst messages = defineMessages({\n  more: { id: 'status.more', defaultMessage: 'More' },\n  open: { id: 'conversation.open', defaultMessage: 'View conversation' },\n  reply: { id: 'status.reply', defaultMessage: 'Reply' },\n  markAsRead: { id: 'conversation.mark_as_read', defaultMessage: 'Mark as read' },\n  delete: { id: 'conversation.delete', defaultMessage: 'Delete conversation' },\n  muteConversation: { id: 'status.mute_conversation', defaultMessage: 'Mute conversation' },\n  unmuteConversation: { id: 'status.unmute_conversation', defaultMessage: 'Unmute conversation' },\n});\n\nclass Conversation extends ImmutablePureComponent {\n\n  static propTypes = {\n    conversationId: PropTypes.string.isRequired,\n    accounts: ImmutablePropTypes.list.isRequired,\n    lastStatus: ImmutablePropTypes.map,\n    unread:PropTypes.bool.isRequired,\n    scrollKey: PropTypes.string,\n    onMoveUp: PropTypes.func,\n    onMoveDown: PropTypes.func,\n    markRead: PropTypes.func.isRequired,\n    delete: PropTypes.func.isRequired,\n    intl: PropTypes.object.isRequired,\n    ...WithRouterPropTypes,\n  };\n\n  handleMouseEnter = ({ currentTarget }) => {\n    if (autoPlayGif) {\n      return;\n    }\n\n    const emojis = currentTarget.querySelectorAll('.custom-emoji');\n\n    for (var i = 0; i < emojis.length; i++) {\n      let emoji = emojis[i];\n      emoji.src = emoji.getAttribute('data-original');\n    }\n  };\n\n  handleMouseLeave = ({ currentTarget }) => {\n    if (autoPlayGif) {\n      return;\n    }\n\n    const emojis = currentTarget.querySelectorAll('.custom-emoji');\n\n    for (var i = 0; i < emojis.length; i++) {\n      let emoji = emojis[i];\n      emoji.src = emoji.getAttribute('data-static');\n    }\n  };\n\n  handleClick = () => {\n    if (!this.props.history) {\n      return;\n    }\n\n    const { lastStatus, unread, markRead } = this.props;\n\n    if (unread) {\n      markRead();\n    }\n\n    this.props.history.push(`/@${lastStatus.getIn(['account', 'acct'])}/${lastStatus.get('id')}`);\n  };\n\n  handleMarkAsRead = () => {\n    this.props.markRead();\n  };\n\n  handleReply = () => {\n    this.props.reply(this.props.lastStatus, this.props.history);\n  };\n\n  handleDelete = () => {\n    this.props.delete();\n  };\n\n  handleHotkeyMoveUp = () => {\n    this.props.onMoveUp(this.props.conversationId);\n  };\n\n  handleHotkeyMoveDown = () => {\n    this.props.onMoveDown(this.props.conversationId);\n  };\n\n  handleConversationMute = () => {\n    this.props.onMute(this.props.lastStatus);\n  };\n\n  handleShowMore = () => {\n    this.props.onToggleHidden(this.props.lastStatus);\n  };\n\n  render () {\n    const { accounts, lastStatus, unread, scrollKey, intl } = this.props;\n\n    if (lastStatus === null) {\n      return null;\n    }\n\n    const menu = [\n      { text: intl.formatMessage(messages.open), action: this.handleClick },\n      null,\n    ];\n\n    menu.push({ text: intl.formatMessage(lastStatus.get('muted') ? messages.unmuteConversation : messages.muteConversation), action: this.handleConversationMute });\n\n    if (unread) {\n      menu.push({ text: intl.formatMessage(messages.markAsRead), action: this.handleMarkAsRead });\n      menu.push(null);\n    }\n\n    menu.push({ text: intl.formatMessage(messages.delete), action: this.handleDelete });\n\n    const names = accounts.map(a => <Link to={`/@${a.get('acct')}`} key={a.get('id')} title={a.get('acct')}><bdi><strong className='display-name__html' dangerouslySetInnerHTML={{ __html: a.get('display_name_html') }} /></bdi></Link>).reduce((prev, cur) => [prev, ', ', cur]);\n\n    const handlers = {\n      reply: this.handleReply,\n      open: this.handleClick,\n      moveUp: this.handleHotkeyMoveUp,\n      moveDown: this.handleHotkeyMoveDown,\n      toggleHidden: this.handleShowMore,\n    };\n\n    return (\n      <HotKeys handlers={handlers}>\n        <div className={classNames('conversation focusable muted', { 'conversation--unread': unread })} tabIndex={0}>\n          <div className='conversation__avatar' onClick={this.handleClick} role='presentation'>\n            <AvatarComposite accounts={accounts} size={48} />\n          </div>\n\n          <div className='conversation__content'>\n            <div className='conversation__content__info'>\n              <div className='conversation__content__relative-time'>\n                {unread && <span className='conversation__unread' />} <RelativeTimestamp timestamp={lastStatus.get('created_at')} />\n              </div>\n\n              <div className='conversation__content__names' onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n                <FormattedMessage id='conversation.with' defaultMessage='With {names}' values={{ names: <span>{names}</span> }} />\n              </div>\n            </div>\n\n            <StatusContent\n              status={lastStatus}\n              onClick={this.handleClick}\n              expanded={!lastStatus.get('hidden')}\n              onExpandedToggle={this.handleShowMore}\n              collapsible\n            />\n\n            {lastStatus.get('media_attachments').size > 0 && (\n              <AttachmentList\n                compact\n                media={lastStatus.get('media_attachments')}\n              />\n            )}\n\n            <div className='status__action-bar'>\n              <IconButton className='status__action-bar-button' title={intl.formatMessage(messages.reply)} icon='reply' iconComponent={ReplyIcon} onClick={this.handleReply} />\n\n              <div className='status__action-bar-dropdown'>\n                <DropdownMenuContainer\n                  scrollKey={scrollKey}\n                  status={lastStatus}\n                  items={menu}\n                  icon='ellipsis-h'\n                  iconComponent={MoreHorizIcon}\n                  size={18}\n                  direction='right'\n                  title={intl.formatMessage(messages.more)}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      </HotKeys>\n    );\n  }\n\n}\n\nexport default withRouter(injectIntl(Conversation));\n","import { defineMessages, injectIntl } from 'react-intl';\n\nimport { connect } from 'react-redux';\n\nimport { replyCompose } from 'mastodon/actions/compose';\nimport { markConversationRead, deleteConversation } from 'mastodon/actions/conversations';\nimport { openModal } from 'mastodon/actions/modal';\nimport { muteStatus, unmuteStatus, hideStatus, revealStatus } from 'mastodon/actions/statuses';\nimport { makeGetStatus } from 'mastodon/selectors';\n\nimport Conversation from '../components/conversation';\n\nconst messages = defineMessages({\n  replyConfirm: { id: 'confirmations.reply.confirm', defaultMessage: 'Reply' },\n  replyMessage: { id: 'confirmations.reply.message', defaultMessage: 'Replying now will overwrite the message you are currently composing. Are you sure you want to proceed?' },\n});\n\nconst mapStateToProps = () => {\n  const getStatus = makeGetStatus();\n\n  return (state, { conversationId }) => {\n    const conversation = state.getIn(['conversations', 'items']).find(x => x.get('id') === conversationId);\n    const lastStatusId = conversation.get('last_status', null);\n\n    return {\n      accounts: conversation.get('accounts').map(accountId => state.getIn(['accounts', accountId], null)),\n      unread: conversation.get('unread'),\n      lastStatus: lastStatusId && getStatus(state, { id: lastStatusId }),\n    };\n  };\n};\n\nconst mapDispatchToProps = (dispatch, { intl, conversationId }) => ({\n\n  markRead () {\n    dispatch(markConversationRead(conversationId));\n  },\n\n  reply (status, router) {\n    dispatch((_, getState) => {\n      let state = getState();\n\n      if (state.getIn(['compose', 'text']).trim().length !== 0) {\n        dispatch(openModal({\n          modalType: 'CONFIRM',\n          modalProps: {\n            message: intl.formatMessage(messages.replyMessage),\n            confirm: intl.formatMessage(messages.replyConfirm),\n            onConfirm: () => dispatch(replyCompose(status, router)),\n          },\n        }));\n      } else {\n        dispatch(replyCompose(status, router));\n      }\n    });\n  },\n\n  delete () {\n    dispatch(deleteConversation(conversationId));\n  },\n\n  onMute (status) {\n    if (status.get('muted')) {\n      dispatch(unmuteStatus(status.get('id')));\n    } else {\n      dispatch(muteStatus(status.get('id')));\n    }\n  },\n\n  onToggleHidden (status) {\n    if (status.get('hidden')) {\n      dispatch(revealStatus(status.get('id')));\n    } else {\n      dispatch(hideStatus(status.get('id')));\n    }\n  },\n\n});\n\nexport default injectIntl(connect(mapStateToProps, mapDispatchToProps)(Conversation));\n","import PropTypes from 'prop-types';\n\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport ImmutablePureComponent from 'react-immutable-pure-component';\n\nimport { debounce } from 'lodash';\n\nimport ScrollableList from '../../../components/scrollable_list';\nimport ConversationContainer from '../containers/conversation_container';\n\nexport default class ConversationsList extends ImmutablePureComponent {\n\n  static propTypes = {\n    conversations: ImmutablePropTypes.list.isRequired,\n    scrollKey: PropTypes.string.isRequired,\n    hasMore: PropTypes.bool,\n    isLoading: PropTypes.bool,\n    onLoadMore: PropTypes.func,\n  };\n\n  getCurrentIndex = id => this.props.conversations.findIndex(x => x.get('id') === id);\n\n  handleMoveUp = id => {\n    const elementIndex = this.getCurrentIndex(id) - 1;\n    this._selectChild(elementIndex, true);\n  };\n\n  handleMoveDown = id => {\n    const elementIndex = this.getCurrentIndex(id) + 1;\n    this._selectChild(elementIndex, false);\n  };\n\n  _selectChild (index, align_top) {\n    const container = this.node.node;\n    const element = container.querySelector(`article:nth-of-type(${index + 1}) .focusable`);\n\n    if (element) {\n      if (align_top && container.scrollTop > element.offsetTop) {\n        element.scrollIntoView(true);\n      } else if (!align_top && container.scrollTop + container.clientHeight < element.offsetTop + element.offsetHeight) {\n        element.scrollIntoView(false);\n      }\n      element.focus();\n    }\n  }\n\n  setRef = c => {\n    this.node = c;\n  };\n\n  handleLoadOlder = debounce(() => {\n    const last = this.props.conversations.last();\n\n    if (last && last.get('last_status')) {\n      this.props.onLoadMore(last.get('last_status'));\n    }\n  }, 300, { leading: true });\n\n  render () {\n    const { conversations, isLoading, onLoadMore, ...other } = this.props;\n\n    return (\n      <ScrollableList {...other} isLoading={isLoading} showLoading={isLoading && conversations.isEmpty()} onLoadMore={onLoadMore && this.handleLoadOlder} ref={this.setRef}>\n        {conversations.map(item => (\n          <ConversationContainer\n            key={item.get('id')}\n            conversationId={item.get('id')}\n            onMoveUp={this.handleMoveUp}\n            onMoveDown={this.handleMoveDown}\n            scrollKey={this.props.scrollKey}\n          />\n        ))}\n      </ScrollableList>\n    );\n  }\n\n}\n","import { connect } from 'react-redux';\n\nimport { expandConversations } from '../../../actions/conversations';\nimport ConversationsList from '../components/conversations_list';\n\nconst mapStateToProps = state => ({\n  conversations: state.getIn(['conversations', 'items']),\n  isLoading: state.getIn(['conversations', 'isLoading'], true),\n  hasMore: state.getIn(['conversations', 'hasMore'], false),\n});\n\nconst mapDispatchToProps = dispatch => ({\n  onLoadMore: maxId => dispatch(expandConversations({ maxId })),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ConversationsList);\n","import PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport { defineMessages, injectIntl, FormattedMessage } from 'react-intl';\n\nimport { Helmet } from 'react-helmet';\n\nimport { connect } from 'react-redux';\n\nimport { ReactComponent as AlternateEmailIcon } from '@material-symbols/svg-600/outlined/alternate_email.svg';\n\nimport { addColumn, removeColumn, moveColumn } from 'mastodon/actions/columns';\nimport { mountConversations, unmountConversations, expandConversations } from 'mastodon/actions/conversations';\nimport { connectDirectStream } from 'mastodon/actions/streaming';\nimport Column from 'mastodon/components/column';\nimport ColumnHeader from 'mastodon/components/column_header';\n\nimport ConversationsListContainer from './containers/conversations_list_container';\n\nconst messages = defineMessages({\n  title: { id: 'column.direct', defaultMessage: 'Private mentions' },\n});\n\nclass DirectTimeline extends PureComponent {\n\n  static propTypes = {\n    dispatch: PropTypes.func.isRequired,\n    columnId: PropTypes.string,\n    intl: PropTypes.object.isRequired,\n    hasUnread: PropTypes.bool,\n    multiColumn: PropTypes.bool,\n  };\n\n  handlePin = () => {\n    const { columnId, dispatch } = this.props;\n\n    if (columnId) {\n      dispatch(removeColumn(columnId));\n    } else {\n      dispatch(addColumn('DIRECT', {}));\n    }\n  };\n\n  handleMove = (dir) => {\n    const { columnId, dispatch } = this.props;\n    dispatch(moveColumn(columnId, dir));\n  };\n\n  handleHeaderClick = () => {\n    this.column.scrollTop();\n  };\n\n  componentDidMount () {\n    const { dispatch } = this.props;\n\n    dispatch(mountConversations());\n    dispatch(expandConversations());\n    this.disconnect = dispatch(connectDirectStream());\n  }\n\n  componentWillUnmount () {\n    this.props.dispatch(unmountConversations());\n\n    if (this.disconnect) {\n      this.disconnect();\n      this.disconnect = null;\n    }\n  }\n\n  setRef = c => {\n    this.column = c;\n  };\n\n  handleLoadMore = maxId => {\n    this.props.dispatch(expandConversations({ maxId }));\n  };\n\n  render () {\n    const { intl, hasUnread, columnId, multiColumn } = this.props;\n    const pinned = !!columnId;\n\n    return (\n      <Column bindToDocument={!multiColumn} ref={this.setRef} label={intl.formatMessage(messages.title)}>\n        <ColumnHeader\n          icon='at'\n          iconComponent={AlternateEmailIcon}\n          active={hasUnread}\n          title={intl.formatMessage(messages.title)}\n          onPin={this.handlePin}\n          onMove={this.handleMove}\n          onClick={this.handleHeaderClick}\n          pinned={pinned}\n          multiColumn={multiColumn}\n        />\n\n        <ConversationsListContainer\n          trackScroll={!pinned}\n          scrollKey={`direct_timeline-${columnId}`}\n          timelineId='direct'\n          bindToDocument={!multiColumn}\n          onLoadMore={this.handleLoadMore}\n          prepend={<div className='follow_requests-unlocked_explanation'><span><FormattedMessage id='compose_form.encryption_warning' defaultMessage='Posts on Mastodon are not end-to-end encrypted. Do not share any dangerous information over Mastodon.' /> <a href='/terms' target='_blank'><FormattedMessage id='compose_form.direct_message_warning_learn_more' defaultMessage='Learn more' /></a></span></div>}\n          alwaysPrepend\n          emptyMessage={<FormattedMessage id='empty_column.direct' defaultMessage=\"You don't have any private mentions yet. When you send or receive one, it will show up here.\" />}\n        />\n\n        <Helmet>\n          <title>{intl.formatMessage(messages.title)}</title>\n          <meta name='robots' content='noindex' />\n        </Helmet>\n      </Column>\n    );\n  }\n\n}\n\nexport default connect()(injectIntl(DirectTimeline));\n"],"sourceRoot":""}